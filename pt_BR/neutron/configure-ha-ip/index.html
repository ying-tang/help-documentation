<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Como configurar um IP de alta disponibilidade</title>
  <meta name="description" content="Este artigo fornece um recurso sobre como configurar IPs flutuantes HA em um ambiente do IBM Bluemix Private Cloud Local. Essas instruções supõem que você já...">

  <link rel="stylesheet" href="/tyying/help-documentation-staging-area/css/main.css">
  <link rel="canonical" href="/tyying/help-documentation-staging-area/pt_BR/neutron/configure-ha-ip/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/tyying/help-documentation-staging-area/pt_BR/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/tyying/help-documentation-staging-area/pt_BR/"><img src="/tyying/help-documentation-staging-area/img/pt_BR/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/tyying/help-documentation-staging-area/img/pt_BR/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/tyying/help-documentation-staging-area/img/pt_BR/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /tyying/help-documentation-staging-area/neutron/configure-ha-ip/ ">en</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/fr/neutron/configure-ha-ip/ ">fr</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/de/neutron/configure-ha-ip/ ">de</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/ja/neutron/configure-ha-ip/ ">ja</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_CN/neutron/configure-ha-ip/ ">zh_CN</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_TW/neutron/configure-ha-ip/ ">zh_TW</a> |
    
      <a style="font-weight: bold;" href=" /tyying/help-documentation-staging-area/pt_BR/neutron/configure-ha-ip/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted">Getting Started (41)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/openvpn-setup/">Configurando um servidor OpenVPN em sua instância</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/connect-to-openvpn-server/">Conectando-se ao seu servidor OpenVPN</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Customer_3.1.1_Point_Release/">Notas sobre a liberação do ponto 3.1.1 para cliente</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/blue-box-cloud-components/">Componentes do Bluemix Private Cloud</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/detaching-volume/">O que deve ser feito antes de separar um volume?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Customer_3.1.0_Release_Notes/">Notas sobre a liberação 3.1.0</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Customer_4.0.0.0r_Release_Notes/">Notas sobre a liberação 4.0.0.0r</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/python-environment-primer/">Ambientes de python virtuais e você: uma cartilha do desenvolvedor</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/FAQ/">Perguntas Frequentes sobre Questões Técnicas</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/RHOSP_Product_Overview/">IBM Bluemix Private Cloud com Red Hat - Visão geral do produto</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/RHOSP_Building_Blocks/">Blocos de construção para IBM Bluemix Private Cloud com Red Hat</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Building_Blocks/">Blocos de contrução do IBM Bluemix Private Cloud (Edição da comunidade)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/general_product_overview/">Visão geral do produto</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Instance_Resize/">Redimensionando uma instância (fora de tempo real)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">Configurar conectividade de rede entre diversos ambientes de nuvem usando a rede privada</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commontech/Windows_License_Activation/">Guia do cliente para ativação do Windows</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 9 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/adding-removing-subscribers/">Incluindo ou removendo assinantes para um chamado</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/view-my-bill/">Como posso visualizar minha fatura?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/report-issue/">Como posso reportar um problema?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/escalating-a-ticket/">How do I escalate a ticket?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/status-pages/">Páginas de status do Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">Transferindo um domínio do Blue Box</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Box_Panel/">Guia do usuário do Box Panel</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel, Site Controller e IBM Bluemix Private Cloud Local</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/qemu_article/">Preparando-se para o OpenStack — QEMU e sua nuvem</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Improving_Cloud_Performance/">Preparando-se para o OpenStack II - Melhorando o desempenho da nuvem</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Optimized_Load_Balancing/">Nuvem 101 -- Balanceamento otimizado de carga</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">Guia do usuário para Imagens na Nuvem (IBM Bluemix Private Cloud com Red Hat)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">Guia do Usuário para Imagens da Nuvem (Edição Community)</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/gettingstarted/userguides/Image_Release_Notes/">Notas sobre a liberação da imagem do IBM Bluemix Private Cloud</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_3.0.1_Point_Release/">Notas sobre a liberação do ponto 3.0.1 para cliente</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_3.1.1_Point_Release/">Customer 3.1.1 Point Release Notes</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_4.0.0.0r_Release_Notes/">Release Notes 4.0.0.0r</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_2.1.1_Point_Release/">Notas sobre a liberação 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/release_notes_2.1_for_customers/">Notas sobre a liberação 2.1</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_3.0.0_Release_Notes/">Notas sobre a liberação 3.0.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/releasenotes/Customer_3.1.0_Release_Notes/">Release Notes 3.1.0</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/libvirt_error/">Status de erro em instância: erro libvirt</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/ssh-too-long-error/">Por que devo esperar de 4 a 5 segundos para realizar SSH em minha instância?</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/ping-instance-error/">Por que não é possível realizar SSH ou executar ping em uma instância?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/nova-microversions-error/">Erro: 'O servidor não suporta microversões' ao executar comandos Nova</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/Bad_Availability_Zone/">Cloud Foundry: Erro de zona de disponibilidade inválida</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/failed_to_create_router/">Tentativa de criar um roteador está falhando</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/How_many_connections_can_HAProxy_handle/">Quantas conexões simultâneas o HAProxy suporta?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/CLI-authentication-error/">Ao usar qualquer uma das CLIs do OpenStack no Windows, recebo erros de falha de autenticação</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/floating-ips-error/">Por que todos os IPs flutuantes que são designados a mim não estão disponíveis?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/horizon-delete-error/">Por que não é possível excluir meu projeto/locatário a partir do painel do Horizon?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/no-valid-host-error/">Erro: Nenhum host válido foi localizado</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/Cannot_See_New_vCPUs/">Por que não é possível visualizar minhas novas vCPUs listadas no Horizon?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/failure_prepping_block_device/">Erro: Falha na preparação de dispositivo de bloco</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/delete_security_group/">Por  que não posso excluir um Grupo de Segurança?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/Troubleshooting_FAQ/">Perguntas Frequentes de Resolução de Problemas</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/Unable_to_ping_tenant_network/">Por que não é possível executar ping em minhas redes de locatário?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/troubleshooting/Why_No_vIP_Failover_With_L2pop/">Por que não é possível usar L2pop quando quero fazer failover em minhas instâncias vIP?</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/launch-instance-from-volume/">Como ativar uma instância de um volume</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/import-vhd-image-lvm/">Importando uma imagem VHD que usa gerenciamento de volume do Linux para seu diretório raiz</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/OpenStack_network_concepts/">Conceitos de rede do OpenStack</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">Criando uma instância com um IP fixo específico</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/Mitaka_CLI_notes/">Notas sobre a CLI do OpenStack</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/Why-Choose-OpenStack/">Por que escolher o OpenStack?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/openstack-storage-concepts/">Conceitos do OpenStack Storage</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/Ursula_and_OpenStack/">Ursula e OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/Creating_Instances_With_Static_IP/">Como criar uma instância com IP estático</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/quotas/">Cotas</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/How_to_Isolate_Tenants/">Como isolar locatários (Projetos)</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/userdocs/external-reference-material/">Materiais de referência externa</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/api/floating-ip-address/">Criando um endereço IP flutuante usando a API do OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/api/openstack-api-getting-started/">Introdução à API do OpenStack</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/openstack/api/OpenStack_Client_Versions/">Requisitos para versões de clientes do OpenStack</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/creating-additional-networks-with-horizon/">Criando redes adicionais no OpenStack usando o painel do Horizon</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/Making_Snapshots_in_Horizon/">Usando o Horizon para capturas instantâneas</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/allocate-floating-ip/">Alocando e anexando um IP público (flutuante) a uma instância</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/create-volume-from-horizon/">Criando um volume a partir do painel do Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/horizon-for-administrators/">Horizon para administradores</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/launch-instance-from-horizon/">Ativando uma instância do painel do Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/launch-instance-from-horizon_newton/">Ativando uma instância do painel do Horizon (versão OpenStack Newton)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/set-reverse-dns/">Como configuro um registro DNS (PTR) reverso para uma instância do IBM Bluemix Private Cloud?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/using-horizon/">Usando o Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/horizon/Horizon_troubleshooting_FAQ/">Perguntas mais frequentes sobre resolução de problemas do Horizon</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/windows-user-and-password/">Como configurar um nome do usuário e senha em uma instância Windows no OpenStack?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/CLI-create-public-instance/">Como criar uma instância e torná-la disponível publicamente usando a linha de comandos</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/Nova_boot_speed/">O que acontece nos bastidores quando inicializo uma máquina virtual e como faço para que ela seja mais rápida?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/Restrict_Floating_IP/">Como posso restringir IPs flutuantes?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/config_drive_for_instances/">É possível criar uma instância e incluir arquivos nela usando o drive de configuração?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/create-vm-with-volumes/">Como posso criar uma instância com o cliente da linha de comandos Nova?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/define-flavor-vcpu/">Como posso definir a topologia do vCPU de tipo?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/maximum-flavor-spec/">Qual é a especificação máxima que posso configurar para um tipo?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/migrate-instance/">Migrando uma instância para uma nova nuvem</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/Metadata_service_FAQ/">Serviço de Metadados no OpenStack Neutron e Nova</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/nova/hypervisor-statistics/">Como posso obter estatísticas do hypervisor?</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/network_ip_availability/">Como posso verificar a disponibilidade do IP em minha rede?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">Como é possível isolar redes do projeto conectadas a um roteador compartilhado?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/time-ip-associated-with-instance/">Como posso descobrir quando um IP flutuante foi associado ou desassociado de uma instância?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Load_Balancing_Methods/">Métodos de balanceamento de carga</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Multi-tier_Router_Configuration/">Configuração de roteador de várias camadas em seu IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/set-up-dns-records/">Como posso configurar registros DNS direcionados para as instâncias do OpenStack?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/routing_internal_traffic_between_projects/">Tráfego interno de roteamento entre projetos</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/add-ip-to-instance/">Inclua um IP privado fixo específico para uma instância</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/configure-dns.for-instances/">Configurando o DNS para instâncias</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/configure-multi-nics/">Configurando diversas interfaces de rede para suas próprias imagens de nuvem</a>
          </li>
          
        
          
            
            <li>
                <a class="page-link--active"  href="/tyying/help-documentation-staging-area/pt_BR/neutron/configure-ha-ip/">Como configurar um IP de alta disponibilidade</a>
            </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/creating-virtual-networks/">Criando redes virtuais no IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/How_Can_I_See_My_IPs/">Como posso visualizar meus IPs?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/How_to_update_DNS/">Como posso atualizar o DNS?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/vpn-vlan-directlink/">VPN, VLAN e link direto</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/BYOFIP_support/">Usando a conectividade BYOFIP entre o IBM Bluemix Private Cloud e um site do cliente</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Intro_to_LBaaS/">Introdução ao Balanceador de Carga Como um Serviço (LBaaS)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Security_groups_CLI/">Usando a CLI para configurar grupos de segurança</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Network_Use_Cases_White_Paper/">Casos de uso de rede do IBM Blue Box</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/neutron/Where_Are_These_IPs/">Onde estão os dois primeiros IPs?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/glance/FAQ_Working_with_Windows_Images/">Perguntas Frequentes sobre como trabalhar como imagens no Windows</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/glance/compatible-glance-images/">Existe uma lista de imagens oficiais compatíveis com o OpenStack para download e usar com o Glance? (CentOS, Ubuntu, etc.)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/glance/disk-capacity-constraints/">Restrições de capacidade de disco</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/glance/Image_Properties_on_Power/">Configurações ideais para imagens do Glance no Power Compute</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/glance/imagesnapshot/">Diferença entre imagem e captura instantânea</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/read-only-cinder-error/">O que gera volumes Cinder somente leitura e como posso corrigi-los?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/cinder-volume-stuck/">Paralisação do volume Cinder</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/alternative_method_for_volume_encryption/">Método alternativo para criptografia de volume de armazenamento de bloco (usando uma VM guest do Ubuntu)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/Bug_Creating_Encrypted_Volumes/">A criação de volumes criptografados com o Cinder não é suportada</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/Managing_block_storage/">Gerenciamento o armazenamento de bloco</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/cli-create-volume/">Criando um volume com a linha de comandos</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/create-volume-from-snapshot/">É compatível criar um volume a partir de uma instância?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/resize_cinder_volume/">Como posso redimensionar um volume Cinder?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/supported_volume_types/">Quais tipos de volume Cinder são compatíveis com uma instância na nuvem?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/Ephemeral_to_Cinder/">Como mover do disco efêmero para o armazenamento Cinder</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/Force_snapshot_on_attached_volume/">Como forçar uma captura instantânea em um volume anexado</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/cinder/cinder-failed-connection-error/">O que faço se o cliente Cinder retornar a mensagem 'ERRO: Não foi possível estabelecer a conexão' e falhar ao contectar-se?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/oidc-federation/">Federação do OpenID Connect no IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/saml-federation/">Federação SAML de Keystone no IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/RBAC_Definitions/">Controle de acesso baseado em função</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/Managing_Users_and_Projects/">Gerenciando usuários e projetos</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/k2k-federation/">Federação de Keystone to Keystone (K2K) no IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/tenants-security-groups-keystone/">Projetos e grupos de segurança</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/custom-domains-keystone/">Domínios customizados no Keystone V3</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/keystone/Getting_Started_with_K2K_Identity/">Introdução à identidade federada do Keystone</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/Getting_Started_With_Heat/">Introdução aos modelos do Heat</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/autoscaling-with-heat/">Usando Heat para efetuar Auto-scaling</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/Deploying_apps_with_UCD/">Implementando aplicativos com o IBM UrbanCode Deploy e o IBM Bluemix Private Cloud</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/using_heat_for_load_balancer/">Usando o Heat para servidores de provisionamento com um balanceador de carga</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/using-ucd-ucdp/">Usando o IBM Urban Code Deploy com o IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/heat/using_heat_for_deployment/">Usando o Heat com um certificado autoassinado</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/pt_BR/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/pt_BR/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/pt_BR/ceilometer/compatible-glance-images/">É compatível criar um volume a partir de uma instância?</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        Como configurar um IP de alta disponibilidade

        
        </h1>




        
        <div class="post-data">
          <img src='/tyying/help-documentation-staging-area/img/pt_BR/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Eric French </span>
              <span class="dot">&#9679;</span>
              <span class="date"> September 21, 2016</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>neutron</p></li>
                  
                    <li class="tag"><p>configuring ip</p></li>
                  
                    <li class="tag"><p>ha</p></li>
                  
                    <li class="tag"><p>highly available</p></li>
                  
                    <li class="tag"><p>allowed address pairs</p></li>
                  
                    <li class="tag"><p>l2 pop</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <p>Este artigo fornece um recurso sobre como configurar IPs flutuantes HA em um ambiente do <strong>IBM Bluemix Private Cloud Local</strong>. Essas instruções supõem que você já tenha o <a href="http://ibm-blue-box-help.github.io/help-documentation/openstack/api/openstack-api-getting-started/"><strong>OpenStack Python API Clients</strong></a> instalado.</p>

<p>NOTA: este recurso funciona APENAS com o IBM Bluemix Private Local Cloud. Ele não se aplica à oferta do IBM Bluemix Private Cloud (Nuvem Dedicada). A rede do datacenter do IBM Bluemix atualmente requer o uso de L2 POP, um driver projetado para suportar o ajuste de escala para redes grandes. Citando um de nossos engenheiros:</p>

<p>“O driver do mecanismo L2Population que precisamos usar para fazer VXLAN funcionar em redes do datacenter do IBM Bluemix é incompatível com o aprendizado MAC ou as respostas ARP usadas pelos métodos IP HA. Os IPs são mapeados para hosts por meio de dois mecanismos de conversão: ARP mapeia IPs para endereços MAC e alterna o aprendizado ao qual o MAC está associado com cada porta. No momento do failover, qualquer IP HA deve mudar pelo menos um desses dois mapeamentos.”</p>

<p>Como uma possível solução alternativa, na liberação do OpenStack Mitaka, há uma opção para desativar metade do respondente de L2 POP, que pode permitir que você configure o tipo ARP gratuito de HA. (Veja este artigo: https://review.openstack.org/278597) Se você realmente precisa de HA, é melhor usar um Balanceador de Carga para isso, como Neutron LBaaS v2. Como outra possível solução alternativa, se sua nuvem for implementada em um único Pod SoftLayer e ela nunca crescer além desse único Pod, você pode possivelmente implementar algum tipo de IP HA de maneira customizada.</p>

<p><strong>Configure as instâncias do OpenStack</strong></p>

<p>Há duas partes do trabalho do OpenStack. A primeira parte requer credenciais administrativas para configurar zonas de disponibilidade, e a segunda parte pode ser feita por um usuário regular. A primeira parte precisa ser feita apenas uma vez.</p>

<h3 id="primeira-parte-etapas-administrativas">Primeira parte: etapas administrativas</h3>

<p><strong>Configurar zonas de disponibilidade</strong></p>

<p>Usamos zonas de disponibilidade para criar um conjunto de recursos para assegurar que nossas duas MVs exclusivas não terminem nos mesmos hosts físicos.</p>

<p>Como administrador, crie duas zonas de disponibilidade distintas:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova aggregate-create group1 group1-az
+----+--------+-------------------+-------+-------------------------------+
| Id | Name   | Availability Zone | Hosts | Metadata                      |
+----+--------+-------------------+-------+-------------------------------+
| 8  | group1 | group1-az         |       | <span class="s1">'availability_zone=group1-az'</span> |
+----+--------+-------------------+-------+-------------------------------+
<span class="gp">$ </span>nova aggregate-create group2 group2-az
+----+--------+-------------------+-------+-------------------------------+
| Id | Name   | Availability Zone | Hosts | Metadata                      |
+----+--------+-------------------+-------+-------------------------------+
| 11 | group2 | group2-az         |       | <span class="s1">'availability_zone=group2-az'</span> |
+----+--------+-------------------+-------+-------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>Visualize as informações da zona de disponibilidade para obter informações sobre os hypervisors:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova availability-zone-list
+-----------------------+----------------------------------------+
| Name                  | Status                                 |
+-----------------------+----------------------------------------+
| internal              | available                              |
| |- ds1263             |                                        |
| | |- nova-conductor   | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-cert        | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-consoleauth | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-scheduler   | enabled :-<span class="o">)</span> 2014-12-03T00:07:27.000000 |
| |- ds1264             |                                        |
| | |- nova-conductor   | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| | |- nova-cert        | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| | |- nova-consoleauth | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-scheduler   | enabled :-<span class="o">)</span> 2014-12-03T00:07:30.000000 |
| group1-az             | available                              |
| |- ds1263             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| group2-az             | available                              |
| |- ds1264             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| nova                  | available                              |
| |- ds1265             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| |- ds1266             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
+-----------------------+----------------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>Ao selecionar hosts dessa lista, inclua-os em suas duas zonas de disponibilidade distintas:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova aggregate-add-host 8 ds1263
Host ds1263 has been successfully added <span class="k">for </span>aggregate 8
+----+--------+-------------------+----------+-------------------------------+
| Id | Name   | Availability Zone | Hosts    | Metadata                      |
+----+--------+-------------------+----------+-------------------------------+
| 8  | group1 | group1-az         | <span class="s1">'ds1263'</span> | <span class="s1">'availability_zone=group1-az'</span> |
+----+--------+-------------------+----------+-------------------------------+
<span class="gp">$ </span>nova aggregate-add-host 11 ds1264
Host ds1264 has been successfully added <span class="k">for </span>aggregate 11
+----+--------+-------------------+----------+-------------------------------+
| Id | Name   | Availability Zone | Hosts    | Metadata                      |
+----+--------+-------------------+----------+-------------------------------+
| 11 | group2 | group2-az         | <span class="s1">'ds1264'</span> | <span class="s1">'availability_zone=group2-az'</span> |
+----+--------+-------------------+----------+-------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>É isso aí!</p>

<h3 id="segunda-parte-etapas-que-requerem-apenas-permissões-regulares">Segunda parte: etapas que requerem apenas permissões regulares</h3>

<ul>
  <li>Confirme se a extensão <code class="highlighter-rouge">allowed-address-pairs</code> está carregada.</li>
</ul>

<p>A extensão <code class="highlighter-rouge">allowed-address-pairs</code> é requerida e é enviada por padrão com cada instalação do <strong>IBM Bluemix Private</strong> Cloud. É possível confirmar se ela está operando, executando os seguintes comandos:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron ext-list | grep allowed-address-pairs
| allowed-address-pairs | Allowed Address Pairs
|
<span class="sb">```</span></code></pre></figure>

<p><strong>Nota:</strong> Não é possível ter <code class="highlighter-rouge">allowed_address_pairs</code> ativado e a segurança da porta desativada na MESMA porta Neutron, porque elas são mutuamente exclusivas.</p>

<ul>
  <li>Crie um grupo de segurança VRRP.</li>
</ul>

<p>Esse grupo de segurança é usado para se comunicar com os nós HA. Nessa instância, estamos permitindo o acesso <code class="highlighter-rouge">SSH</code>, mas você pode fazer esse protocolo <code class="highlighter-rouge">HTTP</code>, <code class="highlighter-rouge">HTTPS</code>, etc…</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron security-group-create vrrp
Created a new security_group:
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field                | Value                                                                                                                                                                                                                                                                                                                         |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| description          |                                                                                                                                                                                                                                                                                                                               |
| id                   | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1                                                                                                                                                                                                                                                                                          |
| name                 | vrrp                                                                                                                                                                                                                                                                                                                      |
| security_group_rules | <span class="o">{</span><span class="s2">"remote_group_id"</span>: null, <span class="s2">"direction"</span>: <span class="s2">"egress"</span>, <span class="s2">"remote_ip_prefix"</span>: null, <span class="s2">"protocol"</span>: null, <span class="s2">"tenant_id"</span>: <span class="s2">"0109935df2314105bf7ba85a79a1c001"</span>, <span class="s2">"port_range_max"</span>: null, <span class="s2">"security_group_id"</span>: <span class="s2">"7f09ac66-23e2-46cd-9af8-ca541dd99bc1"</span>, <span class="s2">"port_range_min"</span>: null, <span class="s2">"ethertype"</span>: <span class="s2">"IPv4"</span>, <span class="s2">"id"</span>: <span class="s2">"28236695-9cb4-4a0c-a04d-9d230fcdce4a"</span><span class="o">}</span> |
|                      | <span class="o">{</span><span class="s2">"remote_group_id"</span>: null, <span class="s2">"direction"</span>: <span class="s2">"egress"</span>, <span class="s2">"remote_ip_prefix"</span>: null, <span class="s2">"protocol"</span>: null, <span class="s2">"tenant_id"</span>: <span class="s2">"0109935df2314105bf7ba85a79a1c001"</span>, <span class="s2">"port_range_max"</span>: null, <span class="s2">"security_group_id"</span>: <span class="s2">"7f09ac66-23e2-46cd-9af8-ca541dd99bc1"</span>, <span class="s2">"port_range_min"</span>: null, <span class="s2">"ethertype"</span>: <span class="s2">"IPv6"</span>, <span class="s2">"id"</span>: <span class="s2">"a8180e54-6ae6-44e7-9da8-baeec24dbe6f"</span><span class="o">}</span> |
| tenant_id            | 0109935df2314105bf7ba85a79a1c001                                                                                                                                                                                                                                                                                              |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Inclua o acesso <code class="highlighter-rouge">ICMP</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span><span class="nv">$ </span>neutron security-group-rule-create --protocol icmp vrrp
Created a new security_group_rule:
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| id                | f795c776-2e8c-4234-9f9c-cff5bd4398fc |
| port_range_max    |                                      |
| port_range_min    |                                      |
| protocol          | icmp                                 |
| remote_group_id   |                                      |
| remote_ip_prefix  |                                      |
| security_group_id | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 |
| tenant_id         | 0109935df2314105bf7ba85a79a1c001     |
+-------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Inclua o acesso <code class="highlighter-rouge">SSH</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron security-group-rule-create --protocol tcp --port-range-min 22 --port-range-max 22 vrrp
Created a new security_group_rule:
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| id                | 41c996f5-1e7b-4061-87ff-8dba581eda7c |
| port_range_max    | 22                                   |
| port_range_min    | 22                                   |
| protocol          | tcp                                  |
| remote_group_id   |                                      |
| remote_ip_prefix  |                                      |
| security_group_id | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 |
| tenant_id         | 0109935df2314105bf7ba85a79a1c001     |
+-------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Colete parâmetros requeridos para inicializar as instâncias.</li>
</ul>

<p>Você precisará coletar algumas informações específicas para assegurar que os balanceadores de carga HA sejam fornecidos com o SO que desejamos e que terminem como hypervisors físicos exclusivos.</p>

<ul>
  <li>Selecione um ID de tipo particular. Nesse caso, vamos usar <code class="highlighter-rouge">m1.medium</code> com o ID <code class="highlighter-rouge">3</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova flavor-list
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
| ID | Name      | Memory_MB | Disk | Ephemeral | Swap_MB | VCPUs | RXTX_Factor | Is_Public |
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
| 1  | m1.tiny   | 512       | 10   | 0         |         | 1     | 1.0         | True      |
| 2  | m1.small  | 2048      | 20   | 0         |         | 1     | 1.0         | True      |
| 3  | m1.medium | 4096      | 40   | 0         |         | 2     | 1.0         | True      |
| 4  | m1.large  | 8192      | 80   | 0         |         | 4     | 1.0         | True      |
| 5  | m1.xlarge | 16384     | 160  | 0         |         | 8     | 1.0         | True      |
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Selecione o ID da imagem particular. Nesse caso, selecionamos <code class="highlighter-rouge">ubuntu-14.04</code> e o ID é <code class="highlighter-rouge">1525c3f3-1224-4958-bd07-da9feaedf18b</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova image-list | grep  ubuntu-14.04
+--------------------------------------+---------------------------------+--------+--------+
| ID                                   | Name                            | Status | Server |
+--------------------------------------+---------------------------------+--------+--------+
| 1525c3f3-1224-4958-bd07-da9feaedf18b | ubuntu-14.04                    | ACTIVE |        |
+--------------------------------------+---------------------------------+--------+--------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Colete o ID da rede Interna. Nesse caso, é <code class="highlighter-rouge">ba0fdd03-72b5-41eb-bb67-fef437fd6cb4</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova network-list
+--------------------------------------+----------+------+
| ID                                   | Label    | Cidr |
+--------------------------------------+----------+------+
| 06dc9d5a-f55a-410d-a7fd-4c7cb34ad927 | external | -    |
| ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 | internal | -    |
+--------------------------------------+----------+------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Selecione os IDs dos grupos <code class="highlighter-rouge">padrão</code> e <code class="highlighter-rouge">VRRP</code>; nesse caso, são <code class="highlighter-rouge">a963c698-473c-4182-8add-e1e6398629e5</code> e <code class="highlighter-rouge">7f09ac66-23e2-46cd-9af8-ca541dd99bc1</code> respectivamente:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova secgroup-list
+--------------------------------------+----------+-------------+
| Id                                   | Name     | Description |
+--------------------------------------+----------+-------------+
| a963c698-473c-4182-8add-e1e6398629e5 | default  | default     |
| 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 | vrrp |             |
+--------------------------------------+----------+-------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Selecione as duas zonas de disponibilidade exclusivas que criamos anteriormente. Nesse caso, <code class="highlighter-rouge">group1-az</code> e <code class="highlighter-rouge">group2-az</code>.</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova availability-zone-list
+-----------+-----------+
| Name      | Status    |
+-----------+-----------+
| group1-az | available |
| group2-az | available |
| nova      | available |
+-----------+-----------+
<span class="nv">$
</span>
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Inicialize duas instâncias exclusivas em dois hosts exclusivos.</li>
</ul>

<p>Aqui está uma sinopse dos valores que coletamos de antes:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
flavor: 3
image: 1525c3f3-1224-4958-bd07-da9feaedf18b
availability-zone: group1-az, group2-az
security groups: b3ccd3e2-6566-40ba-8469-9919a44c0eaf, 1409d05d-7b34-4f77-8ae0-8c49c6be37a2
network id: ba0fdd03-72b5-41eb-bb67-fef437fd6cb4
<span class="sb">```</span></code></pre></figure>

<p>Usando essas variáveis, vamos inicializar nossas duas MVs.</p>

<p><strong>Notas adicionais:</strong></p>

<p>Você precisará especificar <code class="highlighter-rouge">key-name</code> para a chave <code class="highlighter-rouge">SSH</code> usada no sistema. Por exemplo:</p>

<p><strong>Host 1</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova boot <span class="se">\
</span>
--key-name default <span class="se">\
</span>
--flavor 3 <span class="se">\
</span>
--image 1525c3f3-1224-4958-bd07-da9feaedf18b <span class="se">\
</span>
--availability-zone group1-az <span class="se">\
</span>
--security-groups a963c698-473c-4182-8add-e1e6398629e5,7f09ac66-23e2-46cd-9af8-ca541dd99bc1 <span class="se">\
</span>
--nic net-id<span class="o">=</span>ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 <span class="se">\
</span>
loadbalancer01
<span class="sb">```</span></code></pre></figure>

<p><strong>Host 2</strong>: (Observe que estamos mudando a zona de disponibilidade e o nome do host.)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova boot <span class="se">\
</span>
--key-name default <span class="se">\
</span>
--flavor 3 <span class="se">\
</span>
--image 1525c3f3-1224-4958-bd07-da9feaedf18b <span class="se">\
</span>
--availability-zone group2-az <span class="se">\
</span>
--security-groups a963c698-473c-4182-8add-e1e6398629e5,7f09ac66-23e2-46cd-9af8-ca541dd99bc1 <span class="se">\
</span>
--nic net-id<span class="o">=</span>ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 <span class="se">\
</span>
loadbalancer02
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Colete dados de instância.</li>
</ul>

<p>Agora que suas duas instâncias foram inicializadas, é possível coletar os dados de instância.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova list
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| ID                                   | Name           | Status | Task State | Power State | Networks              |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| 9d64868e-55ae-4b40-b2fa-70a65b0e88e8 | loadbalancer01 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.183 |
| 0394331a-f2ce-480a-9a93-2a50207ef7ee | loadbalancer02 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.184 |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Crie uma porta.</li>
</ul>

<p><strong>NOTA</strong>: esta ação requer credenciais administrativas, mas pode ser executada para incluir a porta para um locatário específico. Se desejar que essa porta seja incluída para um locatário, use o parâmetro <code class="highlighter-rouge">--tenant-id</code>.</p>

<p>Além disso, certifique-se de anotar o endereço IP e o ID da porta retornados. Nesse caso, é <code class="highlighter-rouge">10.230.7.33</code> e <code class="highlighter-rouge">6bed4a2a-62e6-4cb1-80ce-b5971fee782d</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron port-create --security-group 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 internal
Created a new port:
+-----------------------+------------------------------------------------------------------------------------+
| Field                 | Value                                                                              |
+-----------------------+------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                               |
| allowed_address_pairs |                                                                                    |
| binding:capabilities  | <span class="o">{</span><span class="s2">"port_filter"</span>: <span class="nb">true</span><span class="o">}</span>                                                              |
| binding:host_id       |                                                                                    |
| binding:vif_type      | ovs                                                                                |
| device_id             |                                                                                    |
| device_owner          |                                                                                    |
| fixed_ips             | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.33"</span><span class="o">}</span> |
| id                    | 6bed4a2a-62e6-4cb1-80ce-b5971fee782d                                               |
| mac_address           | fa:16:3e:20:c6:e3                                                                  |
| name                  |                                                                                    |
| network_id            | ba0fdd03-72b5-41eb-bb67-fef437fd6cb4                                               |
| security_groups       | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1                                               |
| status                | DOWN                                                                               |
| tenant_id             | 0109935df2314105bf7ba85a79a1c001                                                   |
+-----------------------+------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Se esse for um serviço público, associe um IP flutuante ao VIP.</li>
</ul>

<p>Usando o <code class="highlighter-rouge">port-id</code> obtido na etapa anterior, podemos associar o IP flutuante ao VIP:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron floatingip-create --port-id<span class="o">=</span>6bed4a2a-62e6-4cb1-80ce-b5971fee782d external
Created a new floatingip:
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| fixed_ip_address    | 10.230.7.33                          |
| floating_ip_address | 173.247.105.96                       |
| floating_network_id | 06dc9d5a-f55a-410d-a7fd-4c7cb34ad927 |
| id                  | 753b3d69-73e4-4396-a98c-df1afdc6c2bf |
| port_id             | 6bed4a2a-62e6-4cb1-80ce-b5971fee782d |
| router_id           | 7e027195-f474-41d7-b15b-9042eb396735 |
| tenant_id           | 0109935df2314105bf7ba85a79a1c001     |
+---------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Determine os IDs da porta para as instâncias do balanceador de carga.</li>
</ul>

<p>Use os endereços IP para mapear as instâncias para suas portas.</p>

<p>Neste caso:</p>

<p><code class="highlighter-rouge">loadbalancer01</code> -&gt; ID da porta: <code class="highlighter-rouge">23604992-c26c-426d-9634-f45d24b9ee83</code></p>

<p><code class="highlighter-rouge">loadbalancer02</code> -&gt; ID da porta: <code class="highlighter-rouge">9f646d79-0599-4761-a4b3-cb9728bbb72a</code></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova list
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| ID                                   | Name           | Status | Task State | Power State | Networks              |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| 9d64868e-55ae-4b40-b2fa-70a65b0e88e8 | loadbalancer01 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.183 |
| 0394331a-f2ce-480a-9a93-2a50207ef7ee | loadbalancer02 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.184 |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
<span class="gp">$ </span>neutron port-list
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
| id                                   | name | mac_address       | fixed_ips                                                                           |
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
| 23604992-c26c-426d-9634-f45d24b9ee83 |      | fa:16:3e:4d:89:4d | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.183"</span><span class="o">}</span> |
| 6bed4a2a-62e6-4cb1-80ce-b5971fee782d |      | fa:16:3e:20:c6:e3 | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.33"</span><span class="o">}</span>  |
| 9f646d79-0599-4761-a4b3-cb9728bbb72a |      | fa:16:3e:8d:0e:13 | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.184"</span><span class="o">}</span> |
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Inclua o novo VIP nos pares de endereço permitidos para as portas da instância</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron port-update 23604992-c26c-426d-9634-f45d24b9ee83 --allowed_address_pairs <span class="nv">list</span><span class="o">=</span><span class="nb">true type</span><span class="o">=</span>dict <span class="nv">ip_address</span><span class="o">=</span>10.230.7.33
Updated port: 23604992-c26c-426d-9634-f45d24b9ee83
<span class="gp">$ </span>neutron port-update 9f646d79-0599-4761-a4b3-cb9728bbb72a --allowed_address_pairs <span class="nv">list</span><span class="o">=</span><span class="nb">true type</span><span class="o">=</span>dict <span class="nv">ip_address</span><span class="o">=</span>10.230.7.33
Updated port: 9f646d79-0599-4761-a4b3-cb9728bbb72a
<span class="sb">```</span></code></pre></figure>

<p><strong>Keepalived</strong></p>

<p>Agora, vamos avançar para a parte <code class="highlighter-rouge">keepalived</code> desse trabalho, mostrada parcialmente como código de amostra a seguir.</p>

<h2 id="instale-o-keepalived">Instale o keepalived</h2>

<p>Nos dois hosts, instale o <code class="highlighter-rouge">keepalived</code>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>apt-get install keepalived
<span class="sb">```</span></code></pre></figure>

<h2 id="configure-o-keepalived-em-ambos-os-hosts">Configure o keepalived em ambos os hosts</h2>

<p><strong>Nota</strong>: <em>Configure a senha para uma sequência exclusiva.</em></p>

<p>O IP listado no endereço IP virtual deve ser seu VIP <strong>Host 1</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
vrrp_instance vrrp_group_1 <span class="o">{</span> state MASTER interface eth0 virtual_router_id 1 priority 100 authentication
    <span class="o">{</span> auth_type PASS auth_pass 9B1D715906B57DF2D78B8D3F02634271CDCC2A51826293FB8E893E21244F7242 <span class="o">}</span>
        virtual_ipaddress <span class="o">{</span> 10.230.7.33/24 brd 10.230.7.255 dev eth0 <span class="o">}</span> <span class="o">}</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Host 2</strong>:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
vrrp_instance vrrp_group_1 <span class="o">{</span> state BACKUP interface eth0 virtual_router_id 1 priority 50 authentication
    <span class="o">{</span> auth_type PASS auth_pass 9B1D715906B57DF2D78B8D3F02634271CDCC2A51826293FB8E893E21244F7242 <span class="o">}</span>
        virtual_ipaddress <span class="o">{</span> 10.230.7.33/24 brd 10.230.7.255 dev eth0 <span class="o">}</span>

<span class="c"># Start keepalived on both hosts
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Execute os seguintes comandos em ambos os hosts:</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
/etc/init.d/keepalived start

<span class="c">## Test the floating IP
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Tente se conectar ao seu IP flutuante público:</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>ssh ubuntu@173.247.105.96 Welcome to Ubuntu 14.04.1 LTS <span class="o">(</span>GNU/Linux 3.13.0-36-generic x86_64<span class="o">)</span>

<span class="c">## Test failover
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Pare o primeiro balanceador de carga e confirme se ocorre failover com o IP.</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova stop loadbalancer01
<span class="gp">$ </span>ssh ubuntu@173.247.105.96
<span class="sb">```</span></code></pre></figure>

<p>Esta sequência de comandos deve apresentar a você um resultado <code class="highlighter-rouge">SSH key failure</code>, porque você está se conectando ao segundo host agora.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron subnet-update internal --dns_nameservers <span class="nv">list</span><span class="o">=</span><span class="nb">true </span>10.0.100.100
<span class="sb">```</span></code></pre></figure>

<p>Se o <strong>Active Directory</strong> não for implementado, é possível usar um servidor DNS público, como:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron subnet-update internal --dns_nameservers <span class="nv">list</span><span class="o">=</span><span class="nb">true </span>8.8.8.8
<span class="sb">```</span></code></pre></figure>


      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/tyying/help-documentation-staging-area/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/tyying/help-documentation-staging-area/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/tyying/help-documentation-staging-area/js/scripts.js"></script>

  </body>

</html>
