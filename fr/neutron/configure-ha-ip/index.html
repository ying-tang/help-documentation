<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Comment configurer une IP hautement disponible</title>
  <meta name="description" content="Le présent article décrit comment configurer des IP flottantes à haute disponibilité dans un environnement IBM Bluemix Private Cloud Local. Ces instructions ...">

  <link rel="stylesheet" href="/tyying/help-documentation-staging-area/css/main.css">
  <link rel="canonical" href="/tyying/help-documentation-staging-area/fr/neutron/configure-ha-ip/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/tyying/help-documentation-staging-area/fr/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/tyying/help-documentation-staging-area/fr/"><img src="/tyying/help-documentation-staging-area/img/fr/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/tyying/help-documentation-staging-area/img/fr/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/tyying/help-documentation-staging-area/img/fr/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /tyying/help-documentation-staging-area/neutron/configure-ha-ip/ ">en</a> |
    
      <a style="font-weight: bold;" href=" /tyying/help-documentation-staging-area/fr/neutron/configure-ha-ip/ ">fr</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/de/neutron/configure-ha-ip/ ">de</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/ja/neutron/configure-ha-ip/ ">ja</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_CN/neutron/configure-ha-ip/ ">zh_CN</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_TW/neutron/configure-ha-ip/ ">zh_TW</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/pt_BR/neutron/configure-ha-ip/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/gettingstarted">Getting Started (41)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/openvpn-setup/">Configuration du serveur OpenVPN sur votre instance</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/connect-to-openvpn-server/">Connexion à votre serveur OpenVPN</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_3.1.1_Point_Release/">Notas sobre a liberação do ponto 3.1.1 para cliente</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/blue-box-cloud-components/">Composants de Bluemix Private Cloud</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/detaching-volume/">Que faire avant de déconnecter un volume ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_3.1.0_Release_Notes/">Notas sobre a liberação 3.1.0</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_4.0.0.0r_Release_Notes/">Notas sobre a liberação 4.0.0.0r</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/python-environment-primer/">Introduction aux environnements virtuels Python pour les développeurs</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/FAQ/">Foire aux questions techniques</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/RHOSP_Product_Overview/">IBM Bluemix Private Cloud with Red Hat - Présentation du produit</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/RHOSP_Building_Blocks/">Blocs fonctionnels IBM Bluemix Private Cloud with Red Hat</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Building_Blocks/">Blocs fonctionnels IBM Bluemix Private Cloud (Community Edition)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/general_product_overview/">Présentation générale du produit</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Instance_Resize/">Redimensionnement d'une instance (hors ligne)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">Configuration de la connectivité réseau entre plusieurs environnements cloud à l'aide du réseau privé</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Windows_License_Activation/">Guide d'activation des licences Windows destiné aux clients</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 9 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/adding-removing-subscribers/">Ajout ou suppression d'abonnés dans un ticket</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/view-my-bill/">Comment visualiser ma facture ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/report-issue/">Comment signaler un problème ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/escalating-a-ticket/">Comment faire remonter un ticket ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/status-pages/">Pages de statut Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">Transfert d'un domaine à partir de Blue Box</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Box_Panel/">Guide d'utilisation de Box Panel</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel, contrôleur de site et IBM Bluemix Private Cloud Local</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/qemu_article/">Optimisation d'OpenStack — QEMU et votre cloud</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Improving_Cloud_Performance/">Optimisation d'OpenStack II -- Amélioration des performances de cloud</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Optimized_Load_Balancing/">Cloud 101 -- Optimisation de l'équilibrage de charge</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">Guide d'utilisation des images de cloud (IBM Bluemix Private Cloud with Red Hat)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">Guide d'utilisation des images de cloud (Community Edition)</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Image_Release_Notes/">Notes sur l'édition des images IBM Bluemix Private Cloud</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.0.1_Point_Release/">Notes sur l'édition 3.0.1 destinées aux clients</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.1.1_Point_Release/">Notes sur l'édition 3.1.1 destinées aux clients</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_4.0.0.0r_Release_Notes/">Notes sur l'édition 4.0.0.0r</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_2.1.1_Point_Release/">Notes sur l'édition 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/release_notes_2.1_for_customers/">Notes sur l'édition 2.1</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.0.0_Release_Notes/">Notes sur l'édition 3.0.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.1.0_Release_Notes/">Notes sur l'édition 3.1.0</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/libvirt_error/">Instance en statut d'erreur : erreur libvirt</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/ssh-too-long-error/">Pourquoi l'exécution du protocole SSH sur mon instance prend-elle entre 4 et 5 secondes ?</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/ping-instance-error/">Pourquoi ne puis-je pas exécuter le protocole SSH ou un ping sur une instance ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/nova-microversions-error/">Erreur : 'Server doesn't support microversions' lors de l'exécution de commandes Nova</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Bad_Availability_Zone/">Cloud Foundry : erreur de zone de disponibilité non valide</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/failed_to_create_router/">Echec d'une tentative de création d'un routeur</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/How_many_connections_can_HAProxy_handle/">Combien de connexions simultanées peuvent être gérées par HAProxy ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/CLI-authentication-error/">Lors de l'utilisation d'une interface CLI OpenStack sous Windows, j'obtiens des erreurs d'échec d'authentification</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/floating-ips-error/">Pourquoi toutes les IP flottantes qui m'ont été affectées ne sont-elles pas disponibles ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/horizon-delete-error/">Pourquoi ne puis-je pas supprimer mon projet/titulaire du tableau de bord Horizon ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/no-valid-host-error/">Erreur : No valid host was found</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Cannot_See_New_vCPUs/">Pourquoi mes nouvelles UC virtuelles ne sont-elles pas répertoriées dans Horizon ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/failure_prepping_block_device/">Erreur : Failure prepping block device</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/delete_security_group/">Pourquoi ne puis-je pas supprimer un groupe de sécurité ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Troubleshooting_FAQ/">Foire aux questions : traitement des incidents</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Unable_to_ping_tenant_network/">Pourquoi ne puis-je pas exécuter un ping sur mes réseaux titulaires ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Why_No_vIP_Failover_With_L2pop/">Pourquoi ne puis-je pas utiliser L2pop lorsque je souhaite procéder à la reprise en ligne de mes instances vIP ?</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/launch-instance-from-volume/">Comment lancer une instance à partir d'un volume</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/import-vhd-image-lvm/">Importation d'une image VHD qui utilise la gestion des volumes linux pour son répertoire racine</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/OpenStack_network_concepts/">Concepts OpenStack liés au réseau</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">Création d'une instance avec une IP fixe spécifique</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Mitaka_CLI_notes/">Remarques de l'interface CLI d'OpenStack Mitaka</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Why-Choose-OpenStack/">Pourquoi choisir OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/openstack-storage-concepts/">Concepts OpenStack liés au stockage</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Ursula_and_OpenStack/">Ursula et OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Creating_Instances_With_Static_IP/">Comment créer une instance avec une IP statique</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/quotas/">Quotas</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/How_to_Isolate_Tenants/">Comment isoler les titulaires (projets)</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/external-reference-material/">Références externes</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/floating-ip-address/">Création d'une adresse IP flottante à l'aide de l'API OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/openstack-api-getting-started/">Initiation à l'API OpenStack</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/OpenStack_Client_Versions/">Configuration requise pour les versions du client OpenStack</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/creating-additional-networks-with-horizon/">Création de réseaux supplémentaires dans OpenStack à l'aide du panneau Horizon</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/Making_Snapshots_in_Horizon/">Utilisation d'Horizon pour les images instantanées</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/allocate-floating-ip/">Allocation et connexion d'une IP (flottante) publique à une instance</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/create-volume-from-horizon/">Création d'un volume à partir du tableau de bord Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/horizon-for-administrators/">Horizon pour les administrateurs</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/launch-instance-from-horizon/">Démarrage d'une instance à partir du tableau de bord Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/launch-instance-from-horizon_newton/">Démarrage d'une instance à partir du tableau de bord Horizon (édition Newton d'OpenStack)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/set-reverse-dns/">Comment définir un enregistrement de résolution inversée des noms de domaine (PTR) pour une instance d'IBM Bluemix Private Cloud ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/using-horizon/">Utilisation d'Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/Horizon_troubleshooting_FAQ/">Foire aux questions : traitement des incidents liés à Horizon</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/windows-user-and-password/">Comment définir un nom d'utilisateur et un mot de passe initiaux sur une instance Windows dans OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/CLI-create-public-instance/">Comment créer une instance et la rendre publique à l'aide de la ligne de commande</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Nova_boot_speed/">Que se passe-t-il en arrière-plan lorsque j'amorce une machine virtuelle et comment accélérer son amorçage ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Restrict_Floating_IP/">Comment restreindre les IP flottantes ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/config_drive_for_instances/">Puis-je créer une instance et y ajouter des fichiers à l'aide de ConfigDrive ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/create-vm-with-volumes/">Comment créer une instance à l'aide du client de ligne de commande Nova ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/define-flavor-vcpu/">Comment définir la topologie d'UC virtuelle d'une version ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/maximum-flavor-spec/">Quelle spécification maximale puis-je définir pour une version ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/migrate-instance/">Migration d'une instance vers un nouveau cloud</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Metadata_service_FAQ/">Service de métadonnées dans OpenStack Neutron et Nova</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/hypervisor-statistics/">Comment obtenir les statistiques de l'hyperviseur ?</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/network_ip_availability/">Comment vérifier la disponibilité de mon IP réseau ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">Comment isoler les réseaux d'un projet connectés à un routeur partagé ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/time-ip-associated-with-instance/">Comment trouver l'heure à laquelle une IP flottante a été associée ou dissociée d'une instance ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Load_Balancing_Methods/">Méthodes d'équilibrage de charge</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Multi-tier_Router_Configuration/">Configuration du routeur multiniveau dans IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/set-up-dns-records/">Comment configurer des enregistrements DNS qui pointent vers des instances d'OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/routing_internal_traffic_between_projects/">Routage du trafic interne entre les projets</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/add-ip-to-instance/">Ajout d'une IP privée fixe spécifique à une instance</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/configure-dns.for-instances/">Configuration du serveur de noms de domaine pour les instances</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/configure-multi-nics/">Configuration de plusieurs interfaces réseau pour vos propres images de cloud</a>
          </li>
          
        
          
            
            <li>
                <a class="page-link--active"  href="/tyying/help-documentation-staging-area/fr/neutron/configure-ha-ip/">Comment configurer une IP hautement disponible</a>
            </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/creating-virtual-networks/">Création de réseaux virtuels sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/How_Can_I_See_My_IPs/">Comment afficher mes IP ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/How_to_update_DNS/">Comment mettre à jour le serveur de noms de domaine ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/vpn-vlan-directlink/">Réseau privé virtuel, réseau local virtuel et Direct Link</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/BYOFIP_support/">Using BYOFIP Connectivity Between IBM Bluemix Private Cloud and a Customer Site</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Intro_to_LBaaS/">Introduction à LBaaS (équilibreur de charge sous forme de service)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Security_groups_CLI/">Utilisation de l'interface CLI pour configurer les groupes de sécurité</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Network_Use_Cases_White_Paper/">Scénarios d'utilisation du réseau IBM Blue Box</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Where_Are_These_IPs/">Où se trouvent les deux premières IP ?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/FAQ_Working_with_Windows_Images/">Foire aux questions : utilisation des images Windows</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/compatible-glance-images/">Existe-t-il une liste des images compatibles avec OpenStack officielles que je peux télécharger pour une utilisation avec Glance ? (CentOS, Ubuntu, etc.)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/disk-capacity-constraints/">Contraintes de capacité disque</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/Image_Properties_on_Power/">Paramètres optimum pour les images Glance sur les noeuds de calcul Power</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/imagesnapshot/">Différence entre une image et une image instantanée</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/read-only-cinder-error/">Pourquoi certains volumes Cinder sont-ils montés en lecture seule et comment résoudre ce problème ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cinder-volume-stuck/">Volume Cinder bloqué</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/alternative_method_for_volume_encryption/">Méthode alternative de chiffrement d'un volume de stockage par blocs (à l'aide d'une machine virtuelle invitée Ubuntu)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Bug_Creating_Encrypted_Volumes/">La création de volumes chiffrés avec Cinder n'est pas prise en charge</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Managing_block_storage/">Gestion du stockage par blocs</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cli-create-volume/">Création d'un volume avec la ligne de commande</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/create-volume-from-snapshot/">La création d'un volume à partir d'une image instantanée d'instance est-elle prise en charge ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/resize_cinder_volume/">Comment redimensionner un volume Cinder ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/supported_volume_types/">Quels sont les types de volume Cinder pris en charge dans une instance cloud ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Ephemeral_to_Cinder/">Comment basculer du disque éphémère au stockage Cinder</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Force_snapshot_on_attached_volume/">Comment imposer l'appel d'image instantanée sur un volume connecté</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cinder-failed-connection-error/">Que faire si le client Cinder renvoie le message "ERROR: Unable to establish connection" et ne parvient pas à se connecter ?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/oidc-federation/">Fédération OpenID Connect sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/saml-federation/">Fédération Keystone SAML sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/RBAC_Definitions/">Contrôle d'accès basé sur les rôles</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/Managing_Users_and_Projects/">Gestion des utilisateurs et des projets</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/k2k-federation/">Fédération Keystone to Keystone (K2K) sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/tenants-security-groups-keystone/">Projets et groupes de sécurité</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/custom-domains-keystone/">Domaines personnalisés dans Keystone V3</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/Getting_Started_with_K2K_Identity/">Initiation à Keystone Federated Identity</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/Getting_Started_With_Heat/">Initiation aux modèles Heat</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/autoscaling-with-heat/">Utilisation de Heat pour la mise à l'échelle automatique</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/Deploying_apps_with_UCD/">Déploiement d'applications avec IBM UrbanCode Deploy et IBM Bluemix Private Cloud</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using_heat_for_load_balancer/">Utilisation de Heat pour mettre les serveurs à disposition avec un équilibreur de charge</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using-ucd-ucdp/">Utilisation d'IBM Urban Code Deploy avec IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using_heat_for_deployment/">Utilisation de Heat avec un certificat autosigné</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/ceilometer/compatible-glance-images/">La création d'un volume à partir d'une image instantanée d'instance est-elle prise en charge ?</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        Comment configurer une IP hautement disponible

        
        </h1>




        
        <div class="post-data">
          <img src='/tyying/help-documentation-staging-area/img/fr/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Eric French </span>
              <span class="dot">&#9679;</span>
              <span class="date"> 21 septembre 2016</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>neutron</p></li>
                  
                    <li class="tag"><p>neutron(neutron)</p></li>
                  
                    <li class="tag"><p>configuring ip(configuration d'IP)</p></li>
                  
                    <li class="tag"><p>ha(hd)</p></li>
                  
                    <li class="tag"><p>highly available(hautement disponible)</p></li>
                  
                    <li class="tag"><p>allowed address pairs(paires d'adresses autorisées)</p></li>
                  
                    <li class="tag"><p>l2 pop(l2 pop)</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <p>Le présent article décrit comment configurer des IP flottantes à haute disponibilité dans un environnement <strong>IBM Bluemix Private Cloud Local</strong>. Ces instructions supposent que les <a href="/tyying/help-documentation-staging-area/fr/openstack/api/openstack-api-getting-started/"><strong>clients d’API Python OpenStack</strong></a> sont déjà installés.</p>

<p>REMARQUE : cette fonctionnalité fonctionne UNIQUEMENT avec IBM Bluemix Private Cloud Local. Elle ne s’applique pas à l’offre IBM Bluemix Private Cloud (Dedicated Cloud). Le réseau du centre de données IBM Bluemix nécessite actuellement d’utiliser L2 POP, un pilote conçu pour prendre en charge la mise à l’échelle vers les réseaux de plus grande taille. Pour citer l’un de nos ingénieurs :</p>

<p>“Le pilote L2Population à utiliser pour que VXLAN fonctionne sur les réseaux du centre de données IBM Bluemix est incompatible avec l’apprentissage MAC ou les réponses ARP utilisés par les méthodes d’IP à haute disponibilité. Les IP sont mappées aux hôtes par le biais de deux mécanismes de conversion : ARP mappe les IP aux adresses MAC et bascule l’apprentissage auquel MAC est associé avec chaque port. Lors de la reprise, toute IP à haute disponibilité doit modifier au moins l’un de ces deux mappages.”</p>

<p>Dans l’édition Mitaka d’OpenStack, l’une des solutions palliatives consiste à désactiver la moitié du programme de réponse L2 POP, qui pourrait vous permettre de configurer le type de haute disponibilité du protocole de résolution d’adresse gratuit. (Voir cet article : https://review.openstack.org/278597) Si vous avez vraiment besoin de la haute disponibilité, il est recommandé d’utiliser un équilibreur de charge dans ce but, comme Neutron LBaaS v2 par exemple. Autre solution palliative possible, si votre cloud est déployé dans une capsule SoftLayer unique et qu’il ne s’étendra jamais au-delà de cette capsule, vous pourriez éventuellement implémenter un type d’IP haute disponibilité en mode personnalisé.</p>

<p><strong>Configuration de vos instances OpenStack</strong></p>

<p>La procédure OpenStack se divise en deux parties. La première partie nécessite des données d’identification administratives pour configurer les zones de disponibilité. La seconde partie peut être effectuée par un utilisateur standard. La première partie ne doit être réalisée qu’une seule fois.</p>

<h3 id="partie-1--étapes-dadministration">Partie 1 : étapes d’administration</h3>

<p><strong>Configuration des zones de disponibilité</strong></p>

<p>Les zones de disponibilité permettent de créer un pool de ressources afin de garantir que nos deux machines virtuelles uniques ne soient pas hébergées sur les mêmes hôtes physiques.</p>

<p>En tant qu’administrateur, créez deux zones de disponibilité distinctes :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova aggregate-create group1 group1-az
+----+--------+-------------------+-------+-------------------------------+
| Id | Name   | Availability Zone | Hosts | Metadata                      |
+----+--------+-------------------+-------+-------------------------------+
| 8  | group1 | group1-az         |       | <span class="s1">'availability_zone=group1-az'</span> |
+----+--------+-------------------+-------+-------------------------------+
<span class="gp">$ </span>nova aggregate-create group2 group2-az
+----+--------+-------------------+-------+-------------------------------+
| Id | Name   | Availability Zone | Hosts | Metadata                      |
+----+--------+-------------------+-------+-------------------------------+
| 11 | group2 | group2-az         |       | <span class="s1">'availability_zone=group2-az'</span> |
+----+--------+-------------------+-------+-------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>Affichez les informations de vos zones de disponibilité pour obtenir des détails sur vos hyperviseurs :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova availability-zone-list
+-----------------------+----------------------------------------+
| Name                  | Status                                 |
+-----------------------+----------------------------------------+
| internal              | available                              |
| |- ds1263             |                                        |
| | |- nova-conductor   | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-cert        | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-consoleauth | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-scheduler   | enabled :-<span class="o">)</span> 2014-12-03T00:07:27.000000 |
| |- ds1264             |                                        |
| | |- nova-conductor   | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| | |- nova-cert        | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| | |- nova-consoleauth | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| | |- nova-scheduler   | enabled :-<span class="o">)</span> 2014-12-03T00:07:30.000000 |
| group1-az             | available                              |
| |- ds1263             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| group2-az             | available                              |
| |- ds1264             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:33.000000 |
| nova                  | available                              |
| |- ds1265             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
| |- ds1266             |                                        |
| | |- nova-compute     | enabled :-<span class="o">)</span> 2014-12-03T00:07:32.000000 |
+-----------------------+----------------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>Dans la liste qui s’affiche, sélectionnez les hôtes et ajoutez-les à vos deux zones de disponibilité distinctes :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova aggregate-add-host 8 ds1263
Host ds1263 has been successfully added <span class="k">for </span>aggregate 8
+----+--------+-------------------+----------+-------------------------------+
| Id | Name   | Availability Zone | Hosts    | Metadata                      |
+----+--------+-------------------+----------+-------------------------------+
| 8  | group1 | group1-az         | <span class="s1">'ds1263'</span> | <span class="s1">'availability_zone=group1-az'</span> |
+----+--------+-------------------+----------+-------------------------------+
<span class="gp">$ </span>nova aggregate-add-host 11 ds1264
Host ds1264 has been successfully added <span class="k">for </span>aggregate 11
+----+--------+-------------------+----------+-------------------------------+
| Id | Name   | Availability Zone | Hosts    | Metadata                      |
+----+--------+-------------------+----------+-------------------------------+
| 11 | group2 | group2-az         | <span class="s1">'ds1264'</span> | <span class="s1">'availability_zone=group2-az'</span> |
+----+--------+-------------------+----------+-------------------------------+
<span class="sb">```</span></code></pre></figure>

<p>Et voilà !</p>

<h3 id="partie-2--étapes-nécessitant-uniquement-des-droits-standard">Partie 2 : étapes nécessitant uniquement des droits standard</h3>

<ul>
  <li>Confirmez que l’extension <code class="highlighter-rouge">allowed-address-pairs</code> est chargée.</li>
</ul>

<p>L’extension <code class="highlighter-rouge">allowed-address-pairs</code> est requise ; elle est fournie par défaut avec chaque installation d’<strong>IBM Bluemix Private Cloud</strong>. Vous pouvez confirmer son fonctionnement en exécutant les commandes suivantes :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron ext-list | grep allowed-address-pairs
| allowed-address-pairs | Allowed Address Pairs
|
<span class="sb">```</span></code></pre></figure>

<p><strong>Remarque :</strong> <code class="highlighter-rouge">allowed_address_pairs</code> ne peut pas être activé et la sécurité du port ne peut pas être désactivée sur le MEME port Neutron, car ils s’excluent mutuellement.</p>

<ul>
  <li>Créez un groupe de sécurité VRRP.</li>
</ul>

<p>Ce groupe de sécurité permet de communiquer avec vos noeuds à haute disponibilité. Dans l’exemple ci-dessous, l’accès <code class="highlighter-rouge">SSH</code> est autorisé, mais vous pouvez redéfinir le protocole sur <code class="highlighter-rouge">HTTP</code>, <code class="highlighter-rouge">HTTPS</code>, etc…</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron security-group-create vrrp
Created a new security_group:
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field                | Value                                                                                                                                                                                                                                                                                                                         |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| description          |                                                                                                                                                                                                                                                                                                                               |
| id                   | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1                                                                                                                                                                                                                                                                                          |
| name                 | vrrp                                                                                                                                                                                                                                                                                                                      |
| security_group_rules | <span class="o">{</span><span class="s2">"remote_group_id"</span>: null, <span class="s2">"direction"</span>: <span class="s2">"egress"</span>, <span class="s2">"remote_ip_prefix"</span>: null, <span class="s2">"protocol"</span>: null, <span class="s2">"tenant_id"</span>: <span class="s2">"0109935df2314105bf7ba85a79a1c001"</span>, <span class="s2">"port_range_max"</span>: null, <span class="s2">"security_group_id"</span>: <span class="s2">"7f09ac66-23e2-46cd-9af8-ca541dd99bc1"</span>, <span class="s2">"port_range_min"</span>: null, <span class="s2">"ethertype"</span>: <span class="s2">"IPv4"</span>, <span class="s2">"id"</span>: <span class="s2">"28236695-9cb4-4a0c-a04d-9d230fcdce4a"</span><span class="o">}</span> |
|                      | <span class="o">{</span><span class="s2">"remote_group_id"</span>: null, <span class="s2">"direction"</span>: <span class="s2">"egress"</span>, <span class="s2">"remote_ip_prefix"</span>: null, <span class="s2">"protocol"</span>: null, <span class="s2">"tenant_id"</span>: <span class="s2">"0109935df2314105bf7ba85a79a1c001"</span>, <span class="s2">"port_range_max"</span>: null, <span class="s2">"security_group_id"</span>: <span class="s2">"7f09ac66-23e2-46cd-9af8-ca541dd99bc1"</span>, <span class="s2">"port_range_min"</span>: null, <span class="s2">"ethertype"</span>: <span class="s2">"IPv6"</span>, <span class="s2">"id"</span>: <span class="s2">"a8180e54-6ae6-44e7-9da8-baeec24dbe6f"</span><span class="o">}</span> |
| tenant_id            | 0109935df2314105bf7ba85a79a1c001                                                                                                                                                                                                                                                                                              |
+----------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Ajoutez un accès <code class="highlighter-rouge">ICMP</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span><span class="nv">$ </span>neutron security-group-rule-create --protocol icmp vrrp
Created a new security_group_rule:
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| id                | f795c776-2e8c-4234-9f9c-cff5bd4398fc |
| port_range_max    |                                      |
| port_range_min    |                                      |
| protocol          | icmp                                 |
| remote_group_id   |                                      |
| remote_ip_prefix  |                                      |
| security_group_id | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 |
| tenant_id         | 0109935df2314105bf7ba85a79a1c001     |
+-------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Ajoutez un accès <code class="highlighter-rouge">SSH</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron security-group-rule-create --protocol tcp --port-range-min 22 --port-range-max 22 vrrp
Created a new security_group_rule:
+-------------------+--------------------------------------+
| Field             | Value                                |
+-------------------+--------------------------------------+
| direction         | ingress                              |
| ethertype         | IPv4                                 |
| id                | 41c996f5-1e7b-4061-87ff-8dba581eda7c |
| port_range_max    | 22                                   |
| port_range_min    | 22                                   |
| protocol          | tcp                                  |
| remote_group_id   |                                      |
| remote_ip_prefix  |                                      |
| security_group_id | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 |
| tenant_id         | 0109935df2314105bf7ba85a79a1c001     |
+-------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Collectez les paramètres requis pour initialiser les instances.</li>
</ul>

<p>Vous devrez collecter certaines informations pour garantir que nos équilibreurs de charge haute disponibilité sont mis à disposition avec le système d’exploitation souhaité et qu’ils deviennent des hyperviseurs physiques uniques.</p>

<ul>
  <li>Sélectionnez un ID version. Pour cet exemple, <code class="highlighter-rouge">m1.medium</code> est utilisé avec l’ID <code class="highlighter-rouge">3</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova flavor-list
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
| ID | Name      | Memory_MB | Disk | Ephemeral | Swap_MB | VCPUs | RXTX_Factor | Is_Public |
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
| 1  | m1.tiny   | 512       | 10   | 0         |         | 1     | 1.0         | True      |
| 2  | m1.small  | 2048      | 20   | 0         |         | 1     | 1.0         | True      |
| 3  | m1.medium | 4096      | 40   | 0         |         | 2     | 1.0         | True      |
| 4  | m1.large  | 8192      | 80   | 0         |         | 4     | 1.0         | True      |
| 5  | m1.xlarge | 16384     | 160  | 0         |         | 8     | 1.0         | True      |
+----+-----------+-----------+------+-----------+---------+-------+-------------+-----------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Sélectionnez l’ID de l’image en question. Pour cet exemple, nous avons sélectionné <code class="highlighter-rouge">ubuntu-14.04</code> avec l’ID <code class="highlighter-rouge">1525c3f3-1224-4958-bd07-da9feaedf18b</code>:</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova image-list | grep  ubuntu-14.04
+--------------------------------------+---------------------------------+--------+--------+
| ID                                   | Name                            | Status | Server |
+--------------------------------------+---------------------------------+--------+--------+
| 1525c3f3-1224-4958-bd07-da9feaedf18b | ubuntu-14.04                    | ACTIVE |        |
+--------------------------------------+---------------------------------+--------+--------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Collectez l’ID du réseau interne. Pour cet exemple, il s’agit de <code class="highlighter-rouge">ba0fdd03-72b5-41eb-bb67-fef437fd6cb4</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova network-list
+--------------------------------------+----------+------+
| ID                                   | Label    | Cidr |
+--------------------------------------+----------+------+
| 06dc9d5a-f55a-410d-a7fd-4c7cb34ad927 | external | -    |
| ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 | internal | -    |
+--------------------------------------+----------+------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Sélectionnez les ID des groupes <code class="highlighter-rouge">default</code> et <code class="highlighter-rouge">VRRP</code>. Pour cet exemple, il s’agit de <code class="highlighter-rouge">a963c698-473c-4182-8add-e1e6398629e5</code> et <code class="highlighter-rouge">7f09ac66-23e2-46cd-9af8-ca541dd99bc1</code> :</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova secgroup-list
+--------------------------------------+----------+-------------+
| Id                                   | Name     | Description |
+--------------------------------------+----------+-------------+
| a963c698-473c-4182-8add-e1e6398629e5 | default  | default     |
| 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 | vrrp |             |
+--------------------------------------+----------+-------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Sélectionnez les deux zones de disponibilité uniques créées précédemment. Pour cet exemple, il s’agit de <code class="highlighter-rouge">group1-az</code> et <code class="highlighter-rouge">group2-az</code>.</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova availability-zone-list
+-----------+-----------+
| Name      | Status    |
+-----------+-----------+
| group1-az | available |
| group2-az | available |
| nova      | available |
+-----------+-----------+
<span class="nv">$
</span>
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Initialisez les deux instances uniques sur deux hôtes uniques.</li>
</ul>

<p>Voici un récapitulatif des valeurs collectées jusqu’ici :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
flavor: 3
image: 1525c3f3-1224-4958-bd07-da9feaedf18b
availability-zone: group1-az, group2-az
security groups: b3ccd3e2-6566-40ba-8469-9919a44c0eaf, 1409d05d-7b34-4f77-8ae0-8c49c6be37a2
network id: ba0fdd03-72b5-41eb-bb67-fef437fd6cb4
<span class="sb">```</span></code></pre></figure>

<p>Initialisez vos deux machines virtuelles à l’aide de ces variables.</p>

<p><strong>Remarques supplémentaires :</strong></p>

<p>Vous devrez spécifier le <code class="highlighter-rouge">key-name</code> de la clé <code class="highlighter-rouge">SSH</code> utilisée dans le système. Par exemple :</p>

<p><strong>Hôte 1</strong> :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova boot <span class="se">\
</span>
--key-name default <span class="se">\
</span>
--flavor 3 <span class="se">\
</span>
--image 1525c3f3-1224-4958-bd07-da9feaedf18b <span class="se">\
</span>
--availability-zone group1-az <span class="se">\
</span>
--security-groups a963c698-473c-4182-8add-e1e6398629e5,7f09ac66-23e2-46cd-9af8-ca541dd99bc1 <span class="se">\
</span>
--nic net-id<span class="o">=</span>ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 <span class="se">\
</span>
loadbalancer01
<span class="sb">```</span></code></pre></figure>

<p><strong>Hôte 2</strong> : (vous remarquerez que la zone de disponibilité et le nom d’hôte ont été modifiés.)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova boot <span class="se">\
</span>
--key-name default <span class="se">\
</span>
--flavor 3 <span class="se">\
</span>
--image 1525c3f3-1224-4958-bd07-da9feaedf18b <span class="se">\
</span>
--availability-zone group2-az <span class="se">\
</span>
--security-groups a963c698-473c-4182-8add-e1e6398629e5,7f09ac66-23e2-46cd-9af8-ca541dd99bc1 <span class="se">\
</span>
--nic net-id<span class="o">=</span>ba0fdd03-72b5-41eb-bb67-fef437fd6cb4 <span class="se">\
</span>
loadbalancer02
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Collectez les données d’instance.</li>
</ul>

<p>A présent que vos deux instances sont initialisées, vous pouvez collecter les données d’instance.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova list
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| ID                                   | Name           | Status | Task State | Power State | Networks              |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| 9d64868e-55ae-4b40-b2fa-70a65b0e88e8 | loadbalancer01 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.183 |
| 0394331a-f2ce-480a-9a93-2a50207ef7ee | loadbalancer02 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.184 |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Créez un port.</li>
</ul>

<p><strong>REMARQUE</strong> : cette action nécessite des données d’identification administratives mais peut être exécutée pour ajouter le port à un titulaire spécifique. Pour que ce port soit ajouté à un titulaire, utilisez le paramètre <code class="highlighter-rouge">--tenant-id</code>.</p>

<p>Pensez à prendre note de l’adresse IP et de l’ID port renvoyé. Pour cet exemple, il s’agit de <code class="highlighter-rouge">10.230.7.33</code> et <code class="highlighter-rouge">6bed4a2a-62e6-4cb1-80ce-b5971fee782d</code>.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron port-create --security-group 7f09ac66-23e2-46cd-9af8-ca541dd99bc1 internal
Created a new port:
+-----------------------+------------------------------------------------------------------------------------+
| Field                 | Value                                                                              |
+-----------------------+------------------------------------------------------------------------------------+
| admin_state_up        | True                                                                               |
| allowed_address_pairs |                                                                                    |
| binding:capabilities  | <span class="o">{</span><span class="s2">"port_filter"</span>: <span class="nb">true</span><span class="o">}</span>                                                              |
| binding:host_id       |                                                                                    |
| binding:vif_type      | ovs                                                                                |
| device_id             |                                                                                    |
| device_owner          |                                                                                    |
| fixed_ips             | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.33"</span><span class="o">}</span> |
| id                    | 6bed4a2a-62e6-4cb1-80ce-b5971fee782d                                               |
| mac_address           | fa:16:3e:20:c6:e3                                                                  |
| name                  |                                                                                    |
| network_id            | ba0fdd03-72b5-41eb-bb67-fef437fd6cb4                                               |
| security_groups       | 7f09ac66-23e2-46cd-9af8-ca541dd99bc1                                               |
| status                | DOWN                                                                               |
| tenant_id             | 0109935df2314105bf7ba85a79a1c001                                                   |
+-----------------------+------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>S’il s’agit d’un service public, associez une IP flottante à l’IP virtuelle.</li>
</ul>

<p>A l’aide du <code class="highlighter-rouge">port-id</code> obtenu à l’étape précédente, vous pouvez maintenant associer l’IP flottante à l’IP virtuelle :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron floatingip-create --port-id<span class="o">=</span>6bed4a2a-62e6-4cb1-80ce-b5971fee782d external
Created a new floatingip:
+---------------------+--------------------------------------+
| Field               | Value                                |
+---------------------+--------------------------------------+
| fixed_ip_address    | 10.230.7.33                          |
| floating_ip_address | 173.247.105.96                       |
| floating_network_id | 06dc9d5a-f55a-410d-a7fd-4c7cb34ad927 |
| id                  | 753b3d69-73e4-4396-a98c-df1afdc6c2bf |
| port_id             | 6bed4a2a-62e6-4cb1-80ce-b5971fee782d |
| router_id           | 7e027195-f474-41d7-b15b-9042eb396735 |
| tenant_id           | 0109935df2314105bf7ba85a79a1c001     |
+---------------------+--------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Déterminez les ID port de vos instances d’équilibreur de charge.</li>
</ul>

<p>Utilisez les adresses IP pour mapper les instances à leurs ports.</p>

<p>Pour cet exemple :</p>

<p><code class="highlighter-rouge">loadbalancer01</code> -&gt; ID port : <code class="highlighter-rouge">23604992-c26c-426d-9634-f45d24b9ee83</code></p>

<p><code class="highlighter-rouge">loadbalancer02</code> -&gt; ID port : <code class="highlighter-rouge">9f646d79-0599-4761-a4b3-cb9728bbb72a</code></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova list
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| ID                                   | Name           | Status | Task State | Power State | Networks              |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
| 9d64868e-55ae-4b40-b2fa-70a65b0e88e8 | loadbalancer01 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.183 |
| 0394331a-f2ce-480a-9a93-2a50207ef7ee | loadbalancer02 | ACTIVE | -          | Running     | <span class="nv">internal</span><span class="o">=</span>10.230.7.184 |
+--------------------------------------+----------------+--------+------------+-------------+-----------------------+
<span class="gp">$ </span>neutron port-list
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
| id                                   | name | mac_address       | fixed_ips                                                                           |
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
| 23604992-c26c-426d-9634-f45d24b9ee83 |      | fa:16:3e:4d:89:4d | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.183"</span><span class="o">}</span> |
| 6bed4a2a-62e6-4cb1-80ce-b5971fee782d |      | fa:16:3e:20:c6:e3 | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.33"</span><span class="o">}</span>  |
| 9f646d79-0599-4761-a4b3-cb9728bbb72a |      | fa:16:3e:8d:0e:13 | <span class="o">{</span><span class="s2">"subnet_id"</span>: <span class="s2">"8fb66dc4-d9f8-47eb-9679-85d7672ad37e"</span>, <span class="s2">"ip_address"</span>: <span class="s2">"10.230.7.184"</span><span class="o">}</span> |
+--------------------------------------+------+-------------------+-------------------------------------------------------------------------------------+
<span class="sb">```</span></code></pre></figure>

<ul>
  <li>Ajoutez la nouvelle IP virtuelle aux paires d’adresses autorisées pour les ports d’instance</li>
</ul>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron port-update 23604992-c26c-426d-9634-f45d24b9ee83 --allowed_address_pairs <span class="nv">list</span><span class="o">=</span><span class="nb">true type</span><span class="o">=</span>dict <span class="nv">ip_address</span><span class="o">=</span>10.230.7.33
Updated port: 23604992-c26c-426d-9634-f45d24b9ee83
<span class="gp">$ </span>neutron port-update 9f646d79-0599-4761-a4b3-cb9728bbb72a --allowed_address_pairs <span class="nv">list</span><span class="o">=</span><span class="nb">true type</span><span class="o">=</span>dict <span class="nv">ip_address</span><span class="o">=</span>10.230.7.33
Updated port: 9f646d79-0599-4761-a4b3-cb9728bbb72a
<span class="sb">```</span></code></pre></figure>

<p><strong>Keepalived</strong></p>

<p>Passons à la partie <code class="highlighter-rouge">keepalived</code> de cette procédure, présentée en partie dans le code exemple qui suit.</p>

<h2 id="installation-de-keepalived">Installation de keepalived</h2>

<p>Installez <code class="highlighter-rouge">keepalived</code> sur vos deux hôtes :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>apt-get install keepalived
<span class="sb">```</span></code></pre></figure>

<h2 id="configuration-de-keepalived-sur-les-deux-hôtes">Configuration de keepalived sur les deux hôtes</h2>

<p><strong>Remarque</strong> : <em>définissez le mot de passe sur une chaîne unique.</em></p>

<p>L’IP contenue dans l’adresse IP virtuelle doit être l’<strong>Hôte 1</strong> de votre IP virtuelle :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
vrrp_instance vrrp_group_1 <span class="o">{</span> state MASTER interface eth0 virtual_router_id 1 priority 100 authentication
    <span class="o">{</span> auth_type PASS auth_pass 9B1D715906B57DF2D78B8D3F02634271CDCC2A51826293FB8E893E21244F7242 <span class="o">}</span>
        virtual_ipaddress <span class="o">{</span> 10.230.7.33/24 brd 10.230.7.255 dev eth0 <span class="o">}</span> <span class="o">}</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Hôte 2</strong> :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
vrrp_instance vrrp_group_1 <span class="o">{</span> state BACKUP interface eth0 virtual_router_id 1 priority 50 authentication
    <span class="o">{</span> auth_type PASS auth_pass 9B1D715906B57DF2D78B8D3F02634271CDCC2A51826293FB8E893E21244F7242 <span class="o">}</span>
        virtual_ipaddress <span class="o">{</span> 10.230.7.33/24 brd 10.230.7.255 dev eth0 <span class="o">}</span>

<span class="c"># Start keepalived on both hosts
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Exécutez les commandes suivantes sur les deux hôtes :</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
/etc/init.d/keepalived start

<span class="c">## Test the floating IP
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Essayez de vous connecter à votre IP flottante publique :</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>ssh ubuntu@173.247.105.96 Welcome to Ubuntu 14.04.1 LTS <span class="o">(</span>GNU/Linux 3.13.0-36-generic x86_64<span class="o">)</span>

<span class="c">## Test failover
</span>
<span class="sb">```</span></code></pre></figure>

<p><strong>Arrêtez le premier équilibreur de charge et confirmez le basculement de l’IP.</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>nova stop loadbalancer01
<span class="gp">$ </span>ssh ubuntu@173.247.105.96
<span class="sb">```</span></code></pre></figure>

<p>Cette séquence de commandes devrait générer le résultat <code class="highlighter-rouge">SSH key failure</code> car vous vous connectez maintenant au second hôte.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron subnet-update internal --dns_nameservers <span class="nv">list</span><span class="o">=</span><span class="nb">true </span>10.0.100.100
<span class="sb">```</span></code></pre></figure>

<p>Si <strong>Active Directory</strong> n’est pas déployé, vous pouvez utiliser un serveur DNS public, tel que :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="sb">```</span>
<span class="gp">$ </span>neutron subnet-update internal --dns_nameservers <span class="nv">list</span><span class="o">=</span><span class="nb">true </span>8.8.8.8
<span class="sb">```</span></code></pre></figure>


      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/tyying/help-documentation-staging-area/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/tyying/help-documentation-staging-area/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/tyying/help-documentation-staging-area/js/scripts.js"></script>

  </body>

</html>
