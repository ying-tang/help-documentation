<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Fédération Keystone to Keystone (K2K) sur IBM Bluemix Private Cloud</title>
  <meta name="description" content="  Définition de la fédération K2K  Gestion des groupes  Gestion des mappages  Utilisation d’Horizon  Utilisation des bibliothèques d’API Python  Mappages et ...">

  <link rel="stylesheet" href="/tyying/help-documentation-staging-area/css/main.css">
  <link rel="canonical" href="/tyying/help-documentation-staging-area/fr/keystone/k2k-federation/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/tyying/help-documentation-staging-area/fr/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/tyying/help-documentation-staging-area/fr/"><img src="/tyying/help-documentation-staging-area/img/fr/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/tyying/help-documentation-staging-area/img/fr/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/tyying/help-documentation-staging-area/img/fr/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /tyying/help-documentation-staging-area/keystone/k2k-federation/ ">en</a> |
    
      <a style="font-weight: bold;" href=" /tyying/help-documentation-staging-area/fr/keystone/k2k-federation/ ">fr</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/de/keystone/k2k-federation/ ">de</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/ja/keystone/k2k-federation/ ">ja</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_CN/keystone/k2k-federation/ ">zh_CN</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/zh_TW/keystone/k2k-federation/ ">zh_TW</a> |
    
      <a  href=" /tyying/help-documentation-staging-area/pt_BR/keystone/k2k-federation/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/gettingstarted">Getting Started (41)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/openvpn-setup/">Configuration du serveur OpenVPN sur votre instance</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/connect-to-openvpn-server/">Connexion à votre serveur OpenVPN</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_3.1.1_Point_Release/">Notas sobre a liberação do ponto 3.1.1 para cliente</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/blue-box-cloud-components/">Composants de Bluemix Private Cloud</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/detaching-volume/">Que faire avant de déconnecter un volume ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_3.1.0_Release_Notes/">Notas sobre a liberação 3.1.0</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Customer_4.0.0.0r_Release_Notes/">Notas sobre a liberação 4.0.0.0r</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/python-environment-primer/">Introduction aux environnements virtuels Python pour les développeurs</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/FAQ/">Foire aux questions techniques</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/RHOSP_Product_Overview/">IBM Bluemix Private Cloud with Red Hat - Présentation du produit</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/RHOSP_Building_Blocks/">Blocs fonctionnels IBM Bluemix Private Cloud with Red Hat</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Building_Blocks/">Blocs fonctionnels IBM Bluemix Private Cloud (Community Edition)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/general_product_overview/">Présentation générale du produit</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Instance_Resize/">Redimensionnement d'une instance (hors ligne)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">Configuration de la connectivité réseau entre plusieurs environnements cloud à l'aide du réseau privé</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commontech/Windows_License_Activation/">Guide d'activation des licences Windows destiné aux clients</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 9 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/adding-removing-subscribers/">Ajout ou suppression d'abonnés dans un ticket</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/view-my-bill/">Comment visualiser ma facture ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/report-issue/">Comment signaler un problème ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/escalating-a-ticket/">Comment faire remonter un ticket ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/status-pages/">Pages de statut Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">Transfert d'un domaine à partir de Blue Box</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Box_Panel/">Guide d'utilisation de Box Panel</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel, contrôleur de site et IBM Bluemix Private Cloud Local</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/qemu_article/">Optimisation d'OpenStack — QEMU et votre cloud</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Improving_Cloud_Performance/">Optimisation d'OpenStack II -- Amélioration des performances de cloud</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Optimized_Load_Balancing/">Cloud 101 -- Optimisation de l'équilibrage de charge</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">Guide d'utilisation des images de cloud (IBM Bluemix Private Cloud with Red Hat)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">Guide d'utilisation des images de cloud (Community Edition)</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/gettingstarted/userguides/Image_Release_Notes/">Notes sur l'édition des images IBM Bluemix Private Cloud</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.0.1_Point_Release/">Notes sur l'édition 3.0.1 destinées aux clients</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.1.1_Point_Release/">Notes sur l'édition 3.1.1 destinées aux clients</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_4.0.0.0r_Release_Notes/">Notes sur l'édition 4.0.0.0r</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_2.1.1_Point_Release/">Notes sur l'édition 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/release_notes_2.1_for_customers/">Notes sur l'édition 2.1</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.0.0_Release_Notes/">Notes sur l'édition 3.0.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/tyying/help-documentation-staging-area/fr/releasenotes/Customer_3.1.0_Release_Notes/">Notes sur l'édition 3.1.0</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/libvirt_error/">Instance en statut d'erreur : erreur libvirt</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/ssh-too-long-error/">Pourquoi l'exécution du protocole SSH sur mon instance prend-elle entre 4 et 5 secondes ?</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/ping-instance-error/">Pourquoi ne puis-je pas exécuter le protocole SSH ou un ping sur une instance ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/nova-microversions-error/">Erreur : 'Server doesn't support microversions' lors de l'exécution de commandes Nova</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Bad_Availability_Zone/">Cloud Foundry : erreur de zone de disponibilité non valide</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/failed_to_create_router/">Echec d'une tentative de création d'un routeur</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/How_many_connections_can_HAProxy_handle/">Combien de connexions simultanées peuvent être gérées par HAProxy ?</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/CLI-authentication-error/">Lors de l'utilisation d'une interface CLI OpenStack sous Windows, j'obtiens des erreurs d'échec d'authentification</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/floating-ips-error/">Pourquoi toutes les IP flottantes qui m'ont été affectées ne sont-elles pas disponibles ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/horizon-delete-error/">Pourquoi ne puis-je pas supprimer mon projet/titulaire du tableau de bord Horizon ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/no-valid-host-error/">Erreur : No valid host was found</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Cannot_See_New_vCPUs/">Pourquoi mes nouvelles UC virtuelles ne sont-elles pas répertoriées dans Horizon ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/failure_prepping_block_device/">Erreur : Failure prepping block device</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/delete_security_group/">Pourquoi ne puis-je pas supprimer un groupe de sécurité ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Troubleshooting_FAQ/">Foire aux questions : traitement des incidents</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Unable_to_ping_tenant_network/">Pourquoi ne puis-je pas exécuter un ping sur mes réseaux titulaires ?</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/troubleshooting/Why_No_vIP_Failover_With_L2pop/">Pourquoi ne puis-je pas utiliser L2pop lorsque je souhaite procéder à la reprise en ligne de mes instances vIP ?</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/launch-instance-from-volume/">Comment lancer une instance à partir d'un volume</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/import-vhd-image-lvm/">Importation d'une image VHD qui utilise la gestion des volumes linux pour son répertoire racine</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/OpenStack_network_concepts/">Concepts OpenStack liés au réseau</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">Création d'une instance avec une IP fixe spécifique</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Mitaka_CLI_notes/">Remarques de l'interface CLI d'OpenStack Mitaka</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Why-Choose-OpenStack/">Pourquoi choisir OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/openstack-storage-concepts/">Concepts OpenStack liés au stockage</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Ursula_and_OpenStack/">Ursula et OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/Creating_Instances_With_Static_IP/">Comment créer une instance avec une IP statique</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/quotas/">Quotas</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/How_to_Isolate_Tenants/">Comment isoler les titulaires (projets)</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/userdocs/external-reference-material/">Références externes</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/floating-ip-address/">Création d'une adresse IP flottante à l'aide de l'API OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/openstack-api-getting-started/">Initiation à l'API OpenStack</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/openstack/api/OpenStack_Client_Versions/">Configuration requise pour les versions du client OpenStack</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/creating-additional-networks-with-horizon/">Création de réseaux supplémentaires dans OpenStack à l'aide du panneau Horizon</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/Making_Snapshots_in_Horizon/">Utilisation d'Horizon pour les images instantanées</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/allocate-floating-ip/">Allocation et connexion d'une IP (flottante) publique à une instance</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/create-volume-from-horizon/">Création d'un volume à partir du tableau de bord Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/horizon-for-administrators/">Horizon pour les administrateurs</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/launch-instance-from-horizon/">Démarrage d'une instance à partir du tableau de bord Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/launch-instance-from-horizon_newton/">Démarrage d'une instance à partir du tableau de bord Horizon (édition Newton d'OpenStack)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/set-reverse-dns/">Comment définir un enregistrement de résolution inversée des noms de domaine (PTR) pour une instance d'IBM Bluemix Private Cloud ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/using-horizon/">Utilisation d'Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/horizon/Horizon_troubleshooting_FAQ/">Foire aux questions : traitement des incidents liés à Horizon</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/windows-user-and-password/">Comment définir un nom d'utilisateur et un mot de passe initiaux sur une instance Windows dans OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/CLI-create-public-instance/">Comment créer une instance et la rendre publique à l'aide de la ligne de commande</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Nova_boot_speed/">Que se passe-t-il en arrière-plan lorsque j'amorce une machine virtuelle et comment accélérer son amorçage ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Restrict_Floating_IP/">Comment restreindre les IP flottantes ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/config_drive_for_instances/">Puis-je créer une instance et y ajouter des fichiers à l'aide de ConfigDrive ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/create-vm-with-volumes/">Comment créer une instance à l'aide du client de ligne de commande Nova ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/define-flavor-vcpu/">Comment définir la topologie d'UC virtuelle d'une version ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/maximum-flavor-spec/">Quelle spécification maximale puis-je définir pour une version ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/migrate-instance/">Migration d'une instance vers un nouveau cloud</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/Metadata_service_FAQ/">Service de métadonnées dans OpenStack Neutron et Nova</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/nova/hypervisor-statistics/">Comment obtenir les statistiques de l'hyperviseur ?</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/network_ip_availability/">Comment vérifier la disponibilité de mon IP réseau ?</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">Comment isoler les réseaux d'un projet connectés à un routeur partagé ?</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/time-ip-associated-with-instance/">Comment trouver l'heure à laquelle une IP flottante a été associée ou dissociée d'une instance ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Load_Balancing_Methods/">Méthodes d'équilibrage de charge</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Multi-tier_Router_Configuration/">Configuration du routeur multiniveau dans IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/set-up-dns-records/">Comment configurer des enregistrements DNS qui pointent vers des instances d'OpenStack ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/routing_internal_traffic_between_projects/">Routage du trafic interne entre les projets</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/add-ip-to-instance/">Ajout d'une IP privée fixe spécifique à une instance</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/configure-dns.for-instances/">Configuration du serveur de noms de domaine pour les instances</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/configure-multi-nics/">Configuration de plusieurs interfaces réseau pour vos propres images de cloud</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/configure-ha-ip/">Comment configurer une IP hautement disponible</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/creating-virtual-networks/">Création de réseaux virtuels sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/How_Can_I_See_My_IPs/">Comment afficher mes IP ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/How_to_update_DNS/">Comment mettre à jour le serveur de noms de domaine ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/vpn-vlan-directlink/">Réseau privé virtuel, réseau local virtuel et Direct Link</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/BYOFIP_support/">Using BYOFIP Connectivity Between IBM Bluemix Private Cloud and a Customer Site</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Intro_to_LBaaS/">Introduction à LBaaS (équilibreur de charge sous forme de service)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Security_groups_CLI/">Utilisation de l'interface CLI pour configurer les groupes de sécurité</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Network_Use_Cases_White_Paper/">Scénarios d'utilisation du réseau IBM Blue Box</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/neutron/Where_Are_These_IPs/">Où se trouvent les deux premières IP ?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/FAQ_Working_with_Windows_Images/">Foire aux questions : utilisation des images Windows</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/compatible-glance-images/">Existe-t-il une liste des images compatibles avec OpenStack officielles que je peux télécharger pour une utilisation avec Glance ? (CentOS, Ubuntu, etc.)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/disk-capacity-constraints/">Contraintes de capacité disque</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/Image_Properties_on_Power/">Paramètres optimum pour les images Glance sur les noeuds de calcul Power</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/glance/imagesnapshot/">Différence entre une image et une image instantanée</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/read-only-cinder-error/">Pourquoi certains volumes Cinder sont-ils montés en lecture seule et comment résoudre ce problème ?</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cinder-volume-stuck/">Volume Cinder bloqué</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/alternative_method_for_volume_encryption/">Méthode alternative de chiffrement d'un volume de stockage par blocs (à l'aide d'une machine virtuelle invitée Ubuntu)</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Bug_Creating_Encrypted_Volumes/">La création de volumes chiffrés avec Cinder n'est pas prise en charge</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Managing_block_storage/">Gestion du stockage par blocs</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cli-create-volume/">Création d'un volume avec la ligne de commande</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/create-volume-from-snapshot/">La création d'un volume à partir d'une image instantanée d'instance est-elle prise en charge ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/resize_cinder_volume/">Comment redimensionner un volume Cinder ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/supported_volume_types/">Quels sont les types de volume Cinder pris en charge dans une instance cloud ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Ephemeral_to_Cinder/">Comment basculer du disque éphémère au stockage Cinder</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/Force_snapshot_on_attached_volume/">Comment imposer l'appel d'image instantanée sur un volume connecté</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/cinder/cinder-failed-connection-error/">Que faire si le client Cinder renvoie le message "ERROR: Unable to establish connection" et ne parvient pas à se connecter ?</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/oidc-federation/">Fédération OpenID Connect sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/saml-federation/">Fédération Keystone SAML sur IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/RBAC_Definitions/">Contrôle d'accès basé sur les rôles</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/Managing_Users_and_Projects/">Gestion des utilisateurs et des projets</a>
              </li>
            
          
        
          
            
            <li>
                <a class="page-link--active"  href="/tyying/help-documentation-staging-area/fr/keystone/k2k-federation/">Fédération Keystone to Keystone (K2K) sur IBM Bluemix Private Cloud</a>
            </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/tenants-security-groups-keystone/">Projets et groupes de sécurité</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/custom-domains-keystone/">Domaines personnalisés dans Keystone V3</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/keystone/Getting_Started_with_K2K_Identity/">Initiation à Keystone Federated Identity</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/Getting_Started_With_Heat/">Initiation aux modèles Heat</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/autoscaling-with-heat/">Utilisation de Heat pour la mise à l'échelle automatique</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/Deploying_apps_with_UCD/">Déploiement d'applications avec IBM UrbanCode Deploy et IBM Bluemix Private Cloud</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using_heat_for_load_balancer/">Utilisation de Heat pour mettre les serveurs à disposition avec un équilibreur de charge</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using-ucd-ucdp/">Utilisation d'IBM Urban Code Deploy avec IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/heat/using_heat_for_deployment/">Utilisation de Heat avec un certificat autosigné</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/tyying/help-documentation-staging-area/fr/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/tyying/help-documentation-staging-area/img/fr/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/tyying/help-documentation-staging-area/fr/ceilometer/compatible-glance-images/">La création d'un volume à partir d'une image instantanée d'instance est-elle prise en charge ?</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        Fédération Keystone to Keystone (K2K) sur IBM Bluemix Private Cloud

        
        </h1>




        
        <div class="post-data">
          <img src='/tyying/help-documentation-staging-area/img/fr/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Elvin Tubillara </span>
              <span class="dot">&#9679;</span>
              <span class="date"> 24 juin 2016</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>federation</p></li>
                  
                    <li class="tag"><p>federation(fédération)</p></li>
                  
                    <li class="tag"><p>keystone(keystone)</p></li>
                  
                    <li class="tag"><p>k2k(k2k)</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <ul>
  <li><a href="#what_is_k2k?">Définition de la fédération K2K</a></li>
  <li><a href="#managing_groups">Gestion des groupes</a></li>
  <li><a href="#managing_mappings">Gestion des mappages</a></li>
  <li><a href="#using_horizon">Utilisation d’Horizon</a></li>
  <li><a href="#using_the_python_api_libraries">Utilisation des bibliothèques d’API Python</a></li>
  <li><a href="#more_mappings_and_groups">Mappages et groupes supplémentaires</a></li>
</ul>

<h2 id="définition-de-la-fédération-k2k">Définition de la fédération K2K</h2>
<p>La fédération Keystone to Keystone (K2K) est une méthode d’utilisation des données d’identification d’une instance Keystone pour se connecter à plusieurs instances
d’IBM Bluemix Private Cloud. Une instance Bluemix Private Cloud est désignée comme fournisseur d’identité et les autres instances cloud sont désignées comme fournisseurs de services. Le fournisseur d’identité stocke les données d’identification de l’utilisateur et produit une assertion aux fournisseurs de services indiquant que l’utilisateur est bien un utilisateur valide. L’ID utilisateur et le mot de passe ne sont jamais envoyés aux fournisseurs de services, seules les assertions du fournisseur d’identité sont envoyées.</p>

<h2 id="fonctionnement-de-k2k">Fonctionnement de K2K</h2>
<p>L’utilisateur se connecte au fournisseur d’identité, reçoit une assertion SAML signée du fournisseur d’identité, puis utilise cette assertion SAML pour s’authentifier auprès des fournisseurs de services. Le processus de connexion permettant de gérer le flux SAML est géré par le plug-in d’authentification K2K (disponible dans <code class="highlighter-rouge">keystoneauth1</code>).
Les données d’identification ne sont gérées que sur le fournisseur d’identité et sont acceptées par les fournisseurs de services par le biais des assertions.</p>

<p>Si plusieurs clouds privés Bluemix ont été configurés avec la fonction K2K, une instance cloud
est désignée comme fournisseur d’identité et les autres sont désignées comme fournisseurs de services. Les fournisseurs de services utilisent des mappages pour sélectionner
les attributs utilisateur issus du fournisseur d’identité qui sont utilisés pour le mappage à un groupe local. Une fois que l’utilisateur se connecte à l’aide de la fédération K2K, il se voit accorder les rôles affectés au groupe.</p>

<p>Par défaut, un mappage appelé <code class="highlighter-rouge">mapping-for-k2k-federation</code>
est créé pour les données d’identification <code class="highlighter-rouge">cloud_admin</code> sur le fournisseur d’identité par le biais duquel elles sont mappées à un groupe local appelé <code class="highlighter-rouge">cloud_admin</code>. Ce groupe est doté du rôle <code class="highlighter-rouge">cloud_admin</code> lui permettant d’accéder au projet de démonstration.</p>

<p>La procédure de configuration de la fédération K2K est la suivante :</p>

<p><strong>1. Commencez par gérer les groupes sur le fournisseur de services (les utilisateurs fédérés disposeront des mêmes droits d’accès que le groupe)</strong></p>

<p><strong>2. Gérez ensuite les mappages sur le fournisseur de services (mappez les utilisateurs du fournisseur d’identité distant aux groupes du fournisseur de services local)</strong></p>

<h2 id="gestion-des-groupes">Gestion des groupes</h2>

<p>La fédération K2K permet de fédérer les utilisateurs du fournisseur d’identité à un groupe sur le fournisseur de services. Le groupe se voit accorder un accès lorsqu’un rôle lui est affecté sur un projet. Les rôles disponibles sont les suivants :</p>

<ul>
  <li><code class="highlighter-rouge">project_admin</code> - Rôle <code class="highlighter-rouge">admin</code> pour le projet.</li>
  <li><code class="highlighter-rouge">cloud_admin</code> - Rôle <code class="highlighter-rouge">admin</code> pour l’instance cloud.</li>
  <li><code class="highlighter-rouge">_member_</code> - Membre d’un projet.</li>
  <li><code class="highlighter-rouge">heat_stack_owner</code> - Propriétaire des piles Heat.</li>
</ul>

<p>Pour utiliser les commandes de groupe, un fichier source de données d’identification est requis. Vous devrez créer un fichier contenant les données d’identification et remplacer les balises placées entre <code class="highlighter-rouge">&lt; &gt;</code> par les informations appropriées :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>#This file is cloud_adminrc
export OS_IDENTITY_API_VERSION=3
export OS_PASSWORD=&lt;mot de passe cloud_admin&gt; #Change this
export OS_AUTH_URL=https://&lt;nom de domaine complet du fournisseur de services&gt;:5000/v3
export OS_USERNAME=cloud_admin
export OS_TENANT_NAME=demo
export OS_CACERT=/opt/stack/ssl/openstack.crt
export OS_NO_CACHE=True
</code></pre>
</div>

<p>Une fois le fichier source de données d’identification créé, vous pouvez sourcer le fichier et utiliser l’une des commandes OpenStack ci-dessous pour gérer les groupes et les rôles.
<strong>Remarque : ces commandes s’exécutent sur le fournisseur de services.</strong></p>

<p><strong>Sourcez les données d’identification dans l’environnement</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source cloud_adminrc
</code></pre>
</div>

<p><strong>Pour répertorier des groupes</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack group list
</code></pre>
</div>

<p><strong>Pour créer un groupe</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack group create --help
$ openstack group create &lt;nom du nouveau groupe&gt;
</code></pre>
</div>

<p><strong>Pour répertorier des rôles</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role list
</code></pre>
</div>

<p><strong>Pour répertorier des affectations de rôle</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role assignment list --name
</code></pre>
</div>

<p><strong>Pour répertorier des projets</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack project list
</code></pre>
</div>

<p><strong>Pour obtenir de l’aide sur l’ajout d’une affectation de rôle</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role add --help
</code></pre>
</div>

<p><strong>Pour ajouter une affectation de rôle afin qu’un groupe soit doté d’un rôle sur un projet</strong> :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role  add &lt;rôle&gt; --project &lt;projet&gt; --group &lt;groupe&gt;
</code></pre>
</div>

<p>Les utilisateurs fédérés sont mappés dans des groupes sur le fournisseur de services. Par défaut, un groupe appelé <code class="highlighter-rouge">cloud_admin</code> existe si la fédération K2K est activée. Ce groupe est doté du rôle <code class="highlighter-rouge">cloud_admin</code> sur le projet “demo”.</p>

<p>La procédure permettant d’accorder un accès aux groupes est la suivante :</p>
<ol>
  <li>Commencez par créer ou éditer le groupe.</li>
  <li>Créez ou éditez ensuite les affectations de rôle pour les groupes sur les projets.</li>
</ol>

<p><strong>Exemple 1.</strong> Création d’un groupe <code class="highlighter-rouge">cloud_admin</code>.</p>

<p>Les commandes ci-dessous permettent de sourcer un fichier avec les informations d’authentification de l’utilisateur <code class="highlighter-rouge">cloud_admin</code> du fournisseur de services.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source cloud_adminrc
$ openstack group list
$ openstack group create cloud_admin --or-show
$ openstack role assignment list --name --group cloud_admin
</code></pre>
</div>

<p>Créez ensuite l’affectation de rôle si elle n’existe pas.
<strong>Ces commandes permettent d’ajouter le rôle <code class="highlighter-rouge">cloud_admin</code> pour le groupe <code class="highlighter-rouge">cloud_admin</code> sur le projet “demo”.</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role add cloud_admin --group cloud_admin --project demo
$ openstack role assignment list --name --group cloud_admin
</code></pre>
</div>
<p>Après avoir exécuté la commande <code class="highlighter-rouge">openstack role assignment list</code>, un résultat similaire à ce qui suit devrait apparaître :</p>

<div class="highlighter-rouge"><pre class="highlight"><code># +-------------+------+---------------------+--------------+--------+-----------+
# | Role        | User | Group               | Project      | Domain | Inherited |
# +-------------+------+---------------------+--------------+--------+-----------+
# | cloud_admin |      | cloud_admin@Default | demo@Default |        | False     |
# +-------------+------+---------------------+--------------+--------+-----------+
</code></pre>
</div>

<p><strong>Exemple 2.</strong> Création d’un groupe avec un accès member.</p>

<p>Les commandes ci-dessous permettent de sourcer un fichier avec les informations d’authentification de l’utilisateur <code class="highlighter-rouge">cloud_admin</code> du fournisseur de services.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source cloud_adminrc
$ openstack group list
$ openstack group create demo_member_group --or-show
$ openstack role assignment list --name --group demo_member_group
$ openstack role add _member_ --group demo_member_group --project demo
$ openstack role assignment list --name --group demo_member_group
</code></pre>
</div>

<p>Après avoir exécuté la commande <code class="highlighter-rouge">openstack role assignment list</code>, un résultat similaire à ce qui suit devrait apparaître :</p>

<div class="highlighter-rouge"><pre class="highlight"><code># +----------+------+---------------------------+--------------+--------+-----------+
# | Role     | User | Group                     | Project      | Domain | Inherited |
# +----------+------+---------------------------+--------------+--------+-----------+
# | _member_ |      | demo_member_group@Default | demo@Default |        | False     |
# +----------+------+---------------------------+--------------+--------+-----------+
</code></pre>
</div>

<h2 id="gestion-des-mappages"><a name="managing_mappings"></a>Gestion des mappages</h2>
<p>L’utilisateur <code class="highlighter-rouge">cloud_admin</code> sur le fournisseur de services dispose d’un accès lui permettant de lire et de définir des mappages pour la fédération K2K. Notez que l’utilisateur de fournisseur de services <code class="highlighter-rouge">cloud_admin</code> <em>ne peut pas</em> supprimer de mappages existants ou créer des mappages.</p>

<p>Pour utiliser les commandes de mappage, un fichier source de données d’identification version 3 est requis. Vous devrez créer un fichier contenant les données d’identification et remplacer les balises placées entre <code class="highlighter-rouge">&lt; &gt;</code> par les informations appropriées :</p>

<p>Pour plus d’informations sur la gestion des mappages, consultez la documentation OpenStack :
http://docs.openstack.org/developer/keystone/mapping_combinations.html
http://docs.openstack.org/developer/keystone/federation/federated_identity.html#mapping-combinations</p>

<p>Lorsqu’un utilisateur se connecte au fournisseur de services via la fédération K2K à l’aide de son compte fournisseur d’identité, un compte utilisateur est créé en local sur le fournisseur de services. <strong>Notez que le compte utilisateur créé au cours de la fédération est éphémère. Il peut être supprimé ultérieurement sans avertissement.</strong></p>

<p>Dans le mappage par défaut, le rôle <code class="highlighter-rouge">cloud_admin</code> affecté à l’utilisateur de fournisseur d’identité est fédéré ; un utilisateur <code class="highlighter-rouge">cloud_admin</code> local
est donc créé dans le domaine fédéré. Cet utilisateur est différent de l’utilisateur <code class="highlighter-rouge">cloud_admin</code> dans le domaine “Default”. L’utilisateur
<code class="highlighter-rouge">cloud_admin</code> éphémère dans le domaine fédéré peut être supprimé ultérieurement.</p>

<p>Vous devez disposer du fichier source créé à la section précédente pour pouvoir exécuter les commandes de mappage suivantes :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source cloud_adminrc
$ openstack mapping list
$ openstack mapping show mapping-for-k2k-federation
$ openstack mapping show mapping-for-k2k-federation --format json
$ openstack mapping show --help
$ openstack mapping set mapping-for-k2k-federation --rules &lt;mappings file&gt;
</code></pre>
</div>

<p>La commande <code class="highlighter-rouge">openstack mapping list</code> affiche une liste de mappages. Elle devrait contenir le mappage <code class="highlighter-rouge">mapping-for-k2k-federation</code>.</p>

<p>La commande <code class="highlighter-rouge">openstack mapping show mapping-for-k2k-federation</code> affiche les détails du mappage donné. Ils devraient contenir une liste <code class="highlighter-rouge">json</code> répertoriant les règles du mappage.</p>

<p>La commande <code class="highlighter-rouge">openstack mapping set mapping-for-k2k-federation --rules newmappings.json</code>
affiche la procédure de mise à jour et de définition du mappage <code class="highlighter-rouge">mapping-for-k2k-federation</code>.</p>

<p>Le fichier de mappage devrait être au format suivant :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
   {
      "local": [
        &lt;groupe&gt;
      ],
      "remote": [
        &lt;condition&gt;
      ]
   }
]
</code></pre>
</div>

<p>Le <strong>fichier de règles</strong> devrait contenir une liste de règles qui mappent les utilisateurs distants à un groupe qui existe sur le fournisseur de services.
La section local contient une règle qui spécifie le groupe auquel les utilisateurs distants devraient être mappés. <strong>La règle de groupe local est requise.</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"group"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"domain"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Default"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cloud_admin"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>La section remote contient des règles qui spécifient les utilisateurs distants auxquels un accès devrait être accordé.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"openstack_user"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"any_one_of"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"cloud_admin"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>Les types d’attribut utilisateur admis pouvant être attribués dans les règles distantes sont les suivants :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>openstack_user
openstack_user_domain
openstack_roles
openstack_project
openstack_project_domain
</code></pre>
</div>

<p>Les actions admises pour filtrer les attributs distants sont les suivantes :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>empty
any_ony_of
not_any_of
blacklist
whitelist
</code></pre>
</div>

<p>Pour définir le nom d’utilisateur, vous pouvez utiliser <strong>{0}</strong> dans la section local pour indiquer d’utiliser une zone issue de la section remote. Vous pouvez ensuite ajouter des informations supplémentaires sur le nouveau nom d’utilisateur fédéré. <strong>Pour la fédération K2K, il est important d’ajouter des informations afin de préciser le cloud utilisé</strong>. Vous pouvez faire référence à la section remote dans la section local par un index (“{i}”, où i est l’index de la zone remote) :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
  {
    "local": [
      {
        "user": {
          "name": "my_cloud/{0}"
        }
      },
               ...
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
               ...
    ]
  }
]
</code></pre>
</div>

<p>Voici quelques exemples de scénario :</p>

<p><strong>Exemple 1.</strong> Mappage de l’utilisateur <code class="highlighter-rouge">cloud_admin</code> à un groupe <code class="highlighter-rouge">cloud_admin</code> et définition du nom d’utilisateur sur <code class="highlighter-rouge">my_cloud/cloud_admin</code> dans le domaine fédéré. Voici le fichier de mappage par défaut :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
  {
    "local": [
      {
        "user": {
          "name": "my_cloud/{0}"
        }
      },
      {
        "group": {
          "domain": {
            "name": "Default"
          },
          "name": "cloud_admin"
        }
      }
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
      {
        "type": "openstack_user",
        "any_one_of": [
          "cloud_admin"
        ]
      }
    ]
  }
]
</code></pre>
</div>

<p><strong>Exemple 2.</strong> Mappages de membres</p>

<p>Dans cet exemple, les utilisateurs dotés du rôle <code class="highlighter-rouge">_member_</code> sur le projet “demo” du fournisseur d’identité sont mappés à un groupe (<code class="highlighter-rouge">demo_member_group</code> de l’exemple 2) sur le fournisseur de services. Le groupe <code class="highlighter-rouge">demo_member_group</code> est supposé être un groupe sur le
fournisseur de services doté du rôle <code class="highlighter-rouge">_member_</code> su le projet “demo” sur le fournisseur de services.</p>

<p>Une série de commandes bash est exécutée pour concaténer la chaîne suivante dans un fichier, puis définir le mappage.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cat &lt;&lt;EOF &gt; federated_member_mapping.json
[
  {
    "local": [
      {
        "user": {
          "name": "my_cloud/{0}"
        }
      },
      {
        "group": {
          "domain": {
            "name": "Default"
          },
          "name": "demo_member_group"
        }
      }
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
      {
        "type": "openstack_project",
        "any_one_of": [
          "demo"
        ]
      },
      {
        "type": "openstack_roles",
        "any_one_of": [
          "_member_"
        ]
      }
    ]
  }
]
EOF
$ openstack mapping set mapping-for-k2k-federation --rules federated_member_mapping.json
</code></pre>
</div>

<p><strong>Exemple 3.</strong> Règles multiples</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
  {
    "local": [
      {
        "user": {
          "name": "my_cloud/{0}"
        }
      },
      {
        "group": {
          "domain": {
            "name": "Default"
          },
          "name": "cloud_admin"
        }
      }
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
      {
        "type": "openstack_user",
        "any_one_of": [
          "cloud_admin"
        ]
      }
    ]
  },
  {
    "local": [
      {
        "user": {
          "name": "my_cloud/{0}"
        }
      },
      {
        "group": {
          "domain": {
            "name": "Default"
          },
          "name": "demo_member_group"
        }
      }
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
      {
        "type": "openstack_project",
        "any_one_of": [
          "demo"
        ]
      },
      {
        "type": "openstack_roles",
        "any_one_of": [
          "_member_"
        ]
      }
    ]
  }
]
</code></pre>
</div>

<h2 id="utilisation-dhorizon"><a name="using_horizon"></a>Utilisation d’Horizon</h2>
<p>Le tableau de bord OpenStack du fournisseur d’identité doit contenir un menu déroulant intitulé <strong>S’authentifier auprès de la fédération Keystone to Keystone</strong>.</p>

<ul>
  <li>Si vous sélectionnez l’option <strong>Fournisseur d’identité</strong>, la fédération ne sera pas utilisée. L’utilisateur sera connecté au cloud OpenStack du fournisseur d’identité.</li>
  <li>Si l’option <strong>Fournisseur de services</strong> est sélectionnée, la fédération est utilisée. Les données d’identification de l’utilisateur du fournisseur d’identité seront fédérées au fournisseur de services.</li>
  <li>Pour changer de fournisseur, l’utilisateur doit se déconnecter et sélectionner à nouveau le fournisseur.</li>
</ul>

<p><strong>Remarque :</strong> l’écran de connexion Horizon de K2K pour IBM Bluemix Private Cloud 3.0.0 n’est pas une fonction OpenStack standard. Il est susceptible de changer dans les éditions ultérieures.</p>

<p><img src="/tyying/help-documentation-staging-area/img/fr/k2k_auth.png" alt="Ecran de connexion Horizon pour Bluemix Private Cloud" /></p>

<h2 id="utilisation-des-bibliothèques-dapi-python"><a name="using_the_python_api_libraries"></a>Utilisation des bibliothèques d’API Python</h2>

<p>Créez ensuite un fichier source que vous allez utiliser pour vous authentifier à l’aide du plug-in d’authentification K2K. Le jeton <code class="highlighter-rouge">OS_SERVICE_PROVIDER</code> fait référence à l’ID du fournisseur de services, que vous pouvez obtenir en exécutant la commande suivante sur le fournisseur d’identité :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack server provider list
</code></pre>
</div>

<p>Créez un fichier source qui sera utilisé par notre script Python pour répertorier les instances sur le fournisseur de services, à l’aide des données d’identification <code class="highlighter-rouge">cloud_admin</code> issues du fournisseur d’identité.</p>

<p>Ce fichier source (federationrc) contient les données d’authentification permettant de se connecter au <strong>fournisseur d’identité</strong> ainsi que les informations cibles du <strong>fournisseur de services</strong>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code># This file is federationrc
export OS_USERNAME=cloud_admin
export OS_PASSWORD=&lt;mot de passe admin cloud&gt;
export OS_AUTH_URL=https://k2kf-idp.open-test.ibmcloud.com:5000/v3
export OS_PROJECT_NAME=demo
export OS_DOMAIN_NAME=Default
export OS_SERVICE_PROVIDER=&lt;ID fournisseur de services&gt;
</code></pre>
</div>

<p>Vous pouvez afficher la liste des fournisseurs de services en exécutant les commandes suivantes sur le fournisseur d’identité :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack service provider list
</code></pre>
</div>

<p>Le code ci-dessous utilise le plug-in <code class="highlighter-rouge">auth</code> Keystone-to-Keystone pour obtenir un jeton non défini dans la portée.
Ce jeton permet d’obtenir un jeton défini dans la portée, qui est ensuite défini dans la portée de l’un des projets auxquels l’utilisateur fédéré aura accès. Une fois que vous disposez du jeton défini dans la portée, vous pouvez répertorier les instances de serveur sur le fournisseur de services.</p>

<p>Créez un fichier appelé list_servers.py :</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/usr/bin/python
</span>

from keystoneauth1 import session
from keystoneauth1.identity.v3 import Token
from keystoneauth1.identity.v3.k2k import Keystone2Keystone
from keystoneauth1.identity.v3.password import Password
from keystoneclient.v3.client import Client

from novaclient import client
import os

<span class="c"># we get these variables from sourcing a file
</span>
OS_AUTH_URL <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_AUTH_URL'</span><span class="o">)</span>
OS_USERNAME <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_USERNAME'</span><span class="o">)</span>
OS_PASSWORD <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_PASSWORD'</span><span class="o">)</span>
OS_PROJECT_NAME <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_PROJECT_NAME'</span><span class="o">)</span>
OS_DOMAIN_NAME <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_DOMAIN_NAME'</span><span class="o">)</span>
OS_SERVICE_PROVIDER <span class="o">=</span> os.environ.get<span class="o">(</span><span class="s1">'OS_SERVICE_PROVIDER'</span><span class="o">)</span>


def get_project_and_federated_session<span class="o">()</span>:
    <span class="c"># authenticate to the idp
</span>
    idp_auth <span class="o">=</span> Password<span class="o">(</span><span class="nv">auth_url</span><span class="o">=</span>OS_AUTH_URL,
                        <span class="nv">username</span><span class="o">=</span>OS_USERNAME,
                        <span class="nv">password</span><span class="o">=</span>OS_PASSWORD,
                        <span class="nv">user_domain_name</span><span class="o">=</span>OS_DOMAIN_NAME,
                        <span class="nv">project_name</span><span class="o">=</span>OS_PROJECT_NAME,
                        <span class="nv">project_domain_name</span><span class="o">=</span>OS_DOMAIN_NAME<span class="o">)</span>

    <span class="c"># get unscoped auth using k2k auth plugin
</span>
    unscoped_auth <span class="o">=</span> Keystone2Keystone<span class="o">(</span><span class="nv">base_plugin</span><span class="o">=</span>idp_auth,
                                      <span class="nv">service_provider</span><span class="o">=</span>OS_SERVICE_PROVIDER<span class="o">)</span>

    <span class="c"># get first available project and scoped auth
</span>
    sess <span class="o">=</span> session.Session<span class="o">()</span>
    unscoped_access_info <span class="o">=</span> unscoped_auth.get_access<span class="o">(</span>sess<span class="o">)</span>
    unscoped_client <span class="o">=</span> Client<span class="o">(</span><span class="nv">session</span><span class="o">=</span>sess, <span class="nv">auth</span><span class="o">=</span>unscoped_auth<span class="o">)</span>

    <span class="c"># Get first project
</span>
    projects <span class="o">=</span> unscoped_client.federation.projects.list<span class="o">()</span>
    project <span class="o">=</span> projects[0]

    <span class="c"># Create a session with a scoped token for the project
</span>
    unscoped_token <span class="o">=</span> unscoped_access_info.auth_token
    scoped_token <span class="o">=</span> Token<span class="o">(</span><span class="nv">auth_url</span><span class="o">=</span>unscoped_auth.auth_url,
                         <span class="nv">token</span><span class="o">=</span>unscoped_token,
                         <span class="nv">project_id</span><span class="o">=</span>project.id,
                         <span class="nv">reauthenticate</span><span class="o">=</span>False<span class="o">)</span>
    federated_session <span class="o">=</span> session.Session<span class="o">(</span><span class="nv">auth</span><span class="o">=</span>scoped_token<span class="o">)</span>
    <span class="k">return </span>project, federated_session


def main<span class="o">()</span>:
    project, scoped_session <span class="o">=</span> get_project_and_federated_session<span class="o">()</span>
    nova <span class="o">=</span> client.Client<span class="o">(</span><span class="nv">version</span><span class="o">=</span>2, <span class="nv">session</span><span class="o">=</span>scoped_session<span class="o">)</span>
    print <span class="s2">"The servers running on project %s are: "</span> % project.name
    <span class="k">for </span>server <span class="k">in </span>nova.servers.list<span class="o">()</span>:
        print server.name

<span class="k">if</span> <span class="k">**</span>name<span class="k">**</span> <span class="o">==</span> <span class="s1">'**main**'</span>:
    main<span class="o">()</span></code></pre></figure>

<p>Le script Python peut être exécuté comme suit :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ source federationrc
$ chmod 700 list_servers.py
$ ./list_servers.py
</code></pre>
</div>

<h2 id="mappages-et-groupes-supplémentaires"><a name="more_mappings_and_groups"></a>Mappages et groupes supplémentaires</h2>
<p><strong>Exemple 1.</strong> Utilisateurs Heat</p>

<p>Il existe actuellement un problème lié aux utilisateurs fédérés et à la fonction donneur d’autorisation/administrateur dans Keystone, qui empêche l’utilisateur Heat fédéré de déléguer son rôle <code class="highlighter-rouge">heat_stack_owner</code>.</p>

<p><strong>Création d’un groupe de fédération Heat</strong></p>

<p>Sourcez un fichier avec les informations d’authentification de l’utilisateur <code class="highlighter-rouge">cloud_admin</code> du fournisseur de services : <code class="highlighter-rouge">source cloud_adminrc</code></p>

<p>Ici, le rôle <code class="highlighter-rouge">heat_stack_owner</code> est utilisé, PAS le rôle <code class="highlighter-rouge">heat_stack_user</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack group list
$ openstack group create heat_stack_owner_group --or-show
$ openstack role assignment list --name --group heat_stack_owner_group
$ openstack role add heat_stack_owner --group heat_stack_owner_group --project demo
$ openstack role assignment list --name --group heat_stack_owner_group
# +------------------+------+--------------------------------+--------------+--------+-----------+
# | Role             | User | Group                          | Project      | Domain | Inherited |
# +------------------+------+--------------------------------+--------------+--------+-----------+
# | heat_stack_owner |      | heat_stack_owner_group@Default | demo@Default |        | False     |
# +------------------+------+--------------------------------+--------------+--------+-----------+
</code></pre>
</div>

<p><strong>Création de mappages de fédération Heat</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cat &lt;&lt;EOF &gt; federated_heat_stack_owner_mapping.json
[
  {
    "local": [
      {
        "user": {
          "name": my_cloud/"{0}"
        }
      },
      {
        "group": {
          "domain": {
            "name": "Default"
          },
          "name": "heat_stack_owner_group"
        }
      }
    ],
    "remote": [
      {
        "type": "openstack_user"
      },
      {
        "type": "openstack_roles",
        "any_one_of": [
          "heat_stack_owner"
        ]
      }
    ]
  }
]
EOF
$ openstack mapping set mapping-for-k2k-federation --rules federated_heat_stack_owner_mapping.json
</code></pre>
</div>

<p>Vous devrez utiliser une solution palliative pour la délégation de confiance en affectant directement le rôle <code class="highlighter-rouge">heat_stack_owner</code> à l’utilisateur. Il s’agit de l’utilisateur créé au cours de la connexion fédérée. Le domaine de l’utilisateur est fédéré et peut prendre la valeur <strong>None</strong> (<code class="highlighter-rouge">Federation=None</code>).</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack user list
</code></pre>
</div>
<p>L’utilisateur fédéré devrait posséder un domaine None : <code class="highlighter-rouge">openstack user show &lt;utilisateur fédéré&gt;</code>
Ici, l’ID utilisateur est requis :</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ openstack role add heat_stack_owner --user &lt;ID utilisateur fédéré&gt; --project &lt;projet&gt;
</code></pre>
</div>

<p>Il existe un problème connu où un utilisateur fédéré a la possibilité de changer
son mot de passe dans la page des paramètres, mais ne parvient pas à le faire.</p>

      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/tyying/help-documentation-staging-area/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/tyying/help-documentation-staging-area/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/tyying/help-documentation-staging-area/js/scripts.js"></script>

  </body>

</html>
