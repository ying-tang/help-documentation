<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>在云主机上设置 OpenVPN 服务器</title>
  <meta name="description" content="如果需要连接到内部 Bluemix Private Cloud 云主机，但是无可用的浮动 IP 地址或者不希望将这些虚拟机放在因特网上，一种方法就是使用 OpenVPN（堡垒主机在其中运行）建立堡垒主机。通过此方式，您可以连接主机并通过该主机连接到内部网络。在本文中，您将了解如何为连接安装和设置 OpenVPN ...">

  <link rel="stylesheet" href="/help-documentation/css/main.css">
  <link rel="canonical" href="/help-documentation/zh_CN/gettingstarted/commontech/openvpn-setup/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/help-documentation/zh_CN/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/help-documentation/zh_CN/"><img src="/help-documentation/img/zh_CN/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/help-documentation/img/zh_CN/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/help-documentation/img/zh_CN/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /help-documentation/gettingstarted/commontech/openvpn-setup/ ">en</a> |
    
      <a  href=" /help-documentation/fr/gettingstarted/commontech/openvpn-setup/ ">fr</a> |
    
      <a  href=" /help-documentation/de/gettingstarted/commontech/openvpn-setup/ ">de</a> |
    
      <a  href=" /help-documentation/ja/gettingstarted/commontech/openvpn-setup/ ">ja</a> |
    
      <a style="font-weight: bold;" href=" /help-documentation/zh_CN/gettingstarted/commontech/openvpn-setup/ ">zh_CN</a> |
    
      <a  href=" /help-documentation/zh_TW/gettingstarted/commontech/openvpn-setup/ ">zh_TW</a> |
    
      <a  href=" /help-documentation/pt_BR/gettingstarted/commontech/openvpn-setup/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/help-documentation/zh_CN/gettingstarted">Getting Started (38)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/connect-to-openvpn-server/">连接到 OpenVPN 服务器</a>
          </li>
          
        
          
          <li>
              <a class="page-link--active"  href="/help-documentation/zh_CN/gettingstarted/commontech/openvpn-setup/">在云主机上设置 OpenVPN 服务器</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/blue-box-cloud-components/">Bluemix Private Cloud 组件</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/detaching-volume/">在拆离云硬盘之前应该做什么？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/FAQ/">技术常见问题解答</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/python-environment-primer/">虚拟 Python 环境与您：开发人员入门</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/RHOSP_Product_Overview/">使用 Red Hat 的 IBM Bluemix Private Cloud - 产品概述</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/general_product_overview/">常规产品概述</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/RHOSP_Building_Blocks/">使用 Red Hat 的 IBM Bluemix Private Cloud 的构建块</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Building_Blocks/">IBM Bluemix Private Cloud 构建块 (Community Edition)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Instance_Resize/">调整云主机大小（非实时）</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">使用专用网络设置多个云环境之间的网络连接</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Windows_License_Activation/">Windows 激活客户指南</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 7 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/view-my-bill/">如何查看我的账单？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/adding-removing-subscribers/">添加或除去问题单的订户</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/report-issue/">如何报告问题？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/escalating-a-ticket/">如何上报问题单？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/status-pages/">Bluemix Private Cloud 状态页面</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">从 Blue Box 转移域</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Box_Panel/">Box Panel 用户指南</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel、站点控制器和 IBM Bluemix Private Cloud Local</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/qemu_article/">加强 OpenStack - QEMU 和云</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Improving_Cloud_Performance/">加强 OpenStack II - 提高云性能</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Optimized_Load_Balancing/">Cloud 101 - 优化的负载均衡</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">云镜像用户指南 (Community Edition)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">云镜像用户指南 (IBM Bluemix Private Cloud with Red Hat)</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Image_Release_Notes/">IBM Bluemix Private Cloud 镜像发行说明</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.1.1_Point_Release/">客户 3.1.1 次要发行版发行说明</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.0.1_Point_Release/">客户 3.0.1 次要发行版发行说明</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_2.1.1_Point_Release/">发行说明 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.1.0_Release_Notes/">发行说明 3.1.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.0.0_Release_Notes/">发行说明 3.0.0</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_4.0.0.0r_Release_Notes/">发行说明 4.0.0.0r</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/release_notes_2.1_for_customers/">发行说明 2.1</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/ssh-too-long-error/">为何通过 SSH 连接到云主机需要花费 4 - 5 秒时间？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/ping-instance-error/">为何无法通过 SSH 连接到云主机或对其执行 ping 操作？</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/nova-microversions-error/">错误：运行 Nova 命令时发生“服务器不支持微版本”错误</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/libvirt_error/">云主机处于错误状态：libvirt 错误</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Bad_Availability_Zone/">Cloud Foundry：无效可用性区域错误</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/How_many_connections_can_HAProxy_handle/">HAProxy 可处理多少个并发连接？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/failed_to_create_router/">尝试创建路由器失败</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/failure_prepping_block_device/">错误：准备块设备失败</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/CLI-authentication-error/">在 Windows 上使用任何 OpenStack CLI 时，我收到认证失败错误</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Cannot_See_New_vCPUs/">Horizon 中为何没有列出我的新 vCPU？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/floating-ips-error/">分配给我的所有浮动 IP 为何都不可用？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/no-valid-host-error/">错误：找不到有效主机</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/horizon-delete-error/">为何无法从 Horizon 仪表板中删除我的项目/租户？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/delete_security_group/">为何无法删除安全组？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Troubleshooting_FAQ/">故障诊断常见问题解答</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Unable_to_ping_tenant_network/">为何无法在租户网络中执行 ping 操作？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Why_No_vIP_Failover_With_L2pop/">当想要 vIP 云主机执行故障转移时为何无法使用 L2pop？</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/import-vhd-image-lvm/">导入针对根目录使用 Linux 云硬盘管理的 VHD 镜像</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/launch-instance-from-volume/">如何从云硬盘启动云主机</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Mitaka_CLI_notes/">OpenStack Mitaka CLI 注释</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/openstack-storage-concepts/">OpenStack 存储概念</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/OpenStack_network_concepts/">OpenStack 网络概念</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">使用特定的固定 IP 创建云主机</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Why-Choose-OpenStack/">为何选择 OpenStack？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Ursula_and_OpenStack/">Ursula 和 OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/quotas/">配额</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Creating_Instances_With_Static_IP/">如何使用静态 IP 创建云主机</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/How_to_Isolate_Tenants/">如何隔离租户（项目）</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/external-reference-material/">外部参考材料</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/api/openstack-api-getting-started/">OpenStack API 入门</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/api/floating-ip-address/">使用 OpenStack API 创建浮动 IP 地址</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/api/OpenStack_Client_Versions/">OpenStack 客户端版本需求</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/creating-additional-networks-with-horizon/">使用 Horizon 面板在 OpenStack 中创建其他网络</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/using-horizon/">使用 Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/allocate-floating-ip/">分配公共（浮动）IP 并将其连接到云主机</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/create-volume-from-horizon/">从 Horizon 仪表板中创建云硬盘</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/Making_Snapshots_in_Horizon/">使用 Horizon 创建快照</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/set-reverse-dns/">如何为 IBM Bluemix Private Cloud 云主机设置反向 DNS (PTR) 记录？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/launch-instance-from-horizon/">从 Horizon 仪表板中启动云主机</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/launch-instance-from-horizon_newton/">从 Horizon 仪表板中启动云主机（OpenStack Newton 发行版）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/horizon-for-administrators/">Horizon - 适用于管理员</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/Horizon_troubleshooting_FAQ/">Horizon 故障诊断常见问题解答</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/CLI-create-public-instance/">如何使用命令行创建云主机并使其公开可用</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/windows-user-and-password/">我如何在 OpenStack 中的 Windows 云主机上设置初始用户名和密码？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Nova_boot_speed/">当我引导虚拟机时后台发生了些什么，如何加速引导？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Restrict_Floating_IP/">我如何限制浮动 IP？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/config_drive_for_instances/">我能否使用配置驱动器创建云主机并向其添加文件？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/create-vm-with-volumes/">我如何使用 Nova 命令行客户端创建云主机？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/migrate-instance/">将云主机迁移到新的云</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/maximum-flavor-spec/">我可为云主机类型设置的最大规格是什么？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/define-flavor-vcpu/">我如何定义云主机类型 vCPU 拓扑？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Metadata_service_FAQ/">OpenStack Neutron 和 Nova 中的元数据服务</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/hypervisor-statistics/">我如何获取虚拟机管理器统计信息？</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/network_ip_availability/">我如何检查自己的网络 IP 可用性？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Multi-tier_Router_Configuration/">IBM Bluemix Private Cloud 中的多层路由器配置</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/routing_internal_traffic_between_projects/">在项目之间路由内部流量</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-dns.for-instances/">为云主机配置 DNS</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Load_Balancing_Methods/">负载均衡方法</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/set-up-dns-records/">我如何设置指向 OpenStack 云主机的 DNS 记录？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/time-ip-associated-with-instance/">我如何查找浮动 IP 与云主机关联或解除关联的时间？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">如何隔离连接到共享路由器的项目网络？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/creating-virtual-networks/">在 IBM Bluemix Private Cloud 上创建虚拟网络</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/add-ip-to-instance/">将特定固定专用 IP 添加到云主机中</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-multi-nics/">为您自己的云镜像配置多个网络接口</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-ha-ip/">如何配置高度可用的 IP</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/BYOFIP_support/">在 IBM Bluemix Private Cloud 与客户站点之间使用 BYOFIP 连接</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/vpn-vlan-directlink/">VPN, VLAN 和直接链接</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/How_Can_I_See_My_IPs/">我如何查看自己的 IP？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/How_to_update_DNS/">我如何更新 DNS？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Intro_to_LBaaS/">负载均衡器即服务 (LBaaS) 简介</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Security_groups_CLI/">使用 CLI 设置安全组</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/Network_Use_Cases_White_Paper/">IBM Blue Box 网络用例</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Where_Are_These_IPs/">前两个 IP 位于何处？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/disk-capacity-constraints/">磁盘容量限制</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/glance/FAQ_Working_with_Windows_Images/">使用 Windows 镜像的常见问题解答</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/compatible-glance-images/">是否有用于 Glance 的官方 OpenStack 兼容镜像列表可以下载？（CentOS、Ubuntu 等）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/Image_Properties_on_Power/">Power 计算节点上 Glance 镜像的最佳设置</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/imagesnapshot/">镜像和快照之间的区别</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/cinder-volume-stuck/">Cinder 云硬盘卡住</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/read-only-cinder-error/">什么会导致只读 Cinder 云硬盘以及如何修复？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/alternative_method_for_volume_encryption/">块存储器云硬盘加密的替代方法（使用 Ubuntu 访客 VM）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Bug_Creating_Encrypted_Volumes/">不支持使用 Cinder 创建加密云硬盘</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/create-volume-from-snapshot/">是否支持从云主机快照创建云硬盘？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/resize_cinder_volume/">我如何调整 Cinder 云硬盘的大小？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/Managing_block_storage/">管理块存储器</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/cli-create-volume/">使用命令行创建云硬盘</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/supported_volume_types/">云主机中支持哪种 Cinder 云硬盘类型？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Ephemeral_to_Cinder/">如何从临时磁盘移至 Cinder 存储器</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Force_snapshot_on_attached_volume/">如何在连接的云硬盘上强制使用快照</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/cinder-failed-connection-error/">如果 Cinder 客户端返回“错误：无法建立连接”消息且连接失败，我该怎么做？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/k2k-federation/">IBM Bluemix Private Cloud 上的 Keystone to Keystone (K2K) 联合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/Managing_Users_and_Projects/">管理用户和项目</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/RBAC_Definitions/">基于角色的访问控制</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/saml-federation/">IBM Bluemix Private Cloud 上的 Keystone SAML 联合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/oidc-federation/">IBM Bluemix Private Cloud 上的 OpenID Connect 联合</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/keystone/Getting_Started_with_K2K_Identity/">Keystone 联合身份入门</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/custom-domains-keystone/">Keystone V3 中的自定义域</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/tenants-security-groups-keystone/">项目和安全组</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/heat/Getting_Started_With_Heat/">Heat 模板入门</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/heat/Deploying_apps_with_UCD/">使用 IBM UrbanCode Deploy 和 IBM Bluemix Private Cloud 部署应用程序</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/autoscaling-with-heat/">使用 Heat 进行自动缩放</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using_heat_for_load_balancer/">使用 Heat 为服务器配置负载均衡器</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using-ucd-ucdp/">将 IBM Urban Code Deploy 和 IBM Bluemix Private Cloud 结合使用</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using_heat_for_deployment/">将 Heat 与自签名证书结合使用</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/ceilometer/compatible-glance-images/">是否支持从云主机快照创建云硬盘？</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        在云主机上设置 OpenVPN 服务器

        
        </h1>




        
        <div class="post-data">
          <img src='/help-documentation/img/zh_CN/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Jason Kennedy </span>
              <span class="dot">&#9679;</span>
              <span class="date"> January 7th, 2016</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>getting started</p></li>
                  
                    <li class="tag"><p>入门</p></li>
                  
                    <li class="tag"><p>设置 openVPN</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <p>如果需要连接到内部 Bluemix Private Cloud 云主机，但是无可用的浮动 IP 地址或者不希望将这些虚拟机放在因特网上，一种方法就是使用 OpenVPN（堡垒主机在其中运行）建立堡垒主机。通过此方式，您可以连接主机并通过该主机连接到内部网络。在本文中，您将了解如何为连接安装和设置 OpenVPN 服务器和客户端。
假定您已在运行分配了浮动 IP 的虚拟机。我们不打算讨论如何设置 ufw 或探讨任何已定型的 Linux 内容，此操作指南仅介绍如何在 OpenStack 上托管的云主机中启动并运行 OpenVPN。对于此示例，我们使用 Ubuntu 14.04。</p>

<p>针对服务器端设置完成以下步骤。</p>

<h2 id="步骤-1---openvpn-配置">步骤 1 - OpenVPN 配置</h2>

<p>在安装任何软件包之前，首先更新 Ubuntu 存储库列表。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get update</code></pre></figure>

<p>然后，可安装 OpenVPN 和 Easy-RSA。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get install openvpn easy-rsa</code></pre></figure>

<p>需要将示例 VPN 服务器配置文件抽取到 <code class="highlighter-rouge">/etc/openvpn</code>，从而可将其并入设置中。可使用一条命令完成此抽取操作：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gunzip -c /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz &gt; /etc/openvpn/server.conf</code></pre></figure>

<p>抽取后，在文本编辑器中打开 <code class="highlighter-rouge">server.conf</code>。此教程将使用 <strong>Vim</strong>，但是您可以使用喜欢的任何编辑器。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/openvpn/server.conf</code></pre></figure>

<p>在此文件中执行多处更改。您将看到的部分类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Diffie hellman parameters.
</span>
<span class="c"># Generate your own with:
</span>
<span class="c">#   openssl dhparam -out dh1024.pem 1024
</span>
<span class="c"># Substitute 2048 for 1024 if you are using
</span>
<span class="c"># 2048 bit keys.
</span>
dh dh1024.pem</code></pre></figure>

<p>将 <code class="highlighter-rouge">dh1024.pem</code> 编辑为 <code class="highlighter-rouge">dh2048.pem</code></p>

<p>此更改将使生成服务器和客户端密钥时使用的 RSA 密钥长度翻倍。</p>

<p>现在，继续在 <code class="highlighter-rouge">server.conf</code> 文件中查找以下部分：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># If enabled, this directive will configure
</span>
<span class="c"># all clients to redirect their default
</span>
<span class="c"># network gateway through the VPN, causing
</span>
<span class="c"># all IP traffic such as web browsing and
</span>
<span class="c"># and DNS lookups to go through the VPN
</span>
<span class="c"># (The OpenVPN server machine may need to NAT
</span>
<span class="c"># or bridge the TUN/TAP interface to the internet
</span>
<span class="c"># in order for this to work properly).
</span>
;push <span class="s2">"redirect-gateway def1 bypass-dhcp"</span></code></pre></figure>

<p>取消注释 <code class="highlighter-rouge">push "redirect-gateway def1 bypass-dhcp"</code>，从而使 VPN 服务器将客户端上的 Web 流量传递到其目标。在完成时，该行应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">push <span class="s2">"redirect-gateway def1 bypass-dhcp"</span></code></pre></figure>

<p>下面要执行的编辑位于文件的此区域中：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Certain Windows-specific network settings
</span>
<span class="c"># can be pushed to clients, such as DNS
</span>
<span class="c"># or WINS server addresses.  CAVEAT:
</span>
<span class="c"># http://openvpn.net/faq.html#dhcpcaveats
</span>
<span class="c"># The addresses below refer to the public
</span>
<span class="c"># DNS servers provided by opendns.com.
</span>
;push <span class="s2">"dhcp-option DNS 208.67.222.222"</span>
;push <span class="s2">"dhcp-option DNS 208.67.220.220"</span></code></pre></figure>

<p>取消注释 <code class="highlighter-rouge">push "dhcp-option DNS 208.67.222.222"</code> 和 <code class="highlighter-rouge">push "dhcp-option DNS 208.67.220.220"</code>。在完成时，这些条目应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">push <span class="s2">"dhcp-option DNS 208.67.222.222"</span>
push <span class="s2">"dhcp-option DNS 208.67.220.220"</span></code></pre></figure>

<p>此条目告知服务器将 <strong>OpenDNS</strong> 推送到已连接的客户端以进行 DNS 解析（在可行时）。使用推送可帮助避免 DNS 请求在 VPN 连接外部泄漏。但是，在客户端设备中指定所需的 DNS 解析器也很重要。虽然 <strong>OpenVPN</strong> 默认使用 <strong>OpenDNS</strong>，但是您可以使用任何喜欢的 DNS 服务。</p>

<p>以下是 <code class="highlighter-rouge">server.conf</code> 文件中要进行更改的最后区域：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># You can uncomment this out on
</span>
<span class="c"># non-Windows systems.
</span>
;user nobody
;group nogroup</code></pre></figure>

<p>取消注释 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code>。在完成时，该条目应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">user nobody
group nogroup</code></pre></figure>

<p>默认情况下，<strong>OpenVPN</strong> 以 root 用户身份运行，因此具有系统的完整 root 用户访问权。改为将 <strong>OpenVPN</strong> 配置为 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code>，这是无默认登录功能的非特权用户，通常为运行不信任的应用程序而保留，例如，面向 Web 的服务器。</p>

<p>现在，保存更改并退出 <strong>Vim</strong>。</p>

<h3 id="包转发">包转发</h3>

<p>我们需要 <code class="highlighter-rouge">sysctl</code> 设置，告知服务器内核将流量从客户端设备转发到因特网。否则，流量将在服务器上停止。通过输入以下命令在运行时期间启用包转发：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo </span>1 &gt; /proc/sys/net/ipv4/ip_forward</code></pre></figure>

<p>现在，我们需要使此转发永久化，从而使服务器重新引导后仍能够转发流量。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/sysctl.conf</code></pre></figure>

<p>在 <code class="highlighter-rouge">sysctl</code> 文件顶部附近，您将看到：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Uncomment the next line to enable packet forwarding for IPv4
</span>
<span class="c">#net.ipv4.ip_forward=1</span></code></pre></figure>

<p>取消注释 net.ipv4.ip_forward。在完成时，该行应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Uncomment the next line to enable packet forwarding for IPv4
</span>
net.ipv4.ip_forward<span class="o">=</span>1</code></pre></figure>

<p>保存更改并退出 <strong>Vim</strong>。</p>

<h3 id="简单防火墙-ufw">简单防火墙 (ufw)</h3>

<p><code class="highlighter-rouge">ufw</code> 是 iptables 的前端。设置 <code class="highlighter-rouge">ufw</code> 并不复杂。默认情况下，它包含在 Ubuntu 14.04 中，因此我们只需要执行一些规则和配置编辑，然后开启防火墙。有关 <code class="highlighter-rouge">ufw</code> 的更多用途的参考，请参阅<strong>如何在 Ubuntu 和 Debian Cloud Server 上使用 UFW 设置防火墙</strong>。</p>

<p>首先，将 <code class="highlighter-rouge">ufw</code> 设置为允许 SSH。在命令提示符中，输入：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw allow ssh</code></pre></figure>

<p>本教程将使用 UDP 上的 <strong>OpenVPN</strong>，因此 ufw 也必须允许 UDP 流量通过端口 1194。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw allow 1194/udp</code></pre></figure>

<p>同时还需要设置 <code class="highlighter-rouge">ufw</code> 转发策略。我们将在 ufw 主配置文件中执行此操作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/default/ufw</code></pre></figure>

<p>查找 <code class="highlighter-rouge">DEFAULT_FORWARD_POLICY="DROP"</code>。必须将此条目从 <code class="highlighter-rouge">DROP</code> 更改为 <code class="highlighter-rouge">ACCEPT</code>。在完成时，该条目应该类似如下：</p>
<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">DEFAULT_FORWARD_POLICY</span><span class="o">=</span><span class="s2">"ACCEPT"</span></code></pre></figure>

<p>接下来，我们将添加其他 <code class="highlighter-rouge">ufw</code> 规则，以用于连接的客户端的网络地址转换和 IP 伪装。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/ufw/before.rules</code></pre></figure>

<p>使 <code class="highlighter-rouge">before.rules</code> 文件的顶部类似以下示例。必须添加 <code class="highlighter-rouge">OPENVPN RULES</code> 的红色区域：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#
</span>
<span class="c"># rules.before
</span>
<span class="c">#
</span>
<span class="c"># Rules that should be run before the ufw command line added rules. Custom
</span>
<span class="c"># rules should be added to one of these chains:
</span>
<span class="c">#   ufw-before-input
</span>
<span class="c">#   ufw-before-output
</span>
<span class="c">#   ufw-before-forward
</span>
<span class="c">#
</span>

<span class="c"># START OPENVPN RULES
</span>
<span class="c"># NAT table rules
</span>
<span class="k">*</span>nat
:POSTROUTING ACCEPT <span class="o">[</span>0:0]
<span class="c"># Allow traffic from OpenVPN client to eth0
</span>
-A POSTROUTING -s 10.8.0.0/8 -o eth0 -j MASQUERADE
COMMIT
<span class="c"># END OPENVPN RULES
</span>

<span class="c"># Don't delete these required lines, otherwise there will be errors
</span>
<span class="k">*</span>filter</code></pre></figure>

<p>通过对 <code class="highlighter-rouge">ufw</code> 执行更改，我们现在可将其启用。在命令提示符中输入：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw <span class="nb">enable</span></code></pre></figure>

<p>启用 <code class="highlighter-rouge">ufw</code> 将返回以下提示符：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Command may disrupt existing ssh connections. Proceed with operation <span class="o">(</span>y|n<span class="o">)</span>?</code></pre></figure>

<p>回答 <code class="highlighter-rouge">y</code>。结果将为以下输出：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Firewall is active and enabled on system startup</code></pre></figure>

<p>检查 ufw 的主防火墙规则：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw status</code></pre></figure>

<p>该状态命令应返回以下结果：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Status: active

To                         Action      From
--                         ------      ----
22                         ALLOW       Anywhere
1194/udp                   ALLOW       Anywhere
22 <span class="o">(</span>v6<span class="o">)</span>                    ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span>
1194/udp <span class="o">(</span>v6<span class="o">)</span>              ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span></code></pre></figure>

<h2 id="步骤-2---创建认证中心以及服务器端证书和密钥">步骤 2 - 创建认证中心以及服务器端证书和密钥</h2>

<p><strong>OpenVPN</strong> 使用证书加密流量。</p>

<h3 id="配置和构建认证中心">配置和构建认证中心</h3>

<p>现在，设置自己的认证中心 (CA) 并为 <strong>OpenVPN</strong> 服务器生成证书和密钥。<strong>OpenVPN</strong> 支持基于证书的双向认证，这意味着客户端必须认证服务器证书并且服务器必须认证客户端证书，然后才能建立相互信任。我们将使用之前复制的 Easy RSA 脚本来执行此操作。</p>

<p>首先，复制 Easy-RSA 生成脚本。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp -r /usr/share/easy-rsa/ /etc/openvpn</code></pre></figure>

<p>然后，生成密钥存储目录。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir /etc/openvpn/easy-rsa/keys</code></pre></figure>

<p>Easy-RSA 具有一个变量文件，可进行编辑以创建为我们的人员、业务或选择的任何实体所专用的证书。将此信息复制到证书和密钥，这可在以后帮助识别密钥。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/openvpn/easy-rsa/vars</code></pre></figure>

<p>应根据您的首选项更改以下变量。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">KEY_COUNTRY</span><span class="o">=</span><span class="s2">"US"</span>
<span class="nb">export </span><span class="nv">KEY_PROVINCE</span><span class="o">=</span><span class="s2">"TX"</span>
<span class="nb">export </span><span class="nv">KEY_CITY</span><span class="o">=</span><span class="s2">"Dallas"</span>
<span class="nb">export </span><span class="nv">KEY_ORG</span><span class="o">=</span><span class="s2">"My Company Name"</span>
<span class="nb">export </span><span class="nv">KEY_EMAIL</span><span class="o">=</span><span class="s2">"sammy@example.com"</span>
<span class="nb">export </span><span class="nv">KEY_OU</span><span class="o">=</span><span class="s2">"MYOrganizationalUnit"</span></code></pre></figure>

<p>在相同的 vars 文件中，还要编辑以下显示的行。为简便起见，我们将使用 server 作为密钥名称。如果想要使用其他名称，那么还需要更新引用 <code class="highlighter-rouge">server.key</code> 和 <code class="highlighter-rouge">server.crt</code> 的 <strong>OpenVPN</strong> 配置文件。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">KEY_NAME</span><span class="o">=</span><span class="s2">"server"</span></code></pre></figure>

<p>我们需要生成 Diffie-Hellman 参数；这可能需要几分钟时间。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">openssl dhparam -out /etc/openvpn/dh2048.pem 2048</code></pre></figure>

<p>现在，我们来更改目录，以便能够直接在先前步骤 2 中将 Easy-RSA 脚本移至的位置进行工作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /etc/openvpn/easy-rsa</code></pre></figure>

<p>初始化 PKI（公共密钥基础架构）。请注意 <code class="highlighter-rouge">./varscommand</code> 前面的句点 (.) 和空格。这表示当前工作目录（源）。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">. ./vars</code></pre></figure>

<p>下面显示了上述命令的输出。因为我们尚未在密钥目录中生成任何项，所以无需关注警告。</p>

<p>注：如果您运行 <code class="highlighter-rouge">./clean-all</code>，那么我将在 <code class="highlighter-rouge">/etc/openvpn/easy-rsa/keys</code> 上执行 <code class="highlighter-rouge">rm -rf</code>。现在，我们将清除任何可能的旧密钥或示例密钥的工作目录，为新密钥让路。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./clean-all</code></pre></figure>

<p>此最终命令通过调用交互式 <strong>OpenSSL</strong> 命令构建认证中心 (CA)。输出将提示您确认先前输入到 Easy-RSA 变量文件中的专有名称变量（国家或地区名称、组织等）</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-ca</code></pre></figure>

<p>只需按 ENTER 键以通过每个提示。如果必须进行更改，那么可从提示符中执行。</p>

<h3 id="生成服务器证书和密钥">生成服务器证书和密钥</h3>

<p>现在，仍在 <code class="highlighter-rouge">/etc/openvpn/easy-rsa</code> 中工作，输入命令以构建服务器密钥。用红色标记服务器的位置是先前步骤 2 中在 Easy-RSA vars 文件中设置的导出 <code class="highlighter-rouge">KEY_NAME</code> 变量。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-key-server server</code></pre></figure>

<p>这将生成与运行 <code class="highlighter-rouge">./build-ca</code> 时类似的输出，并且您可以再次按下 ENTER 键以确认专有名称的每一行。但是，此时还有两个额外的提示符：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Please enter the following <span class="s1">'extra'</span> attributes
to be sent with your certificate request
A challenge password <span class="o">[]</span>:

An optional company name <span class="o">[]</span>:</code></pre></figure>

<p>这两个都应保留为空，因此只需按 ENTER 键以通过每个提示。</p>

<p>结束时的两个额外查询需要肯定 (<code class="highlighter-rouge">y</code>) 响应：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Sign the certificate? <span class="o">[</span>y/n]
1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]</code></pre></figure>

<p>上面最后一个提示符应如下完成：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Write out database with 1 new entries
Data Base Updated</code></pre></figure>

<h3 id="移动服务器证书和密钥">移动服务器证书和密钥</h3>

<p>OpenVPN 期望在 <code class="highlighter-rouge">/etc/openvpn</code> 中看到服务器的 CA、证书和密钥。让我们将它们复制到适当的位置。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp /etc/openvpn/easy-rsa/keys/<span class="o">{</span>server.crt,server.key,ca.crt<span class="o">}</span> /etc/openvpn</code></pre></figure>

<p>您可以使用以下命令验证复制操作是否成功：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ls /etc/openvpn</code></pre></figure>

<p>您应该看到服务器的证书和密钥文件。</p>

<p>此时，<strong>OpenVPN</strong> 服务器已做好准备。启动并检查状态。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service openvpn start
service openvpn status</code></pre></figure>

<p>该状态命令应返回以下结果：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">VPN <span class="s1">'server'</span> is running</code></pre></figure>

<p>祝贺您！您的 OpenVPN 服务器正常运行。</p>

<p>如果状态消息显示 VPN 未在运行，请查看 <code class="highlighter-rouge">/var/log/syslog</code> 文件以查找错误，例如：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Options error: --key fails with <span class="s1">'server.key'</span>: No such file or directory</code></pre></figure>

<p>此错误指示未正确地将 <code class="highlighter-rouge">server.key</code> 复制到 <code class="highlighter-rouge">/etc/openvpn</code>。请重新复制文件并重试。</p>

<h2 id="步骤-3---生成客户端证书和密钥">步骤 3 - 生成客户端证书和密钥</h2>

<p>到目前为止，我们已安装并配置了 <strong>OpenVPN</strong> 服务器，创建了认证中心，还创建了服务器自己的证书和密钥。在此步骤中，我们使用服务器 CA 为将连接到 VPN 的每个客户端设备生成证书和密钥。稍后，这些文件将安装到客户端设备，例如，笔记本电脑或智能手机。</p>

<h3 id="密钥和证书构建">密钥和证书构建</h3>

<p>理想情况下，连接到 VPN 的每个客户端都具有自己的唯一证书和密钥。此设置要优于生成一个通用证书和密钥以在所有客户端设备之间使用。</p>

<p><strong>注：</strong>默认情况下，<strong>OpenVPN</strong> 不允许使用相同证书和密钥从多个客户端同时连接到该服务器。（请参阅 <code class="highlighter-rouge">/etc/openvpn/server.conf</code> 中的 <code class="highlighter-rouge">duplicate-cn</code>。）</p>

<p>要为打算连接到 VPN 的每个设备创建单独的认证凭证，您应该为每个设备完成以下步骤，不过要将下面的名称 <code class="highlighter-rouge">client1</code> 更改为其他名称，例如，<code class="highlighter-rouge">client2</code> 或 <code class="highlighter-rouge">iphone2</code>。通过每个设备单独一个凭证，以后可根据需要在服务器上分别停用这些凭证。本教程中的其余示例将使用 <code class="highlighter-rouge">client1</code> 作为示例客户端设备名称。</p>

<p>如同处理服务器密钥一样，现在我们将为 <code class="highlighter-rouge">client1</code> 示例构建一个密钥。您仍应该使用 <code class="highlighter-rouge">/etc/openvpn/easy-rsa</code> 进行工作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-key client1</code></pre></figure>

<p>将再次要求您更改或确认专有名称变量以及这两个提示符（应保留为空）。按 Enter 键以接受默认值。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Please enter the following <span class="s1">'extra'</span> attributes
to be sent with your certificate request
A challenge password <span class="o">[]</span>:

An optional company name <span class="o">[]</span>:</code></pre></figure>

<p>如先前一样，构建过程结束时的这两项确认需要 (<code class="highlighter-rouge">y</code>) 响应：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Sign the certificate? <span class="o">[</span>y/n]
1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]</code></pre></figure>

<p>如果密钥构建成功，那么输出将再次为：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Write out database with 1 new entries
Data Base Updated</code></pre></figure>

<p>也应该将示例客户端配置文件复制到 Easy-RSA 密钥目录。我们将使用它作为将下载到客户端设备以进行编辑的模板。在复制过程中，我们将示例文件的名称从 <code class="highlighter-rouge">client.conf</code> 更改为 <code class="highlighter-rouge">client.ovpn</code>，因为 <code class="highlighter-rouge">.ovpn</code> 文件扩展名是客户端期望使用的扩展名。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf /etc/openvpn/easy-rsa/keys/client.ovpn</code></pre></figure>

<p>您可以为每个客户端再次重复此部分，将 <code class="highlighter-rouge">client1</code> 全部替换为相应的客户端名称。</p>

<h3 id="将证书和密钥传输到客户端设备">将证书和密钥传输到客户端设备</h3>

<p>请回想一下上述步骤，我们创建了客户端证书和密钥，并且将它们存储在 <strong>OpenVPN</strong> 服务器的 <code class="highlighter-rouge">/etc/openvpn/easy-rsa/keys</code> 目录中。</p>

<p>对于每个客户端，我们需要将客户端证书、密钥和概要文件模板文件传输到本地计算机或其他客户端设备上的文件夹。</p>

<p>在此示例中，我们的 <code class="highlighter-rouge">client1</code> 设备要求服务器上的证书和密钥位于：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/openvpn/easy-rsa/keys/client1.crt
/etc/openvpn/easy-rsa/keys/client1.key</code></pre></figure>

<p><code class="highlighter-rouge">ca.crt</code> 和 <code class="highlighter-rouge">client.ovpn</code> 文件对于所有客户端均相同。也要下载这两个文件；请注意，<code class="highlighter-rouge">ca.crt</code> 文件位于与其他项不同的目录中。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/openvpn/easy-rsa/keys/client.ovpn
/etc/openvpn/ca.crt</code></pre></figure>

<p>虽然用于完成此传输的确切应用程序将取决于您的选项和设备的操作系统，但是您可能想要应用程序在后端使用 SFTP（SSH 文件传输协议）或 SCP（安全复制）。这会通过加密连接来传输客户端的 VPN 认证文件。</p>

<p>以下是使用 <code class="highlighter-rouge">client1</code> 示例的 SCP 命令示例。它将文件 <code class="highlighter-rouge">client1.key</code> 放入本地计算机上的 Downloads 目录。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">scp root@your-server-ip:/etc/openvpn/easy-rsa/keys/client1.key Downloads/</code></pre></figure>

<p>以下是用于安全地将文件从服务器传输到本地计算机的多个工具和教程：</p>

<p>WinSCP
如何使用 SFTP 以通过远程服务器安全地传输文件
如何使用 Filezilla 以在 VPS 上安全地传输和管理文件</p>

<p>在此部分结束时，确保客户端设备上具有以下四个文件：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">client1.crt
client1.key
client.ovpn
ca.crt</code></pre></figure>

<h2 id="步骤-4---为客户端设备创建统一的-openvpn-概要文件">步骤 4 - 为客户端设备创建统一的 OpenVPN 概要文件</h2>

<p>管理客户端文件的方法有多种，但是最简单的方法就是使用统一的概要文件。通过修改 client.ovpn 模板文件以包含服务器的认证中心和客户端的证书及其密钥来创建此文件。在合并后，只需要将单个 client.ovpn 概要文件导入到客户端的 OpenVPN 应用程序。</p>

<p>我们将在所有客户端文件下载到的本地计算机上为 client1 设备创建单个概要文件。此本地计算机可以本身就是目标客户端，也可以只是用于合并认证文件的临时工作区域。应复制并重命名原始 client.ovpn 模板文件。如何执行此操作将取决于本地计算机的操作系统。</p>

<p>注：复制的 client.ovpn 的名称无需与客户端设备相关。客户端 OpenVPN 应用程序将使用此文件名作为 VPN 连接本身的标识。您应该将 client.ovpn 复制为希望 VPN 的名称标签在操作系统中成为的任何项。例如：work.ovpn 将标识为 work，school.ovpn 将标识为 school 等。</p>

<p>在此教程中，我们将 VPN 连接命名为 Test1，因此 Test1.ovpn 将是从此处开始引用的文件名。在命名后，我们将在文本编辑器中打开 Test1.ovpn；您可以使用任何喜欢的编辑器。</p>

<p>第一个须注意的区域涉及 Droplet 的 IP 地址。在文件顶部附近，更改 my-server-1 以反映您的 VPN 的 IP。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># The hostname/IP and port of the server.
</span>
<span class="c"># You can have multiple remote entries
</span>
<span class="c"># to load balance between the servers.
</span>
remote my-server-1 1194</code></pre></figure>

<p>接下来，查找以下显示的区域并取消注释 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code>，就如同在步骤 1 的 <code class="highlighter-rouge">server.conf</code> 中执行的操作。注：此步骤不适用于 Windows，因此您可以跳过此步骤。在完成时，该条目应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Downgrade privileges after initialization (non-Windows only)
</span>
user nobody
group nogroup</code></pre></figure>

<p>以下指定的区域需要注释掉所显示的三行，从而可改为直接在 <code class="highlighter-rouge">Test1.ovpn</code> 文件中包含证书和密钥。在完成时，应该类似如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># SSL/TLS parms.
</span>
<span class="c"># . . .
</span>
<span class="c">#ca ca.crt
</span>
<span class="c">#cert client.crt
</span>
<span class="c">#key client.key</span></code></pre></figure>

<p>要将单个文件合并到一个统一的概要文件中，请使用基本的类似于 XML 的语法，将 <code class="highlighter-rouge">ca.crt</code>、<code class="highlighter-rouge">client1.crt</code> 和 <code class="highlighter-rouge">client1.key</code> 文件的内容直接粘贴到 <code class="highlighter-rouge">.ovpn</code> 概要文件中。文件末尾的 XML 应该采用以下形式：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;ca&gt;
<span class="o">(</span>insert ca.crt here<span class="o">)</span>
&lt;/ca&gt;
&lt;cert&gt;
<span class="o">(</span>insert client1.crt here<span class="o">)</span>
&lt;/cert&gt;
&lt;key&gt;
<span class="o">(</span>insert client1.key here<span class="o">)</span>
&lt;/key&gt;</code></pre></figure>

<p>在完成时，文件末尾应类似于以下缩写示例：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;ca&gt;
-----BEGIN CERTIFICATE-----
. . .
-----END CERTIFICATE-----
&lt;/ca&gt;

&lt;cert&gt;
Certificate:
. . .
-----END CERTIFICATE-----
. . .
-----END CERTIFICATE-----
&lt;/cert&gt;

&lt;key&gt;
-----BEGIN PRIVATE KEY-----
. . .
-----END PRIVATE KEY-----
&lt;/key&gt;</code></pre></figure>

<p><code class="highlighter-rouge">client1.crt</code> 文件中包含一些额外的信息；仅包含整个文件也不错。</p>

<p>保存更改并退出。现在，我们已有统一的 <strong>OpenVPN</strong> 客户端概要文件以配置 <code class="highlighter-rouge">client1</code>。</p>

<p>从此处开始，我们只需要将 <code class="highlighter-rouge">.ovpn</code> 文件提供给我们所选的 VPN 客户端，不论是 Tunnelblick、Viscosity（这两个都针对 OSX）还是您选择的客户端。</p>

<p>但是，在测试之前，我们需要确保准备好 OpenStack 以允许此流量经过。让我们看下我们的云主机：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova list +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+
| ID | Name | Status | Task State | Power State | Networks | +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+
| 4f239959-be46-4fd3-963a-7c70db305d74 | jkbastion | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.72, 173.247.105.20 | | 0d3c2002-ea02-4311-8142-b622f05407b4 | jkinternal-ssh | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.68 | | 746e0ef8-48ee-4867-9c9d-e3d53a7e68bc | jkinternal-web | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.69 | +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+</code></pre></figure>

<p>由于空间限制撇开格式不谈，我们在此有 3 个云主机：jkbastion（使用浮动 IP）以及 jkinternal-ssh 和 jkinternal-web（这两个很明显与 Web 和 SSH 相关，其中 Web VM 正在运行 nginx）。</p>

<p>另外，让我们看下安全组，以确保允许 UDP 1194 连到堡垒主机：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova secgroup-list
+--------------------------------------+-----------+------------------------+
| Id                                   | Name      | Description            |
+--------------------------------------+-----------+------------------------+
| 55608023-c88e-4446-b67c-b64e741df5cb | default   | default                |
| f33a4643-4440-4649-8ba6-aef09b00b7f7 | jkbastion | bastion security group |
| dcec8a37-9541-4286-a4ad-0290a44efbae |  jksec    | Jason Kennedy<span class="s1">'s shiz   |
+------------------------------ --------+-----------+------------------------+</span></code></pre></figure>

<p>jkbastion 的详细信息：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova secgroup-list-rules f33a4643-4440-4649-8ba6-aef09b00b7f7
+-------------+-----------+---------+-----------+--------------+
| IP Protocol | From Port | To Port | IP Range  | Source Group |
+-------------+-----------+---------+-----------+--------------+
| tcp         | 22        | 22      | 0.0.0.0/0 |              |
| udp         | 1194      | 1194    | 0.0.0.0/0 |              |
+-------------+-----------+---------+-----------+--------------+</code></pre></figure>

<p>就是这样！通过连接 VPN，您应该能够找到提供所需服务的内部虚拟机。</p>

      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/help-documentation/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/help-documentation/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/help-documentation/js/scripts.js"></script>

  </body>

</html>
