<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Cloud 101 - 优化的负载均衡</title>
  <meta name="description" content="在云上运行工作负载时，您通常希望将负载分布在两台或更多台虚拟机 (VM) 主机上。其中一个原因可能是为了提供冗余，例如，当您正在运行任务关键型数据库应用程序时。另一个原因可能是您想要将工作负载扩展到多台机器上，从而为更多的客户端提供服务。由于单个 VM 可能会（将要）失败，因此，在云上运行时，故障设计与自动提供服...">

  <link rel="stylesheet" href="/help-documentation/css/main.css">
  <link rel="canonical" href="/help-documentation/zh_CN/gettingstarted/userguides/Optimized_Load_Balancing/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/help-documentation/zh_CN/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/help-documentation/zh_CN/"><img src="/help-documentation/img/zh_CN/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/help-documentation/img/zh_CN/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/help-documentation/img/zh_CN/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /help-documentation/gettingstarted/userguides/Optimized_Load_Balancing/ ">en</a> |
    
      <a  href=" /help-documentation/fr/gettingstarted/userguides/Optimized_Load_Balancing/ ">fr</a> |
    
      <a  href=" /help-documentation/de/gettingstarted/userguides/Optimized_Load_Balancing/ ">de</a> |
    
      <a  href=" /help-documentation/ja/gettingstarted/userguides/Optimized_Load_Balancing/ ">ja</a> |
    
      <a style="font-weight: bold;" href=" /help-documentation/zh_CN/gettingstarted/userguides/Optimized_Load_Balancing/ ">zh_CN</a> |
    
      <a  href=" /help-documentation/zh_TW/gettingstarted/userguides/Optimized_Load_Balancing/ ">zh_TW</a> |
    
      <a  href=" /help-documentation/pt_BR/gettingstarted/userguides/Optimized_Load_Balancing/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/help-documentation/zh_CN/gettingstarted">Getting Started (38)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/connect-to-openvpn-server/">连接到 OpenVPN 服务器</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/openvpn-setup/">在云主机上设置 OpenVPN 服务器</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/blue-box-cloud-components/">Bluemix Private Cloud 组件</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/detaching-volume/">在拆离云硬盘之前应该做什么？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/python-environment-primer/">虚拟 Python 环境与您：开发人员入门</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/FAQ/">技术常见问题解答</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Building_Blocks/">IBM Bluemix Private Cloud 构建块 (Community Edition)</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/RHOSP_Building_Blocks/">使用 Red Hat 的 IBM Bluemix Private Cloud 的构建块</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/RHOSP_Product_Overview/">使用 Red Hat 的 IBM Bluemix Private Cloud - 产品概述</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/general_product_overview/">常规产品概述</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Instance_Resize/">调整云主机大小（非实时）</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">使用专用网络设置多个云环境之间的网络连接</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commontech/Windows_License_Activation/">Windows 激活客户指南</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 7 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/adding-removing-subscribers/">添加或除去问题单的订户</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/view-my-bill/">如何查看我的账单？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/report-issue/">如何报告问题？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/escalating-a-ticket/">如何上报问题单？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/status-pages/">Bluemix Private Cloud 状态页面</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">从 Blue Box 转移域</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Box_Panel/">Box Panel 用户指南</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel、站点控制器和 IBM Bluemix Private Cloud Local</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/qemu_article/">加强 OpenStack - QEMU 和云</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Improving_Cloud_Performance/">加强 OpenStack II - 提高云性能</a>
                </li>
              
         
             
                <li>
                <a class="page-link--active"  href="/help-documentation/zh_CN/gettingstarted/userguides/Optimized_Load_Balancing/">Cloud 101 - 优化的负载均衡</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">云镜像用户指南 (IBM Bluemix Private Cloud with Red Hat)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">云镜像用户指南 (Community Edition)</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/gettingstarted/userguides/Image_Release_Notes/">IBM Bluemix Private Cloud 镜像发行说明</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.0.1_Point_Release/">客户 3.0.1 次要发行版发行说明</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.1.1_Point_Release/">客户 3.1.1 次要发行版发行说明</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_4.0.0.0r_Release_Notes/">发行说明 4.0.0.0r</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_2.1.1_Point_Release/">发行说明 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/release_notes_2.1_for_customers/">发行说明 2.1</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.0.0_Release_Notes/">发行说明 3.0.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_CN/releasenotes/Customer_3.1.0_Release_Notes/">发行说明 3.1.0</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/libvirt_error/">云主机处于错误状态：libvirt 错误</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/ssh-too-long-error/">为何通过 SSH 连接到云主机需要花费 4 - 5 秒时间？</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/ping-instance-error/">为何无法通过 SSH 连接到云主机或对其执行 ping 操作？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/nova-microversions-error/">错误：运行 Nova 命令时发生“服务器不支持微版本”错误</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Bad_Availability_Zone/">Cloud Foundry：无效可用性区域错误</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/failed_to_create_router/">尝试创建路由器失败</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/How_many_connections_can_HAProxy_handle/">HAProxy 可处理多少个并发连接？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/CLI-authentication-error/">在 Windows 上使用任何 OpenStack CLI 时，我收到认证失败错误</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/floating-ips-error/">分配给我的所有浮动 IP 为何都不可用？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/horizon-delete-error/">为何无法从 Horizon 仪表板中删除我的项目/租户？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/no-valid-host-error/">错误：找不到有效主机</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Cannot_See_New_vCPUs/">Horizon 中为何没有列出我的新 vCPU？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/failure_prepping_block_device/">错误：准备块设备失败</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/delete_security_group/">为何无法删除安全组？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Troubleshooting_FAQ/">故障诊断常见问题解答</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Unable_to_ping_tenant_network/">为何无法在租户网络中执行 ping 操作？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/troubleshooting/Why_No_vIP_Failover_With_L2pop/">当想要 vIP 云主机执行故障转移时为何无法使用 L2pop？</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/launch-instance-from-volume/">如何从云硬盘启动云主机</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/import-vhd-image-lvm/">导入针对根目录使用 Linux 云硬盘管理的 VHD 镜像</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/OpenStack_network_concepts/">OpenStack 网络概念</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">使用特定的固定 IP 创建云主机</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Mitaka_CLI_notes/">OpenStack Mitaka CLI 注释</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Why-Choose-OpenStack/">为何选择 OpenStack？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/openstack-storage-concepts/">OpenStack 存储概念</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Ursula_and_OpenStack/">Ursula 和 OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/Creating_Instances_With_Static_IP/">如何使用静态 IP 创建云主机</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/quotas/">配额</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/How_to_Isolate_Tenants/">如何隔离租户（项目）</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/userdocs/external-reference-material/">外部参考材料</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/api/floating-ip-address/">使用 OpenStack API 创建浮动 IP 地址</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/openstack/api/openstack-api-getting-started/">OpenStack API 入门</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/openstack/api/OpenStack_Client_Versions/">OpenStack 客户端版本需求</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/creating-additional-networks-with-horizon/">使用 Horizon 面板在 OpenStack 中创建其他网络</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/Making_Snapshots_in_Horizon/">使用 Horizon 创建快照</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/allocate-floating-ip/">分配公共（浮动）IP 并将其连接到云主机</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/create-volume-from-horizon/">从 Horizon 仪表板中创建云硬盘</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/horizon-for-administrators/">Horizon - 适用于管理员</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/launch-instance-from-horizon/">从 Horizon 仪表板中启动云主机</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/launch-instance-from-horizon_newton/">从 Horizon 仪表板中启动云主机（OpenStack Newton 发行版）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/set-reverse-dns/">如何为 IBM Bluemix Private Cloud 云主机设置反向 DNS (PTR) 记录？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/horizon/using-horizon/">使用 Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/horizon/Horizon_troubleshooting_FAQ/">Horizon 故障诊断常见问题解答</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/windows-user-and-password/">我如何在 OpenStack 中的 Windows 云主机上设置初始用户名和密码？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/CLI-create-public-instance/">如何使用命令行创建云主机并使其公开可用</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Nova_boot_speed/">当我引导虚拟机时后台发生了些什么，如何加速引导？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Restrict_Floating_IP/">我如何限制浮动 IP？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/config_drive_for_instances/">我能否使用配置驱动器创建云主机并向其添加文件？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/create-vm-with-volumes/">我如何使用 Nova 命令行客户端创建云主机？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/define-flavor-vcpu/">我如何定义云主机类型 vCPU 拓扑？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/maximum-flavor-spec/">我可为云主机类型设置的最大规格是什么？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/nova/migrate-instance/">将云主机迁移到新的云</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/Metadata_service_FAQ/">OpenStack Neutron 和 Nova 中的元数据服务</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/nova/hypervisor-statistics/">我如何获取虚拟机管理器统计信息？</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/network_ip_availability/">我如何检查自己的网络 IP 可用性？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">如何隔离连接到共享路由器的项目网络？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/time-ip-associated-with-instance/">我如何查找浮动 IP 与云主机关联或解除关联的时间？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Load_Balancing_Methods/">负载均衡方法</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Multi-tier_Router_Configuration/">IBM Bluemix Private Cloud 中的多层路由器配置</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/set-up-dns-records/">我如何设置指向 OpenStack 云主机的 DNS 记录？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/routing_internal_traffic_between_projects/">在项目之间路由内部流量</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/add-ip-to-instance/">将特定固定专用 IP 添加到云主机中</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-dns.for-instances/">为云主机配置 DNS</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-multi-nics/">为您自己的云镜像配置多个网络接口</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/configure-ha-ip/">如何配置高度可用的 IP</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/creating-virtual-networks/">在 IBM Bluemix Private Cloud 上创建虚拟网络</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/How_Can_I_See_My_IPs/">我如何查看自己的 IP？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/How_to_update_DNS/">我如何更新 DNS？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/vpn-vlan-directlink/">VPN, VLAN 和直接链接</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/BYOFIP_support/">在 IBM Bluemix Private Cloud 与客户站点之间使用 BYOFIP 连接</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Intro_to_LBaaS/">负载均衡器即服务 (LBaaS) 简介</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Security_groups_CLI/">使用 CLI 设置安全组</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/neutron/Network_Use_Cases_White_Paper/">IBM Blue Box 网络用例</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/neutron/Where_Are_These_IPs/">前两个 IP 位于何处？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/glance/FAQ_Working_with_Windows_Images/">使用 Windows 镜像的常见问题解答</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/compatible-glance-images/">是否有用于 Glance 的官方 OpenStack 兼容镜像列表可以下载？（CentOS、Ubuntu 等）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/disk-capacity-constraints/">磁盘容量限制</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/Image_Properties_on_Power/">Power 计算节点上 Glance 镜像的最佳设置</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/glance/imagesnapshot/">镜像和快照之间的区别</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/read-only-cinder-error/">什么会导致只读 Cinder 云硬盘以及如何修复？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/cinder-volume-stuck/">Cinder 云硬盘卡住</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/alternative_method_for_volume_encryption/">块存储器云硬盘加密的替代方法（使用 Ubuntu 访客 VM）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Bug_Creating_Encrypted_Volumes/">不支持使用 Cinder 创建加密云硬盘</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/cinder/Managing_block_storage/">管理块存储器</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/cli-create-volume/">使用命令行创建云硬盘</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/create-volume-from-snapshot/">是否支持从云主机快照创建云硬盘？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/resize_cinder_volume/">我如何调整 Cinder 云硬盘的大小？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/supported_volume_types/">云主机中支持哪种 Cinder 云硬盘类型？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Ephemeral_to_Cinder/">如何从临时磁盘移至 Cinder 存储器</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/Force_snapshot_on_attached_volume/">如何在连接的云硬盘上强制使用快照</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/cinder/cinder-failed-connection-error/">如果 Cinder 客户端返回“错误：无法建立连接”消息且连接失败，我该怎么做？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/oidc-federation/">IBM Bluemix Private Cloud 上的 OpenID Connect 联合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/saml-federation/">IBM Bluemix Private Cloud 上的 Keystone SAML 联合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/RBAC_Definitions/">基于角色的访问控制</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/Managing_Users_and_Projects/">管理用户和项目</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/k2k-federation/">IBM Bluemix Private Cloud 上的 Keystone to Keystone (K2K) 联合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/tenants-security-groups-keystone/">项目和安全组</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/keystone/custom-domains-keystone/">Keystone V3 中的自定义域</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/keystone/Getting_Started_with_K2K_Identity/">Keystone 联合身份入门</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/heat/Getting_Started_With_Heat/">Heat 模板入门</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/autoscaling-with-heat/">使用 Heat 进行自动缩放</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_CN/heat/Deploying_apps_with_UCD/">使用 IBM UrbanCode Deploy 和 IBM Bluemix Private Cloud 部署应用程序</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using_heat_for_load_balancer/">使用 Heat 为服务器配置负载均衡器</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using-ucd-ucdp/">将 IBM Urban Code Deploy 和 IBM Bluemix Private Cloud 结合使用</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/heat/using_heat_for_deployment/">将 Heat 与自签名证书结合使用</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_CN/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_CN/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_CN/ceilometer/compatible-glance-images/">是否支持从云主机快照创建云硬盘？</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        Cloud 101 - 优化的负载均衡

        
        </h1>




        
        <div class="post-data">
          <img src='/help-documentation/img/zh_CN/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Dustin Lundquist and Leslie Lundquist </span>
              <span class="dot">&#9679;</span>
              <span class="date"> May 17, 2017</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>load balancing</p></li>
                  
                    <li class="tag"><p>负载均衡</p></li>
                  
                    <li class="tag"><p>HA</p></li>
                  
                    <li class="tag"><p>arp 响应程序</p></li>
                  
                    <li class="tag"><p>MAC 移动</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <p>在云上运行工作负载时，您通常希望将负载分布在两台或更多台虚拟机 (VM) 主机上。其中一个原因可能是为了提供冗余，例如，当您正在运行任务关键型数据库应用程序时。另一个原因可能是您想要将工作负载扩展到多台机器上，从而为更多的客户端提供服务。
由于单个 VM 可能会（将要）失败，因此，在云上运行时，故障设计与自动提供服务同样重要。</p>

<p>大多数云客户都想要获得高可用性 (HA) 服务。通常，为了使工作负载以 HA 方式运行，需要将其托管在两个（或更多个）完全独立的（硬件）机器上，最好是托管在两个独立的可用性区域（例如，<em>数据中心</em>）中，这样，当其中一个发生故障时，另一个可以继续提供服务。如果一台机器发生故障，那么将“故障转移”到另一台机器上，这意味着该服务可以继续运行，这就是所谓的“HA”服务（几乎一直可用）。</p>

<h3 id="了解有关-ha-的更多内容">了解有关 HA 的更多内容</h3>

<p>HA 不一定保证 100% 可用，其可用性只是比单台服务器要高。下面是一个示例：如果您有两台服务器，并且每台服务器的可靠性只有 70% ，这表示在任何时候，每台服务器都有 70% 的可能能够成功处理请求，那么这两台服务器在理想的 HA 配置下的可靠性为 91% 。如何计算出这个数字？第一台服务器成功处理请求的可能性为 70% ，加上第二台服务器成功处理请求的可能性（剩余 30% 的 70% ），最后等于 91%。 也许您应该放弃整个设置，或至少获得具有这种可靠性级别的更可靠的服务器！…但是，“更好的”可用性还可以再好一些。</p>

<h3 id="ha-和负载均衡">HA 和负载均衡</h3>

<p>在运行密集型工作负载时，第一个需要实现 HA 的地方通常是负载均衡器 (LB)，这样一来，不仅您可以访问这个地方（公认的目的地），而且您的应用程序也可以经常访问这个地方，即使发生故障转移也是如此。
例如，如果要在 HA 方式下运行数据库，那么您需要了解如何在两个 VM 之间复制数据库，然后将这两个 VM 放在同一个负载均衡器后面，以便在它们之间更均匀地分布网络流量。在云中，您不需要保证每次都访问同一个 VM，只需要知道数据库始终可访问且保持一致状态。</p>

<p>在云环境中，通常最好是使用云提供商提供的负载均衡器。如果您尝试创建自己的 LB 模式，这可能会引起不必要的麻烦，因为覆盖网络和软件定义网络 (SDN) 最终只会与云提供商的 HA IP 方案进行低级别交互。通过使用服务提供商的 LB，就将这个问题转嫁给服务提供商，因此不必了解其底层网络中的 LB。
例如，Amazon 云使用弹性负载均衡器 (ELB)，这是一个不错的解决方案，因此，其客户不需要自己实现负载均衡。</p>

<p>综上所述，如果您发现自己需要实现负载均衡，那么在云环境中可使用 3 种有效的负载均衡方法。每种方法都有各自的优点和缺点。</p>

<h3 id="定义的负载均衡3-种基本方法">定义的负载均衡：3 种基本方法</h3>

<p>从本质上讲，负载均衡即是要管理（或更改）服务名称（如数据库服务）与传递该服务的主机的可达性之间的映射。如果可通过以太网使用服务器，并且想要通过 DNS 发出请求，那么可以使用三种基本方法来更改该映射，也可以将其视为途中三个基本位置的“中断”。您可能更改：</p>

<ul>
  <li>DNS 名称和 IP 地址之间的映射</li>
  <li>IP 地址和以太网 MAC 地址之间的映射</li>
  <li>以太网 MAC 地址和交换机端口之间的映射</li>
</ul>

<p>[注意：如果要直接连接到 IP，请勿使用 DNS。虽然这更便于管理您的服务。]</p>

<p>下表总结了这三个选项。如果您只是看一看这个表就能理解其含义，那么可能不需要阅读本文的其余部分。
我们来看一看吧！对于其他人，表格下方附有相应的解释，可供其阅读。开始吧！</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th>MAC 移动 (#3)</th>
      <th>ARP 移动 (#2)</th>
      <th>GLB（全局）(#1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>关联</td>
      <td>MAC -&gt; 端口</td>
      <td>IP -&gt; MAC</td>
      <td>域名 -&gt; IP</td>
    </tr>
    <tr>
      <td>更新 MSG</td>
      <td>免费 ARP</td>
      <td>免费 ARP</td>
      <td>无（DNS 响应）</td>
    </tr>
    <tr>
      <td>谁需要采取行动</td>
      <td>HA 服务器间路径中的交换机</td>
      <td>本地 VLAN 中的路由器和主机</td>
      <td>客户端，通过高速缓存 DNS 解析器</td>
    </tr>
    <tr>
      <td>示例实现形式</td>
      <td>OpenBSD CARP，Cicso HSRP</td>
      <td>uCARP</td>
      <td>F5 GLB</td>
    </tr>
    <tr>
      <td>更新的表</td>
      <td>交换机 MAC 表</td>
      <td>主机 ARP 高速缓存/表</td>
      <td>主机和解析器 DNS 高速缓存</td>
    </tr>
    <tr>
      <td>问题</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>提供者 MAC 过滤器，提供者 IP 过滤器</td>
      <td>提供者 IP 过滤器，更有可能在子网主机之间出现脑裂</td>
      <td>解决方案在全局应用程序（而非在局部子网上）中效果最佳</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h4 id="选项-1更改-dns-名称到-ip-的映射">选项 1：更改 DNS 名称到 IP 的映射</h4>

<p>全局负载均衡 (GLB) 和 DNS 循环法是第一个选项的例子。GLB 是一种智能 DNS 解析器，它在选择要返回的 DNS 资源记录时会考虑服务器可用性、服务器负载和/或客户端以及服务的地理邻近性。</p>

<p>循环法 DNS 是一种较为简单的方法，在这种方法中，DNS 解析器会按资源记录顺序循环，以便按“循环法”(RR) 顺序分配连续的请求。例如，假设客户端尝试其首选地址系列（IPv4 或 IPv6）中的第一个 RR 地址。如果无法在超时期限（通常为 2 秒）内进行连接，那么客户端可能会尝试连接到解析器返回的其他地址。</p>

<p>这种 DNS 全局负载均衡方法往往“胜过”其他方法，并可以与其他方法结合使用。在几乎所有云解决方案上都可以安全地使用这种方法 - 例如，在您的数据中心遍布全球的情况下。它可以处理其他方法所能处理的负载均衡问题，但问题规模有很大区别。</p>

<h4 id="选项-2更改-ip-地址到以太网-mac-地址的映射">选项 2：更改 IP 地址到以太网 MAC 地址的映射</h4>

<p>此选项有时称为“ARP 移动”。如果使用 ARP 移动，组中的每个主机都有一个 MAC 地址，但每个主机都可接管这个共享的 HA IP 地址。此共享 HA IP 地址称为通过免费 ARP 请求来关联的新 MAC 地址，并且必须将该更新发送到局部子网中的所有其他主机。（这通常是一个 VLAN，通常是但不一定是主机到 IP 地址的 1：1 映射。）在这种情况下，从子网外部发送数据的主机将通过路由器发送该更新，所以路由器需要了解此 IP 的已更新 MAC 地址（下一个中继段）。</p>

<p>ARP 移动存在的问题是，当网络拥塞时，您可获得部分故障转移，但这并不是所期望的状态。在这种状态下，会将部分请求转到每个 HA 服务器，因为一些主机会将请求发送到旧目的地 - 当没有传播更新时，就可能发生这种情况，因为当子网中的某些链路过于拥塞时就可能丢弃请求。另外，因为每个主机都会响应免费 ARP 更新，所以在进行这类更新时可能会耗尽每台主机上的资源。</p>

<p>请注意，ARP 移动方法在 OSI 模型的 L2/L3 边界上运行。</p>

<h4 id="选项-3更改以太网-mac-地址到交换机端口的映射">选项 3：更改以太网 MAC 地址到交换机端口的映射</h4>

<p>对于 MAC 移动选项，虚拟 MAC 地址将显示为 HA 组中活动节点的附加 MAC。“活动”主机将接收发送给共享 MAC 地址的帧，以及发送给本地 MAC 地址的帧。</p>

<p>如果有一个小型 L2 网络，并且此网络使用生成树等协议将几个交换机连接在一起，那么 MAC 移动方法非常适合此网络。（即，使用冗余连接。）在这种情况下，MAC 移动方法通常更加可靠且可预测。（但此时是在硬件上运行。）如果想要在他人的硬件上运行，请让他们阅读此文章，并询问他们的建议。（如果他们不知道，您可能需要查找其他提供商！）</p>

<p>请注意，MAC 移动模型在 OSI 模型的 L2/L1 边界上运行。</p>

<h3 id="通过这两种方法使用免费-arp-信号">通过这两种方法使用免费 ARP 信号</h3>

<p>区分后两种方法时，让人感到困惑的是，MAC 移动和 ARP 移动都使用免费 ARP 响应来完成其 LB 功能。
事实上，它们使用相同的信号来实现不同的目的；但是，在收到免费 ARP 信号时，这两种方法会采取不同的操作。（之所以称为免费，是因为没有人请求它，它是通过广播发出。）</p>

<h4 id="mac-移动">MAC 移动</h4>

<p>MAC 移动方法使用免费 ARP 作为信号发送方法，但接收免费 ARP 的主机已经知道此新信息 - 只更新了“老化清零”字段。已经在其交换机表中输入了该信息，因此，此更新仅仅重置了老化计时器，而现有条目“再次更新”。</p>

<p>注意：（在 ARP 表和 MAC 地址表中）交换机和主机的所有条目均老化清零 - 根据供应商的不同，条目持续时间从 5 分钟到 4 小时不等。</p>

<p>因此，总而言之，对于 MAC 移动方法，主机只是忽略消息或重置交换机表中的老化值。</p>

<h4 id="arp-移动">ARP 移动</h4>

<p>但是，在使用相同示例的 ARP 移动方法中，交换机将表明：“这个帧来自我不知道的端口”，所以它会进行更新 - 也就是说，交换机知道该帧的源地址到达非预期端口，因此它相应地更新了自己的 MAC 地址表。</p>

<h3 id="sdn-上为何不适合使用-arp-移动和-mac-移动">SDN 上为何不适合使用 ARP 移动和 MAC 移动？</h3>

<p>由于下列标准原因，在软件定义网络 (SDN) 中无法明显扩展这些方法：潜在性能问题、潜在安全问题、导致故障转移速度缓慢的潜在传播延迟以及可能出现的脑裂情况。</p>

<h4 id="性能和安全性">性能和安全性</h4>

<p>如果有一个基于控制器的 SDN，并且您只希望建立 L2 网络连接，那么在传至控制面板的过程中一直会发生 MAC 移动。然后，它将重新计算路径，并将其推回到交换机。</p>

<p>该活动是计算密集型活动，可成为 DoS 攻击。其速率通常受限，也应该受限。</p>

<h4 id="传播延迟和边缘情况">传播延迟和边缘情况</h4>

<p>此外，与传统的分布式学习网络（如，连接在一起的普通以太网交换网络）不同，本地交换机需要更长时间来处理这种学习。在传统网络中，新信息像波纹一样传播 - 不断以更大的周长向外传播。这是一波新状态。有人可能将其称为传播波纹，这比波纹的线性化更强一些。</p>

<p>由于传播延迟，所以存在一些边缘情况，即部分交换机已经知道 HA 故障转移的新目标地址，但并不是所有交换机都知道。当更新的信息像波纹一样传播时，这些边缘情况更可预测且更易于管理。例如，两个交换机不太可能在它们之间形成帧环路，每个交换机都认为另一个交换机需要更新。（该活动将耗尽这些交换机之间链路上的所有可用带宽！）</p>

<p>最后，SDN 可能包含或不包含 L3 网络。如果包含，ARP 移动将以类似方式影响 SDN 控制的路由器。尤其是，需要花费更长时间来处理更新。因为给定子网的 L2 光纤网中的路由器通常少于交换机，所以情况通常并没有那么糟糕 - 我们主要关注的是如何最大限度缩短更新所需的时间（通过像波纹一样向外传播波纹），当然，这与完成故障转移所需的时间相同。</p>

<h4 id="已启用-arp-响应程序的-sdn">已启用 ARP 响应程序的 SDN</h4>

<p>某些 SDN 具有 ARP 响应程序（例如，与 OpenStack Neutron 中一样），因此它们可能使用旧信息或不一致的信息来作出响应。这种情况突出了 ARP 移动方法的常见缺点，这有可能导致脑裂。例如，如果您已设置了双主数据库，那么在 OpenStack Neutron 中非常不适合使用此方法。幸运的是，ARP 响应程序是 Neutron 中的一个选项，因此，可在需要时禁用此选项。</p>

<p>有关在 Neutron 中进行负载均衡的更多信息，请参阅<a href="/help-documentation/zh_CN/neutron/Intro_to_LBaaS/">相关介绍性文章</a>以及用于描述<a href="/help-documentation/zh_CN/neutron/Limitations_of_LBaaSv2/">您可能遇到的一些限制</a>的文章。</p>

<h3 id="一种退化情况arp-负载均衡">一种退化情况：ARP 负载均衡</h3>

<p>前途未卜！ARP 负载均衡是一种可持续发送免费 ARP 数据包的情况，因此，在亚秒级时间段内可发送成千上万个需要处理的数据包。这会产生数百或数千倍的普通负载。在正常网络情况下，ARP 移动或 MAC 移动很少发生 - 例如，在系统联机时会出现一个 ARP 数据包，然后在 4 个小时后可能再次出现一个数据包，等等。这不是 SDN 的设计惯例。在这种情况下，通过以下方式实现负载均衡：以流方式持续传送需传到控制面板并推回到每个主机的更新，从而耗费大量系统资源来执行本可更高效执行的功能。</p>

<p>一些不知名的商用云提供商正使用 ARP 负载均衡作为常用方法来为其客户端实现负载均衡。这些提供商最好重新考虑自己所用的技术，因为他们容易因上述潜在隐患（尤其是性能问题和安全问题）而受到攻击。</p>

<h3 id="这-3-种基本-lb-方法的其他实现形式">这 3 种基本 LB 方法的其他实现形式</h3>

<p>在其他协议中，可使用负载均衡器连接到网络。例如，它们可与网络路由协议通信，或者充当捆绑式多以太网交换机链路（LAG 或端口通道）中的交换机。</p>

<p>这些实现形式需要更高级的网络配置，通常可以更具体一些。在某些情况下，与上述方法相比，它们可能是更好的选择。（它们并不适用于所有情况，但云提供商可能会选择使用其中某个方法来连接其 LB 服务。）</p>

<p>特定服务（例如 <code class="highlighter-rouge">keepalived</code>）也可能放在此类别下。</p>

<p>专家（例如，管理型托管提供商）可能会成功使用这些更为复杂的替代方案。例如，在 Blue Box 中（在被 IBM 收购之前），我们曾使用 OSPF 向网络基础架构声明 Blue Box“块”负载均衡器的共享 IP。</p>

<p>总而言之，除了本文中包含的三种基本方法外，还有一些更高级的实现形式，但本文中描述的这三种方法是最基本的方法，任何实现形式都必然会使用这些方法在云环境中实现负载均衡。</p>


      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/help-documentation/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/help-documentation/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/help-documentation/js/scripts.js"></script>

  </body>

</html>
