<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>在執行實例上設定 OpenVPN 伺服器</title>
  <meta name="description" content="當您需要連接至內部 Bluemix Private Cloud 執行實例，但沒有可用的浮動 IP 位址，或者您不想要將那些虛擬機器放在網際網路上，有一個作法是建立一個執行 OpenVPN 的防禦主機。如此一來，您就可以連接該主機並透過它通往內部網路。在本文中，您將瞭解如何針對此連線來安裝及設定 OpenVPN 伺...">

  <link rel="stylesheet" href="/help-documentation/css/main.css">
  <link rel="canonical" href="/help-documentation/zh_TW/gettingstarted/commontech/openvpn-setup/">
  <link rel="alternate" type="application/rss+xml" title="Blue Box Help" href="/help-documentation/zh_TW/feed.xml">
  
  <style>
   .site-header img:first-child {
       height: 72px;
}
</style>
  
</head>


  <body>

  
    <header class="site-header">

  <div class="header-wrapper">

    <a class="site-title" href="/help-documentation/zh_TW/"><img src="/help-documentation/img/zh_TW/Bluemix-logo-UI.svg" alt="" height="72px"></a>

    <div class="search--pageview">

  <div class="full-view__search hide">
    <a href="" class="x hide">X</a>
    <ul id="results-container"></ul>
    <ul class="results--container"></ul>

  </div>
  <div class="input-container">
    <label for="search__fullview" class="hide search--label">Search IBM Bluemix Private Cloud Help</label>
    <input type="text" id="search-input" placeholder="" name="search" class="search__minview--page">
    <img src="/help-documentation/img/zh_TW/search.svg" class="search-icon" />
  </div>
</div>


    <a href="mailto:llundquist@us.ibm.com" class="header--request">
      <p>
        Submit A Request
      </p>
      <img src="/help-documentation/img/zh_TW/user.svg">
    </a>
    <a id="nav-toggle" href="#"><span></span></a>

    <div>
  
    
      <a  href=" /help-documentation/gettingstarted/commontech/openvpn-setup/ ">en</a> |
    
      <a  href=" /help-documentation/fr/gettingstarted/commontech/openvpn-setup/ ">fr</a> |
    
      <a  href=" /help-documentation/de/gettingstarted/commontech/openvpn-setup/ ">de</a> |
    
      <a  href=" /help-documentation/ja/gettingstarted/commontech/openvpn-setup/ ">ja</a> |
    
      <a  href=" /help-documentation/zh_CN/gettingstarted/commontech/openvpn-setup/ ">zh_CN</a> |
    
      <a style="font-weight: bold;" href=" /help-documentation/zh_TW/gettingstarted/commontech/openvpn-setup/ ">zh_TW</a> |
    
      <a  href=" /help-documentation/pt_BR/gettingstarted/commontech/openvpn-setup/ ">pt_BR</a> |
    
  
</div>

  </div>

</header>

  

  
  <div class="page-content">
  

      <div class="main-wrapper">
        
<div class="sidebar sidebar--toggled">
  <ul class="sidebar__nav">
    <li>
      <h3 class="title">
        
        
        
        <a  class="page-link"  href="/help-documentation/zh_TW/gettingstarted">Getting Started (38)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list" >
        <h5 class="sub__head">Common Technical Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/connect-to-openvpn-server/">連接至 OpenVPN 伺服器</a>
          </li>
          
        
          
          <li>
              <a class="page-link--active"  href="/help-documentation/zh_TW/gettingstarted/commontech/openvpn-setup/">在執行實例上設定 OpenVPN 伺服器</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/blue-box-cloud-components/">Bluemix Private Cloud 元件</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/detaching-volume/">分離磁區之前我應該做什麼？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/python-environment-primer/">虛擬 Python 環境與您：開發人員的開始使用書</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/FAQ/">技術常見問題</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/Building_Blocks/">IBM Bluemix Private Cloud 建置區塊（社群版）</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/RHOSP_Building_Blocks/">為 IBM Bluemix Private Cloud with Red Hat 建置區塊</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/RHOSP_Product_Overview/">IBM Bluemix Private Cloud with Red Hat - 產品概觀</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/general_product_overview/">一般產品概觀</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/Instance_Resize/">調整執行實例大小（非即時）</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/Connecting_Clouds_with_SoftLayer/">使用私有網路設定多個雲端環境之間的網路連線功能</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commontech/Windows_License_Activation/">Windows 啟動客戶手冊</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 7 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">Common Administrative Questions</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/adding-removing-subscribers/">新增或移除問題單的訂閱者</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/view-my-bill/">如何檢視我的帳單？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/report-issue/">如何報告問題？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/escalating-a-ticket/">如何呈報問題單？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/status-pages/">Bluemix Private Cloud 狀態頁面</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/commonadmin/Transferring_A_Domain_From_Blue_Box/">透過 Blue Box 轉移網域</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 2 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">User Guides</h5>
        
        
          
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Box_Panel/">Box Panel 使用手冊</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Eternal_Blue-ish_Triangle/">Box Panel、網站控制器及 IBM Bluemix Private Cloud（本端）</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/qemu_article/">淺談 OpenStack — QEMU 與您的雲端</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Improving_Cloud_Performance/">淺談 OpenStack II -- 增進雲端效能</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Optimized_Load_Balancing/">雲端 101 -- 最佳化負載平衡</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Cloud_Images_Provided_RHOSP/">雲端映像檔的使用手冊 (IBM Bluemix Private Cloud with Red Hat)</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Cloud_Images_Provided_by_IBM/">雲端映像檔的使用手冊（社群版）</a>
                  </li>
              
             
         
             
         
             
         
             
         
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/gettingstarted/userguides/Image_Release_Notes/">IBM Bluemix Private Cloud 映像檔版本注意事項</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 4 )</a></li>
      </ul>
      
      <ul  class="article__list" >
        <h5 class="sub__head">Release Notes</h5>
        
        
          
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_3.0.1_Point_Release/">客戶 3.0.1 版本注意事項</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_3.1.1_Point_Release/">客戶 3.1.1 版本注意事項</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_4.0.0.0c_Release_Notes/">Release Notes 4.0.0.0c</a>
                  </li>
              
             
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_4.0.0.0r_Release_Notes/">版本注意事項 4.0.0.0r</a>
                </li>
              
         
             
                <li>
                <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_2.1.1_Point_Release/">版本注意事項 2.1.1</a>
                </li>
              
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/release_notes_2.1_for_customers/">版本注意事項 2.1</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_3.0.0_Release_Notes/">版本注意事項 3.0.0</a>
                  </li>
              
             
         
             
                
                  
                  <li class="hidden non-featured">
                    <a class="page-link" href="/help-documentation/zh_TW/releasenotes/Customer_3.1.0_Release_Notes/">版本注意事項 3.1.0</a>
                  </li>
              
             
         
        <li><a href="" class="page-link view">View More ( 6 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/troubleshooting">Troubleshooting (19)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/libvirt_error/">執行實例處於錯誤狀態：libvirt 錯誤</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/ssh-too-long-error/">為何需要 4-5 秒的時間才能透過 SSH 連上我的執行實例？</a>
          </li>
          
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/ping-instance-error/">為何無法透過 SSH 連上執行實例或 ping 它？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/nova-microversions-error/">錯誤：執行 Nova 指令時，發生「伺服器不支援微型版本」</a>
          </li>
          
        
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/Bad_Availability_Zone/">Cloud Foundry：無效可用性區域錯誤</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/failed_to_create_router/">嘗試建立路由器失敗</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/How_many_connections_can_HAProxy_handle/">HAProxy 可以處理多少同時連線？</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/CLI-authentication-error/">當我在 Windows 上使用任何 OpenStack CLI 時，發生鑑別失敗錯誤</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/floating-ips-error/">為何所有指派給我的浮動 IP 都無法使用？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/horizon-delete-error/">為何無法從 Horizon 儀表板中刪除我的專案/租戶？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/no-valid-host-error/">錯誤：找不到有效的主機</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/Cannot_See_New_vCPUs/">為何 Horizon 中沒有列出我的新 vCPU？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/failure_prepping_block_device/">錯誤：準備區塊裝置時失敗</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/delete_security_group/">為何無法刪除安全群組？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/Troubleshooting_FAQ/">疑難排解常見問題</a>
          </li>
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/Unable_to_ping_tenant_network/">為何無法在我的租戶網路之間執行 ping？</a>
              </li>
            
          
        
          
            
            
              <li class="hidden non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/troubleshooting/Why_No_vIP_Failover_With_L2pop/">當我想要我的 vIP 執行實例進行失效接手時，為何無法使用 L2pop？</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 11 )</a></li>
      </ul>
    </li>
    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/openstack">Open Stack (15)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">User Docs</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/launch-instance-from-volume/">如何從磁區啟動執行實例</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/import-vhd-image-lvm/">匯入 VHD 映像檔，以對其根目錄使用 Linux 磁區管理</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/OpenStack_network_concepts/">OpenStack 網路概念</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/Creating-an-Instance-with-a-Specific-Fixed-IP/">使用特定的固定 IP 建立執行實例</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/Mitaka_CLI_notes/">OpenStack Mitaka CLI 注意事項</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/Why-Choose-OpenStack/">為什麼選擇 OpenStack？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/openstack-storage-concepts/">OpenStack 儲存空間概念</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/Ursula_and_OpenStack/">Ursula 與 OpenStack</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/Creating_Instances_With_Static_IP/">如何使用靜態 IP 建立執行實例</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/quotas/">配額</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/How_to_Isolate_Tenants/">如何隔離租戶（專案）</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/userdocs/external-reference-material/">外部參照資料</a>
          </li>
          
        
        <li><a href="" class="page-link view">View More ( 3 )</a></li>
      </ul>

      <ul  class="article__list slide-up-hidden" >
        <h5 class="sub__head">API</h5>
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/api/floating-ip-address/">使用 OpenStack API 建立浮動 IP 位址</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/openstack/api/openstack-api-getting-started/">開始使用 OpenStack API</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/openstack/api/OpenStack_Client_Versions/">OpenStack 用戶端版本的需求</a>
              </li>
            
          
        
        <li><a href="" class="page-link view">View More ( 1 )</a></li>
      </ul>
    </li>




    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/horizon">Horizon [GUI] (10)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/horizon/creating-additional-networks-with-horizon/">使用 Horizon 畫面在 OpenStack 中建立其他網路</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/horizon/Making_Snapshots_in_Horizon/">對 Snapshot 使用 Horizon</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/horizon/allocate-floating-ip/">配置公用（浮動）IP  並將其附加至執行實例</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/create-volume-from-horizon/">從 Horizon 儀表板建立磁區</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/horizon-for-administrators/">管理者適用的 Horizon</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/launch-instance-from-horizon/">從 Horizon 儀表板啟動執行實例</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/launch-instance-from-horizon_newton/">從 Horizon 儀表板啟動執行實例（OpenStack Newton 版本）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/set-reverse-dns/">如何設定 IBM Bluemix Private Cloud 執行實例的反向 DNS (PTR) 記錄？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/horizon/using-horizon/">使用 Horizon</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/horizon/Horizon_troubleshooting_FAQ/">Horizon 疑難排解常見問題</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/nova">Nova [Compute] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/windows-user-and-password/">如何在 Windows 執行實例中以 OpenStack 設定起始使用者名稱和密碼？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/nova_live_migration/">Instance Live Migration</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/CLI-create-public-instance/">如何使用指令行建立執行實例並使它可公開使用</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/Nova_boot_speed/">當我啟動虛擬機器時幕後發生什麼情況，以及如何使它啟動更快速？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/Restrict_Floating_IP/">如何限制浮動 IP？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/config_drive_for_instances/">如何建立執行實例，並使用配置磁碟機為它新增檔案？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/create-vm-with-volumes/">如何使用 Nova 指令行用戶端建立執行實例？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/define-flavor-vcpu/">如何定義虛擬硬體範本 vCPU 拓蹼？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/deploy-to-specific-hypervisor/">How to deploy an instance to a specific hypervisor node</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/maximum-flavor-spec/">我可以為虛擬硬體範本設定的最大規格為何？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/nova/migrate-instance/">將執行實例移轉至新的雲端</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/Metadata_service_FAQ/">OpenStack Neutron 和 Nova 中的 Meta 資料服務</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/nova/hypervisor-statistics/">如何取得 Hypervisor 統計資料？</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/neutron">Neutron [Networking] (22)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/network_ip_availability/">如何檢查我的網路 IP 可用性？</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/neutron/isolatetwoprojectnetworksconnectedtoonesharedrouter/">如何隔離已連接到共用路由器的專案網路？</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/time-ip-associated-with-instance/">如何得知浮動 IP 與執行實例產生關聯或取消關聯的時間？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/Load_Balancing_Methods/">負載平衡方法</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/Multi-tier_Router_Configuration/">IBM Bluemix Private Cloud 內的多層路由器配置</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/set-up-dns-records/">如何設定指向 OpenStack 執行實例的 DNS 記錄？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/routing_internal_traffic_between_projects/">在專案之間遞送內部資料流量</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/neutron/add-ip-to-instance/">新增特定的固定專用 IP 至執行實例</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/configure-dns.for-instances/">為執行實例配置 DNS</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/neutron/configure-multi-nics/">為您自己的雲端映像檔配置多個網路介面</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/configure-ha-ip/">如何配置高可用性 IP</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/creating-virtual-networks/">在 IBM Bluemix Private Cloud 上建立虛擬網路</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/when_create_port_fails/">When creating port failed, how could I do ?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/How_Can_I_See_My_IPs/">如何查看我的 IP？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/How_to_update_DNS/">如何更新 DNS？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/vpn-vlan-directlink/">VPN、VLAN 和直接鏈結</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/BYOFIP_support/">在 IBM Bluemix Private Cloud 與客戶網站之間使用 BYOFIP 連線功能</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/Intro_to_LBaaS/">負載平衡器即服務 (LBaaS) 的簡介</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/Security_groups_CLI/">使用 CLI 來設定安全群組</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/neutron/Network_Use_Cases_White_Paper/">IBM Blue Box 網路使用案例</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/neutron/Where_Are_These_IPs/">前兩個 IP 在何處？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/glance">Glance [Images] (6)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/glance/FAQ_Working_with_Windows_Images/">使用 Windows 映像檔的常見問題</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/glance/compatible-glance-images/">是否有官方的 OpenStack 相容映像檔清單可供我下載用於 Glance？（CentOS、Ubuntu 等等）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/glance/disk-capacity-constraints/">磁碟容量限制</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/glance/Image_Properties_on_Power/">Power 計算節點上的 Glance 映像檔的最佳設定</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/glance/imagesnapshot/">映像檔與 Snapshot 之間的差異</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/cinder">Cinder [Block Storage] (13)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/cinder/read-only-cinder-error/">是什麼造成唯讀 Cinder 磁區，我要如何修正它們？</a>
          </li>
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/cinder/cinder-volume-stuck/">Cinder 磁區停滯</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/alternative_method_for_volume_encryption/">區塊儲存空間磁區加密的替代方法（使用 Ubuntu 訪客 VM）</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/Bug_Creating_Encrypted_Volumes/">不支援使用 Cinder 建立加密磁區</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/cinder/Managing_block_storage/">管理區塊儲存空間</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/cli-create-volume/">使用指令行建立磁區</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/create-volume-from-snapshot/">是否支援透過執行實例 Snapshot 建立磁區？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/resize_cinder_volume/">我要如何調整 Cinder 磁區的大小？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/supported_volume_types/">在雲端執行實例中支援哪些 Cinder 磁區類型？</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/Ephemeral_to_Cinder/">如何從暫時磁碟移至 Cinder 儲存空間</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/volume_clone/">Can I enable volume full clone more than copy-on-write clone?</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/Force_snapshot_on_attached_volume/">如何對連接的磁區強制執行 Snapshot</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/cinder/cinder-failed-connection-error/">如果 Cinder 用戶端傳回「錯誤：無法建立連線」訊息且無法連接，我該怎麼做？</a>
              </li>
            
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/keystone">Keystone [Identity] (8)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/oidc-federation/">IBM Bluemix Private Cloud 上的 OpenID Connect 聯合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/saml-federation/">IBM Bluemix Private Cloud 上的 Keystone SAML 聯合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/RBAC_Definitions/">角色型存取控制</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/Managing_Users_and_Projects/">管理使用者和專案</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/k2k-federation/">IBM Bluemix Private Cloud 上的 Keystone 對 Keystone (K2K) 聯合</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/tenants-security-groups-keystone/">專案與安全群組</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/keystone/custom-domains-keystone/">Keystone 第 3 版內的自訂網域</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/keystone/Getting_Started_with_K2K_Identity/">開始使用 Keystone 聯合識別</a>
          </li>
          
        
      </ul>
    </li>

    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/heat">Heat [Orchestration] (7)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/heat/Getting_Started_With_Heat/">開始使用 Heat 範本</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/heat/autoscaling-with-heat/">使用 Heat 進行自動調整</a>
              </li>
            
          
        
          
          <li>
              <a class="page-link" href="/help-documentation/zh_TW/heat/Deploying_apps_with_UCD/">使用 IBM UrbanCode Deploy 和 IBM Bluemix Private Cloud 來部署應用程式</a>
          </li>
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/heat/using_heat_for_load_balancer/">使用 Heat 以佈建具有負載平衡器的伺服器</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/heat/using-ucd-ucdp/">搭配使用 IBM Urban Code Deploy 與 IBM Bluemix Private Cloud</a>
              </li>
            
          
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/heat/using_heat_for_deployment/">使用 Heat 與自簽憑證</a>
              </li>
            
          
        
      </ul>
    </li>


    <li>
      <h3 class="title">
        <a  class="page-link"  href="/help-documentation/zh_TW/ceilometer">Ceilometer [Telemetry] (1)</a>
        <a href=""  class="expand rotate" ><img src="/help-documentation/img/zh_TW/arrow.svg" /></a>
      </h3>
      <ul  class="article__list slide-up-hidden" >
        
        
        
          
            
            
              <li class="non-featured">
                  <a class="page-link" href="/help-documentation/zh_TW/ceilometer/compatible-glance-images/">是否支援透過執行實例 Snapshot 建立磁區？</a>
              </li>
            
          
        
      </ul>
    </li>

  </ul>
</div>


<article>

  <div class="page-container">

    <div class="main-content">
      <header class="post-header">

        <h1 class="post-title">
        

        

        在執行實例上設定 OpenVPN 伺服器

        
        </h1>




        
        <div class="post-data">
          <img src='/help-documentation/img/zh_TW/avatar.png' />
          <ul class="author--info">
            <li>
              <span class="author">by Jason Kennedy </span>
              <span class="dot">&#9679;</span>
              <span class="date"> January 7th, 2016</span>
            </li>
            <li>
              <span class="job-title"></span>
            </li>
            <li class="tags">
              
                <h4>Tags:</h4>
                  <ul class="tag--list">
                  
                    <li class="tag"><p>getting started</p></li>
                  
                    <li class="tag"><p>開始使用</p></li>
                  
                    <li class="tag"><p>設定 openVPN</p></li>
                  
                  </ul>
              
            </li>
          </ul>
        </div>
        
      </header>

      <div class="post-content">
        <p>當您需要連接至內部 Bluemix Private Cloud 執行實例，但沒有可用的浮動 IP 位址，或者您不想要將那些虛擬機器放在網際網路上，有一個作法是建立一個執行 OpenVPN 的防禦主機。如此一來，您就可以連接該主機並透過它通往內部網路。在本文中，您將瞭解如何針對此連線來安裝及設定 OpenVPN 伺服器與用戶端。假設您已執行一台已配置浮動 IP 的虛擬機器。我們不會將設定 ufw 納入討論，或深入探討 linux 的任何生硬部分，這裡的操作說明純粹關於在 OpenStack 代管的執行實例上如何開始運作 OpenVPN。基於本範例的目的，我們將使用 Ubuntu 14.04。</p>

<p>請針對您的伺服器端設定，完成下列步驟。</p>

<h2 id="步驟-1---openvpn-配置">步驟 1 - OpenVPN 配置</h2>

<p>在安裝任何套件之前，我們首先會更新 Ubuntu 的儲存庫清單。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get update</code></pre></figure>

<p>接著，我們可以安裝 OpenVPN 和 Easy-RSA。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get install openvpn easy-rsa</code></pre></figure>

<p>VPN 伺服器配置檔範例需要解壓縮至 <code class="highlighter-rouge">/etc/openvpn</code>，這樣我們才能將它納入設定中。可以透過一個指令來完成這項解壓縮作業：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">gunzip -c /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz &gt; /etc/openvpn/server.conf</code></pre></figure>

<p>解壓縮之後，請在文字編輯器中開啟 <code class="highlighter-rouge">server.conf</code>。本指導教學將使用 <strong>Vim</strong>，但您可以使用偏好的任何編輯器。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/openvpn/server.conf</code></pre></figure>

<p>在此檔案中，要進行幾項變更。您會看到一個如下的區段：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Diffie hellman 參數。
</span>
<span class="c"># 使用下列指令來產生您自己的參數：
</span>
<span class="c">#   openssl dhparam -out dh1024.pem 1024
</span>
<span class="c"># 使用 2048 來替換 1024（如果您使用的是
</span>
<span class="c"># 2048 位元金鑰）。
</span>
dh dh1024.pem</code></pre></figure>

<p>編輯 <code class="highlighter-rouge">dh1024.pem</code>，改成 <code class="highlighter-rouge">dh2048.pem</code></p>

<p>這項變更將使得產生伺服器與用戶端金鑰時所使用的 RSA 金鑰長度變成兩倍。</p>

<p>同樣在 <code class="highlighter-rouge">server.conf</code> 檔案中，現在請尋找這個區段：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 如果已啟用，此指引將配置
</span>
<span class="c"># 所有用戶端以重新導向其預設
</span>
<span class="c"># 網路閘道（透過 VPN），使得
</span>
<span class="c"># 所有 IP 資料流量（例如 Web 瀏覽
</span>
<span class="c"># 和 DNS 查閱）通過 VPN
</span>
<span class="c"># （OpenVPN 伺服器機器可能需要 NAT
</span>
<span class="c"># 或將 TUN/TAP 介面橋接至網際網路，
</span>
<span class="c"># 此動作才能正常運作）。
</span>
;push <span class="s2">"redirect-gateway def1 bypass-dhcp"</span></code></pre></figure>

<p>將 <code class="highlighter-rouge">push "redirect-gateway def1 bypass-dhcp"</code> 解除註解，以便 VPN 伺服器能夠傳遞用戶端的 Web 資料流量至其目的地。完成時，此行應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">push <span class="s2">"redirect-gateway def1 bypass-dhcp"</span></code></pre></figure>

<p>下一項要進行編輯的是在該檔案的這個區域中：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 某些 Windows 專用的網路設定
</span>
<span class="c"># 可以推送至用戶端，例如 DNS
</span>
<span class="c"># 或 WINS 伺服器位址。警告：
</span>
<span class="c"># http://openvpn.net/faq.html#dhcpcaveats
</span>
<span class="c"># 下面的位址所參照的公用
</span>
<span class="c"># DNS 伺服器是由 opendns.com 提供。
</span>
;push <span class="s2">"dhcp-option DNS 208.67.222.222"</span>
;push <span class="s2">"dhcp-option DNS 208.67.220.220"</span></code></pre></figure>

<p>將 <code class="highlighter-rouge">push "dhcp-option DNS 208.67.222.222"</code> 和 <code class="highlighter-rouge">push "dhcp-option DNS 208.67.220.220"</code> 解除註解。完成時，這些項目應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">push <span class="s2">"dhcp-option DNS 208.67.222.222"</span>
push <span class="s2">"dhcp-option DNS 208.67.220.220"</span></code></pre></figure>

<p>這個項目告訴伺服器將 <strong>OpenDNS</strong> 推送至已連接的用戶端，以進行可能的 DNS 解析。利用推送，有助於避免 DNS 要求洩漏到 VPN 連線之外。不過，在用戶端裝置中指定所要的 DNS 解析器也很重要。雖然 <strong>OpenDNS</strong> 是 <strong>OpenVPN</strong> 所使用的預設值，但您可以使用偏好的任何 DNS 服務。</p>

<p><code class="highlighter-rouge">server.conf</code> 檔案中要變更的最後一個區域在這裡：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 在非 Windows 系統上，
</span>
<span class="c"># 您可以將此項目解除註解。
</span>
;user nobody
;group nogroup</code></pre></figure>

<p>將 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code> 解除註解。完成時，此項目應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">user nobody
group nogroup</code></pre></figure>

<p>依預設，<strong>OpenVPN</strong> 是以 root 使用者身分執行，因此對該系統具有完整的 root 存取權。請改為將 <strong>OpenVPN</strong> 侷限在 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code>，這是沒有預設登入功能的非特許使用者，通常是保留來執行未授信的應用程式，例如 Web 互動伺服器。</p>

<p>現在儲存變更並結束 <strong>Vim</strong>。</p>

<h3 id="封包轉遞">封包轉遞</h3>

<p>我們需要 <code class="highlighter-rouge">sysctl</code> 設定來告訴伺服器的核心，將用戶端裝置的資料流量轉遞至網際網路。否則，資料流量會停止於伺服器。請輸入下列指令，以在運行環境啟用封包轉遞：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">echo </span>1 &gt; /proc/sys/net/ipv4/ip_forward</code></pre></figure>

<p>現在，我們需要使這項轉遞變成永久執行，如此一來，伺服器在重新開機後仍會轉遞資料流量。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/sysctl.conf</code></pre></figure>

<p>在靠近 <code class="highlighter-rouge">sysctl</code> 檔案頂端，您會看到：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 將下一行解除註解，以啟用 IPv4 的封包轉遞
</span>
<span class="c">#net.ipv4.ip_forward=1</span></code></pre></figure>

<p>將 net.ipv4.ip_forward 解除註解。完成時，此行應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 將下一行解除註解，以啟用 IPv4 的封包轉遞
</span>
net.ipv4.ip_forward<span class="o">=</span>1</code></pre></figure>

<p>儲存變更並結束 <strong>Vim</strong>。</p>

<h3 id="簡單防火牆-ufw">簡單防火牆 (ufw)</h3>

<p><code class="highlighter-rouge">ufw</code> 是 iptables 的前端系統。設定 <code class="highlighter-rouge">ufw</code> 並不困難。依預設，它包括在 Ubuntu 14.04 中，因此我們只需要編輯一些規則和配置，然後開啟防火牆。如需參考 <code class="highlighter-rouge">ufw</code> 的其他用法，請參閱<strong>如何在 Ubuntu 和 Debian 雲端伺服器上使用 UFW 來設定防火牆</strong>。</p>

<p>首先，設定 <code class="highlighter-rouge">ufw</code> 以容許 SSH。在命令提示字元中，輸入：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw allow ssh</code></pre></figure>

<p>本指導教學將透過 UDP 使用 <strong>OpenVPN</strong>，所以 ufw 也必須容許 UDP 資料流量通過埠 1194。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw allow 1194/udp</code></pre></figure>

<p>也需要設定 <code class="highlighter-rouge">ufw</code> 轉遞原則。我們將在 ufw 的主要配置檔中執行此動作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/default/ufw</code></pre></figure>

<p>尋找 <code class="highlighter-rouge">DEFAULT_FORWARD_POLICY="DROP"</code>。此項目必須從 <code class="highlighter-rouge">DROP</code> 變更為 <code class="highlighter-rouge">ACCEPT</code>。完成時，此項目應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">DEFAULT_FORWARD_POLICY</span><span class="o">=</span><span class="s2">"ACCEPT"</span></code></pre></figure>

<p>接下來，我們將針對已連接用戶端的網址轉換和 IP 假冒新增其他的 <code class="highlighter-rouge">ufw</code> 規則。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/ufw/before.rules</code></pre></figure>

<p>使 <code class="highlighter-rouge">before.rules</code> 檔案的頂端如下面的範例所示。必須新增 <code class="highlighter-rouge">OPENVPN RULES</code> 的紅色區域：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#
</span>
<span class="c"># rules.before
</span>
<span class="c">#
</span>
<span class="c"># ufw 指令行新增規則之前應執行的規則。自訂
</span>
<span class="c"># 規則應新增至下面三個鏈結的其中之一：
</span>
<span class="c">#   ufw-before-input
</span>
<span class="c">#   ufw-before-output
</span>
<span class="c">#   ufw-before-forward
</span>
<span class="c">#
</span>

<span class="c"># 開始 OPENVPN 規則
</span>
<span class="c"># NAT 表格規則
</span>
<span class="k">*</span>nat
:POSTROUTING ACCEPT <span class="o">[</span>0:0]
<span class="c"># 容許資料流量從 OpenVPN 用戶端傳送到 eth0
</span>
-A POSTROUTING -s 10.8.0.0/8 -o eth0 -j MASQUERADE
COMMIT
<span class="c"># 結束 OPENVPN 規則
</span>

<span class="c"># 不要刪除這些必要行，否則會發生錯誤
</span>
<span class="k">*</span>filter</code></pre></figure>

<p>對 <code class="highlighter-rouge">ufw</code> 進行變更之後，現在我們可以啟用它。在命令提示字元中輸入：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw <span class="nb">enable</span></code></pre></figure>

<p>啟用 <code class="highlighter-rouge">ufw</code> 會傳回下列提示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Command may disrupt existing ssh connections. Proceed with operation <span class="o">(</span>y|n<span class="o">)</span>?</code></pre></figure>

<p>回答 <code class="highlighter-rouge">y</code>。結果的輸出如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Firewall is active and enabled on system startup</code></pre></figure>

<p>若要檢查 ufw 的主要防火牆規則：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ufw status</code></pre></figure>

<p>status 指令應傳回下列結果：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Status: active

To                         Action      From
--                         ------      ----
22                         ALLOW       Anywhere
1194/udp                   ALLOW       Anywhere
22 <span class="o">(</span>v6<span class="o">)</span>                    ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span>
1194/udp <span class="o">(</span>v6<span class="o">)</span>              ALLOW       Anywhere <span class="o">(</span>v6<span class="o">)</span></code></pre></figure>

<h2 id="步驟-2---建立憑證管理中心和伺服器端憑證與金鑰">步驟 2 - 建立憑證管理中心和伺服器端憑證與金鑰</h2>

<p><strong>OpenVPN</strong> 使用憑證將資料流量加密。</p>

<h3 id="配置及建置憑證管理中心">配置及建置憑證管理中心</h3>

<p>您現在可以設定自己的「憑證管理中心 (CA)」，並產生 <strong>OpenVPN</strong> 伺服器的憑證和金鑰。<strong>OpenVPN</strong> 支援根據憑證的雙向鑑別，這表示用戶端必須鑑別伺服器憑證，且伺服器必須鑑別用戶端憑證，然後才能建立互信。我們將使用先前複製的 Easy RSA 的 Script 來執行這個動作。</p>

<p>首先，複製 Easy-RSA 產生 Script。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp -r /usr/share/easy-rsa/ /etc/openvpn</code></pre></figure>

<p>接著，建立金鑰儲存庫目錄。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">mkdir /etc/openvpn/easy-rsa/keys</code></pre></figure>

<p>Easy-RSA 有一個變數檔案，我們可以編輯它來建立個人、企業或任何我們所選擇實體的專屬憑證。這項資訊會複製到憑證和金鑰，稍後它將有助於識別金鑰。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">vim /etc/openvpn/easy-rsa/vars</code></pre></figure>

<p>下列變數應該根據您的喜好設定加以變更。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">KEY_COUNTRY</span><span class="o">=</span><span class="s2">"US"</span>
<span class="nb">export </span><span class="nv">KEY_PROVINCE</span><span class="o">=</span><span class="s2">"TX"</span>
<span class="nb">export </span><span class="nv">KEY_CITY</span><span class="o">=</span><span class="s2">"Dallas"</span>
<span class="nb">export </span><span class="nv">KEY_ORG</span><span class="o">=</span><span class="s2">"My Company Name"</span>
<span class="nb">export </span><span class="nv">KEY_EMAIL</span><span class="o">=</span><span class="s2">"sammy@example.com"</span>
<span class="nb">export </span><span class="nv">KEY_OU</span><span class="o">=</span><span class="s2">"MYOrganizationalUnit"</span></code></pre></figure>

<p>在相同的變數檔案中，也請編輯下面這一行。為了簡單起見，我們將使用伺服器作為金鑰名稱。如果您要使用不同的名稱，則也需要更新參照 <code class="highlighter-rouge">server.key</code> 和 <strong>server.crt</strong> 的 <code class="highlighter-rouge">OpenVPN</code> 配置檔。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">export </span><span class="nv">KEY_NAME</span><span class="o">=</span><span class="s2">"server"</span></code></pre></figure>

<p>我們需要產生 Diffie-Hellman 參數；這可能需要幾分鐘的時間。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">openssl dhparam -out /etc/openvpn/dh2048.pem 2048</code></pre></figure>

<p>現在我們要變更目錄，這樣我們就可以直接在先前於步驟 2 中將 Easy-RSA 的 Script 移至的位置進行工作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd</span> /etc/openvpn/easy-rsa</code></pre></figure>

<p>起始設定 PKI（公開金鑰基礎架構）。請注意 <code class="highlighter-rouge">./varscommand</code> 前面的句點 (.) 及空格。那表示現行工作目錄（來源）。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">. ./vars</code></pre></figure>

<p>上述指令的輸出如下所示。因為我們尚未在 keys 目錄中產生任何項目，所以不必在意警告。</p>

<p>附註：如果您執行 <code class="highlighter-rouge">./clean-all</code>，我會對 <code class="highlighter-rouge">/etc/openvpn/easy-rsa/keys</code> 執行 <code class="highlighter-rouge">rm -rf</code>。現在，我們將清除任何可能的舊金鑰或範例金鑰的工作目錄，以挪出空間給新的金鑰。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./clean-all</code></pre></figure>

<p>這個最終指令是透過呼叫互動式 <strong>OpenSSL</strong> 指令來建置憑證管理中心 (CA)。其輸出會提示您確認先前輸入到 Easy-RSA 變數檔中的「識別名稱」變數（國家/地區名稱、組織等）.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-ca</code></pre></figure>

<p>直接按 ENTER 鍵來通過每一個提示。如果必須變更，您可以在提示內進行變更。</p>

<h3 id="產生伺服器的憑證和金鑰">產生伺服器的憑證和金鑰</h3>

<p>仍然使用 <code class="highlighter-rouge">/etc/openvpn/easy-rsa</code> 來進行工作，現在請輸入此指令來建置伺服器的金鑰。如果您看到以紅色標示的伺服器，那是我們先前在步驟 2 中設於 Esay-RSA 變數檔中的匯出 <code class="highlighter-rouge">KEY_NAME</code> 變數。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-key-server server</code></pre></figure>

<p>當我們執行 <code class="highlighter-rouge">./build-ca</code> 時會產生類似的輸出，同樣地，您可以按 ENTER 鍵來確認「識別名稱」的每一行。不過，這次還有另外兩個提示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Please enter the following <span class="s1">'extra'</span> attributes
to be sent with your certificate request
A challenge password <span class="o">[]</span>:

An optional company name <span class="o">[]</span>:</code></pre></figure>

<p>兩者均要保留空白，因此直接按 ENTER 鍵來通過每一個提示。</p>

<p>結尾的另外兩個查詢需要正面的 (<code class="highlighter-rouge">y</code>) 回應：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Sign the certificate? <span class="o">[</span>y/n]
1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]</code></pre></figure>

<p>上述最後一個提示完成時應出現：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Write out database with 1 new entries
Data Base Updated</code></pre></figure>

<h3 id="移動伺服器憑證和金鑰">移動伺服器憑證和金鑰</h3>

<p>OpenVPN 預期在 <code class="highlighter-rouge">/etc/openvpn</code> 中看見伺服器的 CA、憑證和金鑰。我們要將它們複製到適當的位置。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp /etc/openvpn/easy-rsa/keys/<span class="o">{</span>server.crt,server.key,ca.crt<span class="o">}</span> /etc/openvpn</code></pre></figure>

<p>您可以使用這個指令來驗證複製作業是否成功：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">ls /etc/openvpn</code></pre></figure>

<p>您應該會看到伺服器的憑證和金鑰檔。</p>

<p>此時，<strong>OpenVPN</strong> 伺服器可以開始使用。請啟動它並檢查狀態。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service openvpn start
service openvpn status</code></pre></figure>

<p>status 指令應傳回此結果：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">VPN <span class="s1">'server'</span> is running</code></pre></figure>

<p>恭喜！您的 OpenVPN 伺服器可以運作。</p>

<p>如果狀態訊息表示 VPN 不在執行中，請查看 <code class="highlighter-rouge">/var/log/syslog</code> 檔案中是否有錯誤，例如：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Options error: --key fails with <span class="s1">'server.key'</span>: No such file or directory</code></pre></figure>

<p>該錯誤指出 <code class="highlighter-rouge">server.key</code> 未正確複製到 <code class="highlighter-rouge">/etc/openvpn</code>。請重新複製檔案，然後再試一次。</p>

<h2 id="步驟-3---產生用戶端的憑證和金鑰">步驟 3 - 產生用戶端的憑證和金鑰</h2>

<p>到目前為止，我們已安裝及配置了 <strong>OpenVPN</strong> 伺服器、建立了憑證管理中心，以及建立了伺服器自己的憑證和金鑰。在這個步驟中，我們使用伺服器的 CA 來產生將連接至 VPN 的每一個用戶端裝置的憑證和金鑰。稍後這些檔案將安裝至用戶端裝置，例如筆記型電腦或智慧型手機。</p>

<h3 id="金鑰和憑證建置">金鑰和憑證建置</h3>

<p>連接至 VPN 的每一個用戶端最好有自己的唯一憑證和金鑰。若要產生一個可在所有用戶端裝置之間使用的通用憑證和金鑰，很適合使用此設定。</p>

<p><strong>附註：</strong>依預設，<strong>OpenVPN</strong> 不容許使用相同的憑證和金鑰，從用戶端同時連線至伺服器。（請參閱 <code class="highlighter-rouge">/etc/openvpn/server.conf</code> 中的 <code class="highlighter-rouge">duplicate-cn</code>。）</p>

<p>若要針對您想要連接至 VPN 的每一個裝置建立個別的鑑別認證，您應該先針對每一個裝置完成此步驟，但是要將下面的名稱 <code class="highlighter-rouge">client1</code> 變更為不同的值，例如 <code class="highlighter-rouge">client2</code> 或 <code class="highlighter-rouge">iphone2</code>。由於每個裝置使用不同的認證，稍後如有需要，您可以在伺服器上個別取消啟動這些認證。本指導教學的其餘範例將使用 <code class="highlighter-rouge">client1</code> 作為用戶端裝置名稱範例。</p>

<p>就像我們處理伺服器金鑰的方式一樣，現在，我們也為 <code class="highlighter-rouge">client1</code> 範例建立了一個金鑰。您仍然應該使用 <code class="highlighter-rouge">/etc/openvpn/easy-rsa</code> 來進行工作。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">./build-key client1</code></pre></figure>

<p>同樣地，系統會要求您變更或確認「識別名稱」變數，而且這兩個提示應該將保留空白。請按 ENTER 鍵接受預設值。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Please enter the following <span class="s1">'extra'</span> attributes
to be sent with your certificate request
A challenge password <span class="o">[]</span>:

An optional company name <span class="o">[]</span>:</code></pre></figure>

<p>像之前一樣，建置程序結尾的這兩個確認需要 (<code class="highlighter-rouge">y</code>) 回應：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Sign the certificate? <span class="o">[</span>y/n]
1 out of 1 certificate requests certified, commit? <span class="o">[</span>y/n]</code></pre></figure>

<p>如果金鑰建置成功，同樣地，其輸出如下：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">Write out database with 1 new entries
Data Base Updated</code></pre></figure>

<p>用戶端配置檔範例也應該複製到 Easy-RSA 金鑰目錄。我們將使用它作為範本來下載至用戶端裝置以進行編輯。在複製程序中，我們會將範例檔的名稱從 <code class="highlighter-rouge">client.conf</code> 變更為 <code class="highlighter-rouge">client.ovpn</code>，因為 <code class="highlighter-rouge">.ovpn</code> 副檔名是用戶端預期使用的副檔名。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf /etc/openvpn/easy-rsa/keys/client.ovpn</code></pre></figure>

<p>您可以針對每一個用戶端再次重複執行本節的作業，從頭到尾將 <code class="highlighter-rouge">client1</code> 取代為適當的用戶端名稱。</p>

<h3 id="將憑證和金鑰傳送至用戶端裝置">將憑證和金鑰傳送至用戶端裝置</h3>

<p>回想起我們建立用戶端憑證和金鑰的上述步驟，它們是儲存在 <strong>OpenVPN</strong> 伺服器的 <code class="highlighter-rouge">/etc/openvpn/easy-rsa/keys</code> 目錄中。</p>

<p>對於每一個用戶端，我們需要將用戶端憑證、金鑰及設定檔範本檔傳送至本端電腦或另一個用戶端裝置的資料夾。</p>

<p>在這個範例中，我們的 <code class="highlighter-rouge">client1</code> 裝置要求其憑證和金鑰位於伺服器的下列位置：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/openvpn/easy-rsa/keys/client1.crt
/etc/openvpn/easy-rsa/keys/client1.key</code></pre></figure>

<p>所有用戶端的 <code class="highlighter-rouge">ca.crt</code> 和 <code class="highlighter-rouge">client.ovpn</code> 檔案都相同。也請下載這兩個檔案；請注意，<code class="highlighter-rouge">ca.crt</code> 檔案位於不同於其他檔案的目錄中。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/openvpn/easy-rsa/keys/client.ovpn
/etc/openvpn/ca.crt</code></pre></figure>

<p>雖然用來完成此傳送作業的確切應用程式需視您的選擇及裝置的作業系統而定，但您希望應用程式在後端使用 SFTP（SSH 檔案傳送通訊協定）或 SCP（安全複製）。這樣會透過加密連線來傳輸您用戶端的 VPN 鑑別檔案。</p>

<p>以下是使用我們 <code class="highlighter-rouge">client1</code> 範例的 SCP 指令範例。它會將 <code class="highlighter-rouge">client1.key</code> 檔案放入本端電腦的 Downloads 目錄中。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">scp root@your-server-ip:/etc/openvpn/easy-rsa/keys/client1.key Downloads/</code></pre></figure>

<p>以下是一些工具和指導教學，可讓您安全地將檔案從伺服器傳送至本端電腦：</p>

<p>WinSCP
如何使用 SFTP 透過遠端伺服器安全地傳送檔案
如何使用 Filezilla 在 VPS 上安全地傳送及管理檔案</p>

<p>在本節結尾，請確定您的用戶端裝置上有下列四個檔案：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">client1.crt
client1.key
client.ovpn
ca.crt</code></pre></figure>

<h2 id="步驟-4---為用戶端裝置建立統一的-openvpn-設定檔">步驟 4 - 為用戶端裝置建立統一的 OpenVPN 設定檔</h2>

<p>管理用戶端檔案的方法有許多種，但使用統一設定檔是最簡單的方式。這是透過修改 client.ovpn 範本檔來建立，使其包括伺服器的憑證管理中心和用戶端的憑證及其金鑰。在合併之後，只有單一 client.ovpn 設定檔必須匯入至用戶端的 OpenVPN 應用程式中。</p>

<p>我們將在本端電腦（所有用戶端檔案都會下載至這台電腦）上建立 client1 裝置的單一設定檔。這台本端電腦本身可以是預期的用戶端，或只是用來合併鑑別檔案的暫時工作區。原始 client.ovpn 範本檔應加以複製並重新命名。其作法需視您本端電腦的作業系統而定。</p>

<p>附註：您複製的 client.ovpn 的名稱不需要與用戶端裝置相關。用戶端 OpenVPN 應用程式將使用此檔名作為 VPN 連線本身的 ID。而您應該將 client.ovpn 複製為您希望 VPN 的 nametag 顯示在作業系統中的名稱。例如：work.ovpn 將識別為 work，school.ovpn 將識別為 school 等等。</p>

<p>在本指導教學中，我們會以 Test1 來命名 VPN 連線，因此，從現在開始參照的檔名將是 Test1.ovpn。命名之後，我們必須在文字編輯器中開啟 Test1.ovpn；您可以使用偏好的任何編輯器。</p>

<p>要注意的第一個區域將是 Droplet 的 IP 位址。在靠近檔案頂端，變更 my-server-1 以反映您 VPN 的 IP。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 伺服器的主機名稱/IP 和埠。
</span>
<span class="c"># 您可以有多個要在伺服器之間
</span>
<span class="c"># 進行負載平衡的遠端項目。
</span>
remote my-server-1 1194</code></pre></figure>

<p>接下來，找出下面所顯示的區域，並將 <code class="highlighter-rouge">user nobody</code> 和 <code class="highlighter-rouge">group nogroup</code> 解除註解，就像我們在步驟 1 的 <code class="highlighter-rouge">server.conf</code> 中所執行的動作。附註：此步驟不適用於 Windows，因此您可以跳過它。完成時，此項目應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># 起始設定之後將專用權降級（僅限非 Windows）
</span>
user nobody
group nogroup</code></pre></figure>

<p>下面所給定區域需要將顯示的三行註銷，因此我們可改為直接在 <code class="highlighter-rouge">Test1.ovpn</code> 檔案中包含憑證和金鑰。完成時，它應如下所示：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># SSL/TLS 參數。
</span>
<span class="c"># . . .
</span>
<span class="c">#ca ca.crt
</span>
<span class="c">#cert client.crt
</span>
<span class="c">#key client.key</span></code></pre></figure>

<p>為了將個別檔案合併成一個統一的設定檔，會使用基本 XML 型語法，將 <code class="highlighter-rouge">ca.crt</code>、<code class="highlighter-rouge">client1.crt</code> 及 <code class="highlighter-rouge">client1.key</code> 檔案的內容直接貼到 <code class="highlighter-rouge">.ovpn</code> 設定檔中。檔案結尾的 XML 應採用下列格式：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;ca&gt;
<span class="o">(</span>insert ca.crt here<span class="o">)</span>
&lt;/ca&gt;
&lt;cert&gt;
<span class="o">(</span>insert client1.crt here<span class="o">)</span>
&lt;/cert&gt;
&lt;key&gt;
<span class="o">(</span>insert client1.key here<span class="o">)</span>
&lt;/key&gt;</code></pre></figure>

<p>完成時，檔案結尾應類似下面這個簡短的範例：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">&lt;ca&gt;
-----BEGIN CERTIFICATE-----
. . .
-----END CERTIFICATE-----
&lt;/ca&gt;

&lt;cert&gt;
Certificate:
. . .
-----END CERTIFICATE-----
. . .
-----END CERTIFICATE-----
&lt;/cert&gt;

&lt;key&gt;
-----BEGIN PRIVATE KEY-----
. . .
-----END PRIVATE KEY-----
&lt;/key&gt;</code></pre></figure>

<p><code class="highlighter-rouge">client1.crt</code> 檔案中含有一些額外資訊；乾脆包括整個檔案也沒關係。</p>

<p>儲存變更並結束。現在，我們已有統一的 <code class="highlighter-rouge">OpenVPN</code> 用戶端設定檔來配置 <strong>client1</strong>。</p>

<p>在這裡，我們只需要提供 <code class="highlighter-rouge">.ovpn</code> 檔案給我們選擇的 VPN 用戶端，不論它是 Tunnelblick、Viscosity（兩者均用於 OSX）或您自己選擇的用戶端都可以。</p>

<p>不過，在進行測試之前，我們需要確定 OpenStack 已準備好容許此資料流量通過。讓我們看看執行實例：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova list +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+
| ID | Name | Status | Task State | Power State | Networks | +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+
| 4f239959-be46-4fd3-963a-7c70db305d74 | jkbastion | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.72, 173.247.105.20 | | 0d3c2002-ea02-4311-8142-b622f05407b4 | jkinternal-ssh | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.68 | | 746e0ef8-48ee-4867-9c9d-e3d53a7e68bc | jkinternal-web | ACTIVE | - | Running | <span class="nv">internal</span><span class="o">=</span>10.230.7.69 | +--------------------------------------+----------------+--------+------------+-------------+--------------------------------------+</code></pre></figure>

<p>由於空間受限，我們暫時不管格式化，這裡有 3 個執行實例：有浮動 IP 的 jkbastion，還有 jkinternal-ssh 和 jkinternal-web，這兩者顯然會與 Web 及 SSH 產生關聯（Web VM 正在執行 nginx）。</p>

<p>此外，我們要看一下安全群組，以確定我們容許 UDP 1194 連到我們的防禦主機：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova secgroup-list
+--------------------------------------+-----------+------------------------+
| Id                                   | Name      | Description            |
+--------------------------------------+-----------+------------------------+
| 55608023-c88e-4446-b67c-b64e741df5cb | default   | default                |
| f33a4643-4440-4649-8ba6-aef09b00b7f7 | jkbastion | bastion security group |
| dcec8a37-9541-4286-a4ad-0290a44efbae |  jksec    | Jason Kennedy<span class="s1">'s shiz   |
+------------------------------ --------+-----------+------------------------+</span></code></pre></figure>

<p>jkbastion 的詳細資料：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="gp">$ </span>nova secgroup-list-rules f33a4643-4440-4649-8ba6-aef09b00b7f7
+-------------+-----------+---------+-----------+--------------+
| IP Protocol | From Port | To Port | IP Range  | Source Group |
+-------------+-----------+---------+-----------+--------------+
| tcp         | 22        | 22      | 0.0.0.0/0 |              |
| udp         | 1194      | 1194    | 0.0.0.0/0 |              |
+-------------+-----------+---------+-----------+--------------+</code></pre></figure>

<p>這樣應該就行了！當 VPN 連接之後，您應該能夠使用含有您需要的服務的內部虛擬機器。</p>

      </div>
    </div>

  </div>
</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="footer__wrapper--light">

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Products</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-local" class="nav--item__link">Private Cloud Local</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="nav--item__link">Sales</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-faq" class="nav--item__link">FAQs</a>
      </li>
    
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Our Story</a>
      </li>
 <li class="footer--nav__item">
        <a href="https://github.com/blueboxgroup?cm_mc_uid=04946053248414876234663&cm_mc_sid_50200000=1489010497" class="nav--item__link">On GitHub</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://blueboxstatus.com/" class="nav--item__link">System Status</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Support</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://support.bluebox.net/" class="nav--item__link">Box Panel</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Resources
        </a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud">Case Studies</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">Videos</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="nav--item__link">News</a>
      </li>
    </ul>

    <ul class="footer--nav">
      <li class="footer--nav__header">
        <a href="hhttps://www.ibm.com/blogs/bluemix/">Recent Blog Posts</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/the-power-of-openstack/" class="nav--item__link">The Power of OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/08/blue-box-storage-models-explained/" class="nav--item__link">IBM Bluemix Private Cloud Storage Models</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.blueboxcloud.com/insight/blog-article/github-ibm-com-running-on-blue-box" class="nav--item__link">IBM Github Runs on Bluemix Private Cloud</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/10/building-up-to-openstack/" class="nav--item__link">Building up to OpenStack</a>
      </li>
      <li class="footer--nav__item">
        <a href="https://www.ibm.com/blogs/bluemix/2016/07/keystone-to-keystone-federated-identity-on-blue-box-cloud/" class="nav--item__link">Get Started with Keystone Federation</a>
      </li>
    </ul>
  </div>
  <div class="footer__wrapper--dark">
    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.facebook.com/BlueBoxGroup/" class="list--item__link">Facebook</a>
      </li>
      <li class="list--item">
        <a href="https://twitter.com/bluebox?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" class="list--item__link">Twitter</a>
      </li>
      <li class="list--item">
        <a href="https://www.linkedin.com/company/blue-box-group" class="list--item__link">LinkedIn</a>
      </li>
      <li class="list--item">
        <a href="https://plus.google.com/+BlueBoxSeattle/posts" class="list--item__link">Google +</a>
      </li>
      <li class="list--item">
        <a href="https://github.com/blueboxgroup" class="list--item__link">GitHub</a>
      </li>
    </ul>

    <ul class="footer--list">
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/private-cloud-contact-us" class="list--item__link">Contact</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Legal</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Privacy Policy</a>
      </li>
      <li class="list--item">
        <a href="https://www.ibm.com/cloud-computing/bluemix/bluemix-private-cloud" class="list--item__link">Terms and Conditions</a>
      </li>

    </ul>
  </div>
  <div class="footer__wrapper--black">
    <p>
        &copy; 2017 IBM Bluemix
    </p>
  </div>
</footer>



    <script src="/help-documentation/js/vendor/simple-jekyll-search.js" type="text/javascript"></script>


    <script>
        SimpleJekyllSearch({
          searchInput: document.getElementById('search-input'),
          resultsContainer: document.getElementById('results-container'),
          json: '/help-documentation/search.json',
          searchResultTemplate: '<li class="search-item"><a href="{url}" class="item-title">{title}</a><ul class="tag--list">{tags}</ul></li>'
        });
    </script>
  <script src="/help-documentation/js/scripts.js"></script>

  </body>

</html>
